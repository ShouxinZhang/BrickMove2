### 定理 exists_finite_primeSpectrum_not_isNoetherianRing

There exists a commutative ring $R$ such that its prime spectrum, $\text{PrimeSpectrum } R$, is finite, but $R$ is not a Noetherian ring.

---

### 证明

### Step 1: Constructing the Ring

We construct the ring $R$ as the trivial square-zero extension of the rational numbers $\mathbb{Q}$ by the polynomial ring $\mathbb{Q}[X]$.

- Define $R = \mathbb{Q} \ltimes \mathbb{Q}[X]$ (in Lean, `TrivSqZeroExt ℚ (Polynomial ℚ)`).
  - API: `TrivSqZeroExt`
- The elements of $R$ are pairs $(a, p)$ with $a \in \mathbb{Q}$ and $p \in \mathbb{Q}[X]$.
- Multiplication is defined as $(a, p) \cdot (b, q) = (ab, aq + bp)$. This is a commutative ring.

### Step 2: Proving the Prime Spectrum is Finite

We show that $R$ has a unique prime ideal.

- Let $f: R \to \mathbb{Q}$ be the projection map $f(a, p) = a$. This is a surjective ring homomorphism.
  - API: `TrivSqZeroExt.fstHom`, `Function.Surjective`, `RingHom.ker`
- Its kernel, $\ker f$, consists of elements of the form $(0, p)$, which square to zero. Thus, $\ker f$ is a nilpotent ideal and must be contained in every prime ideal $P$ of $R$.
  - API: `TrivSqZeroExt.isNilpotent_iff_isNilpotent_fst`, `Ideal.IsPrime.mem_of_pow_mem`
- The image of any prime ideal $P$ under $f$, $\text{Ideal.map } f(P)$, is a prime ideal in the field $\mathbb{Q}$.
  - API: `Ideal.map_isPrime_of_surjective`
- Since $\mathbb{Q}$ is a field, its only prime ideal is the zero ideal, so $\text{Ideal.map } f(P) = \{0\}$.
  - API: `Ideal.eq_bot_of_prime`
- By the correspondence theorem for surjective homomorphisms, any prime ideal $P$ containing $\ker f$ must be the preimage of its image, so $P = f^{-1}(\text{Ideal.map } f(P)) = f^{-1}(\{0\}) = \ker f$.
- Thus, $\ker f$ is the unique prime ideal of $R$. A ring with a unique prime ideal has a singleton prime spectrum, which is finite.
  - API: `Subsingleton`, `Fintype.ofSubsingleton`

### Step 3: Proving the Ring is Not Noetherian

We prove by contradiction. Assume $R$ is a Noetherian ring.

- This implies that every ideal of $R$ is finitely generated as an $R$-module.
  - API: `isNoetherian_def`
- Let $I = \ker f = \{(0, p) | p \in \mathbb{Q}[X]\}$. As an ideal, $I$ must be finitely generated by a set $S = \{(0, p_1), \dots, (0, p_k)\} \subset I$.
  - API: `Submodule.fg_top`

### Step 4: Deriving a Contradiction

Consider the surjective $\mathbb{Q}$-linear map $l: I \to \mathbb{Q}[X]$ defined by $l(0, p) = p$.

- We will show that if $I$ is finitely generated as an $R$-module by $S$, then $\mathbb{Q}[X]$ is finitely generated as a $\mathbb{Q}$-module (a vector space) by the finite set of polynomials $SV = \{p_1, \dots, p_k\}$.
  - API: `TrivSqZeroExt.sndHom`, `LinearMap.comp`
- Any element $(0, p) \in I$ can be written as a sum $\sum_{i=1}^k r_i \cdot (0, p_i)$ for some $r_i = (a_i, q_i) \in R$.
  - API: `Submodule.span_induction`
- The multiplication rule gives $r_i \cdot (0, p_i) = (a_i, q_i) \cdot (0, p_i) = (0, a_i p_i)$.
  - API: `TrivSqZeroExt.snd_mul`
- Therefore, $(0, p) = \sum_{i=1}^k (0, a_i p_i) = (0, \sum_{i=1}^k a_i p_i)$. Applying the map $l$, we get $p = \sum_{i=1}^k a_i p_i$.
- This shows that any polynomial $p \in \mathbb{Q}[X]$ can be written as a $\mathbb{Q}$-linear combination of the polynomials in $SV$. Hence, $\mathbb{Q}[X]$ is a finitely generated $\mathbb{Q}$-module.
  - API: `Submodule.fg_span`

### Step 5: Conclusion

The conclusion that $\mathbb{Q}[X]$ is a finitely generated $\mathbb{Q}$-module contradicts the established fact that it is not.

- The set of polynomials $\{1, X, X^2, X^3, \dots\}$ forms an infinite basis for $\mathbb{Q}[X]$ as a vector space over $\mathbb{Q}$, so it cannot be finitely generated.
- This can be formally shown by constructing an infinite strictly ascending chain of submodules, e.g., $V_n = \text{span}(\{1, X, \dots, X^{n-1}\})$.
  - API: `polynomial_rat_not_fg`, `monotone_stabilizes_iff_noetherian`
- Since a module is Noetherian if and only if every ascending chain of submodules stabilizes, $\mathbb{Q}[X]$ is not a Noetherian $\mathbb{Q}$-module.
  - API: `isNoetherian_of_top_submodule_fg`
- This contradiction proves our initial assumption was false, so $R$ is not a Noetherian ring.
