[
  {
    "id": 1,
    "informal_statement": "\nLet $R$ be a UFD with two nonassociate prime elements $p$ and $q$ such that every prime element is an associate of either $p$ or $q$. \n\tProve that $R$ is a PID.\n",
    "informal_proof": "\nConsider $p^m+q^n \\in (p^m, q^n)$. We note that neither $p$ nor $q$ divides $p^m+q^n$, so $p$ and $q$ does not appear in the factorization of $p^m+q^n$. Yet $R$ has only two primes, $p^m+q^n$ must be a unit. So $(p^m, q^n) =R$.\n\nLet $I$ be a nonunit ideal of $R$. For each nonzero element $x$ of $I$, it factors as $x = p^{m(x)} q^{n(x)} u(x)$ in $R$, where $m(x), n(x) \\in \\mathbb{Z}_{\\geq0}$ and $u(x)$ is a unit.\nLet $m : = \\min_{x} m(x)$ and $n : = \\min_{x}n(x)$. We claim that $I= (p^mq^n)$. Clearly, by definition,  $p^mq^n$ divides every $x = p^{m(x)} q^{n(x)} u(x)$. It remains to show that $p^mq^n \\in I$.\n\nLet $x\\in I \\backslash \\{0\\}$ and $y \\in I\\backslash \\{0\\}$ be so that $m= m(x)$ and $n = n(y)$. \nIf $n=n(x)$ or $m=m(y)$, then  $p^mq^n$ is a unit multiple of $x$ or $y$, respectively, and thus $p^mq^n \\in I$.\nNow we assume that $n>n(x)$ and $m>m(y)$.\nBy (1), we know that\n$$\n( q^{n(x)-n}u(x), p^{m(y)-m}u(y)) = R.\n$$\nSo there exists $r,s \\in R$ such that\n$$\nr q^{n(x)-n}u(x) + s p^{m(y)-m}u(y) = 1.\n$$\n$$\np^m q^n = rp^m q^{n(x)}u(x) + s p^{m(y)} q^n u(y) = rx+sy.\n$$\nSo $p^mq^n \\in I$.  Thus $R$ is a PID.\n",
    "formal_statement": "import Mathlib\n\n/-- Let $R$ be a UFD with two nonassociate prime elements $p$ and $q$ such that every prime\nelement is an associate of either $p$ or $q$.  Prove that $R$ is a PID. -/\ntheorem isPrincipalIdealRing_of_associated_or_associated {R : Type} [CommRing R] [IsDomain R]\n    [UniqueFactorizationMonoid R] {p q : R} (hp : Prime p) (hq : Prime q) (hpq : ¬ Associated p q)\n    (h : ∀ {x : R}, Prime x → Associated x p ∨ Associated x q) :\n    IsPrincipalIdealRing R := by\n  sorry\n"
  },
  {
    "id": 2,
    "informal_statement": "\nLet $G$ be a finite group and $L$ a maximal subgroup of $G$. Suppose $L$ is non-Abelian and simple. Then there exist at most two minimal normal subgroups in $G$.\n",
    "informal_proof": "\n    Assume that $G$ has a minimal normal subgroup $M$ such that $M\\cap G=1$. If such a group does not exist, all minimal normal subgroups of $G$ should contain $L$ (as $L$ is simple) and hence either $L$ or $G$ (as $L$ is maximal).\n\n    By the maximality of $L$, $G=M\\rtimes L$. Let $M'$ be another minimal normal subgroup of $G$, by analyzing the image of $M'$ in $G/M\\cong L$, $M'$ is isomorphic to $L$ and $G=M\\times M'$. Thus, $M'\\cong L$ is nonabelian simple.\n\n    We claim that $M$ and $M'$ are the only two minimal normal subgroups. Let $N$ be a minimal normal subgroup. Consider the projection from $N$ to $M$ and $M'$, denoted by $f$ and $g$. We need to prove either $f=1$ or $g=1$. If not, $f$ and $g$ are ismorphisms. But $M'$ is nonabelian, $M'$ is not a normal subgroup of $M'\\times M'$ which leads a contradiction.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $G$ be a finite group and $L$ a maximal subgroup of $G$. Suppose $L$ is non-Abelian and simple.\nThen there exist at most two minimal normal subgroups in $G$.\n-/\ntheorem card_minimal_normal_subgroup_le_2 (G : Type) [Group G] [Finite G]\n    (L : Subgroup G) (h_ne_top : L ≠ ⊤) (h_maximal : IsMax (⟨L, h_ne_top⟩ : {H : Subgroup G // H ≠ ⊤}))\n    (h_simple : IsSimpleGroup L) (h_non_comm : ∃ (x y : L), x * y ≠ y * x) :\n    {H : {H : Subgroup G // H.Normal} | IsMin H}.ncard ≤ 2 := by\n  sorry\n"
  },
  {
    "id": 3,
    "informal_statement": "\nLet $H$ be a subgroup of finite index of a group $G$. Show that there exists a subset $S$ of $G$, such that\n$S$ is both a set of representatives of the left and the right cosets of $H$ in $G$.\n",
    "informal_proof": "\nConsider the commutative diagram:\n\\begin{equation}\n    \\begin{tikzcd}\n        G\\arrow[r]\\arrow[d]&G/H\\arrow[d]\\\\\n        H\\backslash G\\arrow[r]& H\\backslash G/H\n    \\end{tikzcd}\n\\end{equation}\nTake a complete set of representatives $\\{g_i\\}$ in $G$ of $H\\backslash G$. If $H g_i h= Hg_j$, adjust $g_i$ with an element in the fiber of $G/H\\to H\\backslash G/H$, which is $H\\cap g_i H g_i^{-1}$. We do this adjustment for finitely many times and have the desired conclusion.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $H$ be a subgroup of finite index of a group $G$. Show that there exists a subset $S$ of $G$, such that\n$S$ is both a set of representatives of the left and the right cosets of $H$ in $G$.\n-/\ntheorem exists_leftCoset_rightCoset_representative\n    (G : Type) [Group G] (H : Subgroup G) [H.FiniteIndex] :\n    ∃ S : Set G, Subgroup.IsComplement S H ∧ Subgroup.IsComplement H S := by\n  sorry\n"
  },
  {
    "id": 4,
    "informal_statement": "\nLet $p$ be an odd prime number, and let $G$ be a finite group of order $p(p + 1)$. Assume that $G$\ndoes not have a normal Sylow $p$-subgroup.\nProve that $p + 1$ is a power of $2$.\n",
    "informal_proof": "\nBy Sylow's theorem, the number $|I_p|$ of the set of all Sylow-$p$-subgroups $\\{G_p^i\\}_{i\\in I_p}$ in $G$ is either $1$ or $p+1$. By assumption, this number is $p+1$. The group of order $p$ is a cyclic group. This implies that the union $|\\bigcup_{i\\in I_p}G_p^i|=(p-1)(p+1)+1=p^2$. So $|G\\backslash\\bigcup_{i\\in I_p}G_p^i|=p$. \\par\nWe now consider a prime number $l|p+1$. Let $c$ be an element of order $l$. Take a cyclic (Sylow)-$p$-subgroup $G_p=<x>$ generated by an element $x$. The stabilizer of $<c>$ in $<x>$ is either $1$ or $<x>$. We claim the stabilizer is $<1>$. If not, then $c$ and $x$ generate a group of order $pl$, but Sylow's theorem implies that $<x>$ is also a normal subgroup of $<c,x>$, which contradicts the first paragraph that $|I_p|=p+1$ (or equivalently, the normalizer is the Sylow-$p$-group itself). So the claim is proved.\\par\nBut now, we have $p$ distinct elements of order $l$: $x^ncx^{-n}$, for $1\\leq n\\leq p-1$, which is exactly the complement $G\\backslash \\bigcup_{i\\in I_p}G_p^i$. Take $l=2$, this implies that every element in the complement is of order $2$ and that all divisors of $p+1$ are powers of $2$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $p$ be an odd prime number, and let $G$ be a finite group of order $p(p + 1)$. Assume that $G$\ndoes not have a normal Sylow $p$-subgroup. Prove that $p + 1$ is a power of $2$.\n-/\ntheorem add_one_eq_two_pow_of_sylow_subgroup_not_normal (p : ℕ) (h_odd : Odd p) (G : Type)\n    (hp : p.Prime) [Finite G] [Group G] (h_card : Nat.card G = p * (p + 1))\n    (h_sylow : ∀ (H : Sylow p G), ¬ H.Normal) : ∃ (n : ℕ), p + 1 = 2 ^ n := by\n  sorry\n"
  },
  {
    "id": 5,
    "informal_statement": "\nLet \\(p\\) be a prime, let \\(G\\) be a finite p-group. Let A be a maximal normal abelian subgroup of \\(G\\). Prove that A is also a maximal abelian subgroup of \\(G\\).\n",
    "informal_proof": "\nLet $C=C_G(A)$ be the centralizer of $A$. Then, $C$ is normal. We show $C = A$ by contradiction. \n\nSuppose \\(C > A\\). Consider the quotient group $C/A$ which is a nontrivial $p$-group. By Cauchy's Theorem, $C/A$ has a normal subgroup of order $p$. By corresponding theorem, $C$ has a normal subgroup $H$ containing $A$ such that $[H:A]=p$. Note that $A$ is contained in the center $Z(C)$ of $C$, hence is contained in the center $Z(H)$ of $H$. It follows that $|H/Z(H)|=1 \\text{ or } p$. In either case, $H$ is Abelian. Hence, $H$ is a normal abelian subgroup of $G$. By maximality of $A$, we must have $H=A$, which is a contraction! Therefore, $C = A$. Since any abelian group containing $A$ is contained in $C$ hence is equal to $A$, we conclude that $A$ is a maximal abelian subgroup of $G$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\(p\\) be a prime, let \\(G\\) be a finite p-group. Let A be a maximal normal abelian subgroup of \\(G\\).\nProve that A is also a maximal abelian subgroup of \\(G\\).-/\ntheorem maximal_abelian_normal_subgroup_of_p_group_is_maximal_abelian_subgroup\n    (p : ℕ) (hp : p.Prime) (G : Type) [Group G] [Finite G] (h_pgroup : IsPGroup p G)\n    (H : Subgroup G) (h_normal : H.Normal) (h_comm : IsMulCommutative H)\n    (h_maximal_normal_abelian : ∀ (K : Subgroup G), K.Normal → IsMulCommutative K → H ≤ K → H = K) :\n    ∀ (K : Subgroup G), IsMulCommutative K → H ≤ K → H = K := by\n  sorry\n"
  },
  {
    "id": 6,
    "informal_statement": "\nProve that if $\\#G = 396$ then $G$ is not simple.\n",
    "informal_proof": "\n\nSo the action of \\( G \\) on \\( \\mathrm{Syl}_{11}(G) \\) gives a homomorphism from \\( G \\) into \\( S_{12} \\). Since \\( G \\) is simple, this must be an injective map into \\( A_{12} \\). If \\( P \\in \\mathrm{Syl}_{11}(G) \\), then \\( [G : N_G(P)] = 12 \\), so \\( |N_G(P)| = 33 \\). Any group of order 33 is cyclic (since both Sylow subgroups are normal). This means that \\( A_{12} \\) must have an element of order 33, which it cannot since that would have to be a product of two disjoint cycles of orders 11 and 3 respectively.\n\n",
    "formal_statement": "import Mathlib\n\n/-- Prove that if $\\#G = 396$ then $G$ is not simple. -/\ntheorem not_isSimpleGroup_of_card_eq_396 (G : Type) [Group G]\n    [Finite G] (h_card : Nat.card G = 396) : ¬ IsSimpleGroup G := by\n  sorry\n"
  },
  {
    "id": 7,
    "informal_statement": "\nProve that if $\\#G = 1785$ then $G$ is not simple.\n",
    "informal_proof": "\n\nAs $1785=3\\times 5\\times7\\times 17$. Suppose $G$ is not simple, then $\\# \\mathrm{Syl}_{17}(G) = 35$. Let $P\\in \\mathrm{Syl}_{17}(G)$. One has $\\# N_G(P) = 51 = 3\\times 17$. Let $H\\in N_G(P)$ with order $3$. By Sylow theorem, $H$ is normal in $N_G(P)$. Then $51 | N_G(H)$ and $\\#(G/N_G(H)) | 35$. As $G$ is not simple, then $\\#\\mathrm{Syl}_{3}(G) = 7$ and the $G$-action on $\\mathrm{Syl}_{3}(G)$ induces an injection from $G$ to $S_7$. It is impossible as $S_7$ does not have order $17$ subgroup. \n\n",
    "formal_statement": "import Mathlib\n\n/-- Prove that if $\\#G = 1785$ then $G$ is not simple. -/\ntheorem not_isSimpleGroup_of_card_eq_1785 (G : Type) [Group G]\n    [Finite G] (h_card : Nat.card G = 1785) : ¬ IsSimpleGroup G := by\n  sorry\n"
  },
  {
    "id": 8,
    "informal_statement": "\nLet $A, B \\in \\mathbb{Q}^\\times$ be rational numbers. Consider the quaternion ring\n$$\nD_{A, B, \\mathbb{R}} = \\{a+b\\boldsymbol{i} +c\\boldsymbol{j}+d\\boldsymbol{k}\\;|\\; a,b,c,d \\in \\mathbb{R}\\}\n$$\nin which the multiplication satisfies relations: $\\boldsymbol{i}^2 = A$, $\\boldsymbol{j}^ 2 = B$, and $\\boldsymbol{i}\\boldsymbol{j}= -\\boldsymbol{j}\\boldsymbol{i} = \\boldsymbol{k}$.\n\nShow that $D_{A, B, \\mathbb{R}}$ is either isomorphic to $\\mathbb{H}$ (Hamilton quaternion) or isomorphic to $\\mathrm{Mat}_{2\\times 2}(\\mathbb{R})$ as $\\mathbb{R}$-algebras.\n",
    "informal_proof": "\n\nBy suitable base change, we may assume $A,B\\in\\{ \\pm 1\\}$. We consider the following four different cases:\n\n\\begin{itemize}\n    \\item $(A,B) = (-1,-1)$. This is the canonical Hamilton algebra.\n    \\item  $(A,B) = (1,-1)$. The map $D_{A, B, \\mathbb{R}}  \\rightarrow \\mathrm{Mat}_{2\\times 2}(\\mathbb{R})  $ defined by $$i  \\mapsto \\begin{pmatrix}\n            1 & 0 \\\\\n            0 & -1\n        \\end{pmatrix}\\\\\n        ,  j  \\mapsto \\begin{pmatrix}\n            0 & 1 \\\\\n            -1 & 0\n        \\end{pmatrix}$$ is an isomorphism.\n        \\item $(A,B) = (-1,1)$. Symmetric to the case above.\n   \\item $(A,B) = (1,1)$. The map $D_{A, B, \\mathbb{R}}  \\rightarrow \\mathrm{Mat}_{2\\times 2}(\\mathbb{R})  $ defined by $$i  \\mapsto \\begin{pmatrix}\n            1 & 0 \\\\\n            0 & -1\n        \\end{pmatrix}\\\\\n        ,  j  \\mapsto \\begin{pmatrix}\n            0 & 1 \\\\\n            1 & 0\n        \\end{pmatrix}$$ is an isomorphism.\n\\end{itemize}\n\n   \n    \n",
    "formal_statement": "import Mathlib\n\nopen Quaternion\n\n/--\nLet $A, B \\in \\mathbb{Q}^\\times$ be rational numbers. Consider the quaternion ring\n$$\nD_{A, B, \\mathbb{R}} = \\{a+b\\boldsymbol{i} +c\\boldsymbol{j}+d\\boldsymbol{k}\\;|\\; a,b,c,d \\in\n\\mathbb{R}\\}$$\nin which the multiplication satisfies relations: $\\boldsymbol{i}^2 = A$, $\\boldsymbol{j}^ 2 = B$,\nand $\\boldsymbol{i}\\boldsymbol{j}= -\\boldsymbol{j}\\boldsymbol{i} = \\boldsymbol{k}$.\nShow that $D_{A, B, \\mathbb{R}}$ is either isomorphic to $\\mathbb{H}$ (Hamilton quaternion) or\nisomorphic to $\\mathrm{Mat}_{2\\times 2}(\\mathbb{R})$ as $\\mathbb{R}$-algebras.\n-/\ntheorem quaternionAlgebra_isomorphic_to_matrix_ring_or_quaternion_ring\n    (A B : ℚ) (ha : A ≠ 0) (hb : B ≠ 0) :\n    ((Nonempty (ℍ[ℝ, A, B] ≃ₐ[ℝ] ℍ[ℝ, -1, -1])) ∨ (Nonempty (ℍ[ℝ, A, B] ≃ₐ[ℝ] Matrix (Fin 2) (Fin 2) ℝ)))\n    ∧ IsEmpty (Matrix (Fin 2) (Fin 2) ℝ ≃ₐ[ℝ] ℍ[ℝ, -1, -1]) := by\n  sorry\n"
  },
  {
    "id": 9,
    "informal_statement": "\nLet $G$ be a finite group and let $\\mathrm{Syl}_p(G)$ denote its set of Sylow $p$-subgroups.\n\tSuppose that $S$ and $T$ are distinct members of \n\t$\\mathrm{Syl}_p(G)$ chosen so that $\\#(S \\cap T)$ is maximal\namong all such intersections. Prove that the normalizer $N_G(S \\cap  T)$ does not admit normal Sylow $p$-subgroup.\n",
    "informal_proof": "\n\nWe shall exhibit two Sylow $p$-subgroups of $N_G(S \\cap T)$ as follows:\n\\[\nS_0 := \\left\\{ s \\in S \\mid s T s^{-1} \\cap S = T \\cap S \\right\\},\n\\]\n\\[\nT_0 := \\left\\{ t \\in T \\mid t S t^{-1} \\cap T = S \\cap T \\right\\}.\n\\]\nClearly, both $S_0$ and $T_0$ contain $S \\cap T$. We shall show that each $S_0$ and $T_0$ strictly contains $S \\cap T$ and that they are indeed Sylow $p$-subgroups of $N_G(S \\cap T)$; part (1) would then follow from this because we have exhibited two different Sylow $p$-subgroups of $N_G(S \\cap T)$. By symmetry, it suffices to treat one of them, say $S_0$.\n\nFirst of all, $N_S(S \\cap T)$ is contained in $S_0$. Yet $S$ is a $p$-group, so the normalizer of $S \\cap T$ is strictly larger than $S \\cap T$. So $S_0$ strictly contains $S \\cap T$.\n\nWe next show that $S_0$ is a Sylow $p$-subgroup of $N_G(S \\cap T)$. Suppose not, then $S_0$ is strictly contained in a Sylow $p$-subgroup $P \\subseteq N_G(S \\cap T)$, which in turn is contained in a Sylow $p$-subgroup $\\tilde{P}$ of $G$. We note that $\\tilde{P} \\neq S$; this is because\n\\[\nN_G(S \\cap T) \\cap S = S_0 \\subsetneq P \\subseteq \\tilde{P} \\cap N_G(S \\cap T).\n\\]\nYet $\\tilde{P} \\cap S$ contains $S_0$ which is strictly bigger than $S \\cap T$. This contradicts with the maximality of $S \\cap T$. Therefore, we see that $S_0$ is a Sylow $p$-subgroup of $N_G(S \\cap T)$. This completes the proof.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $G$ be a finite group and let $\\mathrm{Syl}_p(G)$ denote its set of Sylow $p$-subgroups.\n\tSuppose that $S$ and $T$ are distinct members of\n\t$\\mathrm{Syl}_p(G)$ chosen so that $\\#(S \\cap T)$ is maximal\namong all such intersections. Prove that the normalizer $N_G(S \\cap  T)$ does not admit normal\nSylow $p$-subgroup.-/\ntheorem sylow_subgroup_not_normal_of_maximal_intersection (G : Type) [Finite G] [Group G]\n    (p : ℕ) [Fact (Nat.Prime p)] (S T : Sylow p G) (h_ne : S ≠ T)\n    (h_maximal : ∀ (S' T' : Sylow p G), S' ≠ T' →\n    ((S' : Set G) ⊓ T').ncard ≤ ((S : Set G) ⊓ T).ncard) :\n    ∀ (P : Sylow p ((S : Subgroup G) ⊓ T).normalizer), ¬ P.Normal := by\n  sorry\n"
  },
  {
    "id": 10,
    "informal_statement": "\nLet \\( A = \\mathbb{R}[X, Y]/(X^2 + Y^2 + 1) \\). Then it is a principal ideal domain.\n",
    "informal_proof": "\n\nElements of the $\\mathbb{R}$-algebra $A$ can be written in a unique way as $a + bY$ with $a, b \\in \\mathbb{R}[X]$. \nWhen $f = a + bY \\in A$, we put $\\overline{f} = a - bY$. The map $f \\to \\overline{f}$ is an $\\mathbb{R}[X]$-algebra \nautomorphism of $A$.\n\nWe claim that if $f$ be a non-zero element of $A$ then $A/(f)$ is a finite dimensional real vector\nspace and $\\dim A/(f) = \\deg f\\overline{f}$.\n\nSince $A$ is free of rank $2$ over $\\mathbb{R}[X]$, the claim is true for $f \\in \\mathbb{R}[X]$. For any\n$f \\in A$ we have $\\dim A/(f) = \\dim A/(\\overline{f})$. Since the natural map\n\\[\nA/(f) \\longrightarrow A/(f\\overline{f}): \\quad g\\mapsto g\\bar{f}\n\\]\nis injective with cokernel $A/(\\overline{f})$, we have\n\\[\n2\\dim A/(f) = \\dim A/(f) + \\dim A/(\\overline{f}) = \\dim A/(f\\overline{f}) = 2\\deg f\\overline{f},\n\\]\nas required.\n\nTo see that $A$ is a principal ideal domain, we first observe that $A$-ideals of even codimension\nare principal. Indeed, if an ideal $I$ has codimension $2d$ for some natural number $d$,\nthen the $2d+1$ elements $1, X, Y, X^2, XY, \\dots, X^d, X^{d-1}Y$ are $R$-linearly dependent in $A/I$.\nThis implies that $I$ contains a non-zero element $f$ for which $f\\overline{f}$ has degree $\\leq 2d$. By the\nlemma the ideals $I$ and $(f)$ have the same codimension, so that $I = (f)$, as required.\n\nWe finish the proof by showing that all non-zero $A$-ideals have even codimension.\nIt suffices to show that all maximal ideals of $A$\nhave even codimension. This is clear if you know that $\\mathbb{C}$ is an algebraic closure of $\\mathbb{R}$, but\nthis argument can easily be avoided as follows.\n\nLet $\\mathfrak{m}$ be a maximal ideal of $A$ and let $\\varphi \\in \\mathbb{R}[X]$ denote a generator of the ideal $\\mathfrak{m} \\cap\n\\mathbb{R}[X]$. Then we have the following composition of injective $\\mathbb{R}$-algebra homomorphisms\n\\[\n\\mathbb{R} \\hookrightarrow \\mathbb{R}[X]/(\\varphi) \\hookrightarrow A/\\mathfrak{m}.\n\\]\nIf $\\varphi$ has even degree, we are done. If it has odd degree, then the Mean Value Theorem\nimplies that it has a zero $\\lambda \\in \\mathbb{R}$. Then $X - \\lambda$ divides zero in the subring $\\mathbb{R}[X]/(\\varphi)$ of the\nfield $A/\\mathfrak{m}$. It follows that $\\varphi = c(X - \\lambda)$ for some $c \\in \\mathbb{R}^\\times$,\nso that the map $\\mathbb{R} \\hookrightarrow \\mathbb{R}[X]/(\\varphi)$ is\nan isomorphism. Since $Y$ is a zero of a quadratic polynomial over $\\mathbb{R}[X]$, the dimension of\n$A/\\mathfrak{m}$ is at most $2$. Since there are no $R$-algebra homomorphisms $A \\longrightarrow \\mathbb{R}$, the dimension\nmust be $2$, which is even.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( A = \\mathbb{R}[X, Y]/(X^2 + Y^2 + 1) \\). Then it is a principal ideal domain. -/\ntheorem isPrincipalIdealRing_quot_X_pow_two_plus_Y_pow_two_plus_one :\n    IsPrincipalIdealRing ((MvPolynomial (Fin 2) ℝ) ⧸\n    Ideal.span {(.X 0 ^ 2 + .X 1 ^ 2 + .C 1 : (MvPolynomial (Fin 2) ℝ))}) := by\n  sorry\n"
  },
  {
    "id": 11,
    "informal_statement": "\nLet \\( A = \\mathbb{R}[X, Y]/(X^2 + Y^2 + 1) \\). Then it is not a Euclidean domain.\n",
    "informal_proof": "\nElements of the $\\mathbb{R}$-algebra $A$ can be written in a unique way as $a + bY$ with $a, b \\in \\mathbb{R}[X]$. \nWhen $f = a + bY \\in A$, we put $\\overline{f} = a - bY$. The map $f \\to \\overline{f}$ is an $\\mathbb{R}[X]$-algebra \nautomorphism of $A$. The map $A \\longrightarrow \\mathbb{R}[X]$ given by $f \\mapsto f\\overline{f}$ is multiplicative. For \n$f = a + bY$, we have $f\\overline{f} = a^2 + (X^2 + 1)b^2$. If $f$ is a unit of the ring $A$, so are the elements $\\bar{f}$ and $f\\bar{f}$. They are also units of the ring $\\mathbb{R}[X]$, which show that $A^\\times\\cong \\mathbb{R}^\\times$.  \n\nThe $\\mathbb{R}$-algebra $\\mathbb{R}[X, Y]/(X^2 + Y^2 + 1)$ cannot be a Euclidean domain. Indeed, if \n$N: A \\setminus \\{0\\} \\longrightarrow \\mathbb{N}$ were a Euclidean norm, then let $a \\in A \\setminus A^\\times$ with $N(a)$ minimal. Then \nthe natural map \n\\[ \\mathbb{R} = A^\\times \\cup \\{0\\} \\longrightarrow A/(a) \\]\nis a surjective, and hence bijective, $\\mathbb{R}$-algebra homomorphism. However, since the conic \n$X^2 + Y^2 + 1 = 0$ does not have any real points, there does not exist any $\\mathbb{R}$-algebra morphism \n$A \\longrightarrow \\mathbb{R}$. Therefore $A$ is not Euclidean.\n",
    "formal_statement": "import Mathlib\n\n/--\nDefinition of a Euclidean norm taking value in \\(\\mathbb{N}\\).\n-/\nclass EuclideanNormNat (R : Type) [CommRing R] extends Nontrivial R where\n  quotient : R → R → R\n  quotient_zero : ∀ a, quotient a 0 = 0\n  remainder : R → R → R\n  quotient_mul_add_remainder_eq : ∀ a b, b * quotient a b + remainder a b = a\n  norm : R → ℕ\n  remainder_lt : ∀ (a) {b}, b ≠ 0 → norm (remainder a b) < norm b\n  mul_left_not_lt : ∀ (a) {b}, b ≠ 0 → ¬ norm (a * b) < norm a\n\n/--\nLet \\( A = \\mathbb{R}[X, Y]/(X^2 + Y^2 + 1) \\). Then it is not a Euclidean domain.\n-/\ntheorem not_isomorphic_euclideanDomain : IsEmpty <| EuclideanNormNat (((MvPolynomial ℝ (Fin 2)) ⧸ Ideal.span {(.X 0 ^ 2 + .X 1 ^ 2 + .C 1: MvPolynomial ℝ (Fin 2))})) := by\n  sorry\n"
  },
  {
    "id": 12,
    "informal_statement": "\nProve that the ring $\\mathbb{Z}[\\frac{1+\\sqrt{-19}}{2}]$ is a principal ideal domain.\n",
    "informal_proof": "\n\nBy Minkowski bound, every ideal class contains an integral ideal $I$ with $|I|\\leq \\frac{2\\sqrt{19}}{\\pi} < 3$. So only need to show $(2)$ is inert in $\\mathbb{Z}[\\frac{1+\\sqrt{-19}}{2}]$. It follows from the following equation\n$$ x(x-1) + \\frac{(-\\sqrt{-19})^2-1}{4} = x(x-1) +5\\equiv 0(\\mathrm{mod\\ 2})$$\nhas no solution in $\\mathbb{F}_2$.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nProve that the ring $\\mathbb{Z}[\\frac{1+\\sqrt{-19}}{2}]$ is a principal ideal domain.\n-/\ntheorem isPrincipalIdealRing_of_quadratic_integer_19 :\n    IsPrincipalIdealRing (Algebra.adjoin ℤ {(1 + (Real.sqrt 19) * Complex.I) / 2}) ∧ IsDomain (Algebra.adjoin ℤ {(1 + (Real.sqrt 19) * Complex.I) / 2}) := by\n  sorry\n"
  },
  {
    "id": 13,
    "informal_statement": "\nLet $(R,+,\\cdot)$ be a (not necessarily commutative) ring. If we know that $R$ is not a field and $x^2=x$ for any $x\\in R,$ where $x$ is not invertible. Prove that $x^2=x$ for any $x.$\n",
    "informal_proof": "\nWe prove by contradiction. Assume that $x^2\\neq x$ for some $x$. Then, $x$ is invertible. Hence, $x\\neq e$, where $e$ denotes the multiplicative identity. For any $a$ which is not invertible, by Exercise \\url{https://math.stackexchange.com/questions/2411251/difficult-ring-theory-problem}, we have $a+x$ and $a-x$ are not invertible. Hence, $(a+x)^2=a+x$ and $(a-x)^2=a-x$. By adding together, we get $2a^2-x^2=2a$. It follows that $x^2=0$. This contradict with that $x$ is invertible. Therefore,  $x^2=x$ for any $x.$\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $(R,+,\\cdot)$ be a (not necessarily commutative) ring.\nIf we know that $R$ is not a field and $x^2=x$ for any $x\\in R,$\nwhere $x$ is not invertible. Prove that $x^2=x$ for any $x.$\n-/\ntheorem sq_eq_self_of_not_unit {R : Type} [Ring R] (h : ¬ IsField R)\n    (h2 : ∀ x : R, ¬ IsUnit x → x^2 = x) (x : R) : x^2 = x := by\n  sorry\n"
  },
  {
    "id": 14,
    "informal_statement": "\nShow that if $R$\n is a unique factorization domain such that the quotient field of $R$\n is isomorphic to $\\mathbb{R}$\n, then R is isomorphic to $\\mathbb{R}$.\n",
    "informal_proof": "\nUFDs are integrally closed, so the Claim $\\Rightarrow R$ has no primes $p > 0$ (wlog by $p = p\\sqrt{2}$), so $R$ is a field (else $R$ has a non-unit, which has a prime factor $p$, by $R$ a UFD).\n\n\\textbf{Claim.} \n\n    Suppose that a domain $R$ is integrally closed in its ordered fraction field $K$. If further $K$ is closed under square roots of positive elements, then so too is $R$.\n\n\\textbf{Proof.}\n\n    $0 < r \\in R \\subset K \\Rightarrow \\sqrt{r} \\in K$, so $\\sqrt{r} \\in R$ by $R$ integrally closed.\n",
    "formal_statement": "import Mathlib\n\n/--\nShow that if $R$ is a unique factorization domain such that the quotient field of $R$ is isomorphic\nto $\\mathbb{R}$, then R is isomorphic to $\\mathbb{R}$.\n-/\ntheorem isomorphic_real_of_fractionRing_isomorphic_real_of_UFD (R : Type) [CommRing R] [IsDomain R]\n    [UniqueFactorizationMonoid R] (h : Nonempty ((FractionRing R) ≃+* ℝ)) :\n    Nonempty (R ≃+* ℝ) := by\n  sorry\n"
  },
  {
    "id": 15,
    "informal_statement": "\nLet $p,q,r$ be three distinct prime numbers, $t$ a positive integer. Let $G$ be a finite group, $H$ a normal subgroup of $G$ such that the cardinality of $G/H$ is $r^{t}$. Suppose that there exists a composition series\n    \\[\n\\{e\\} = H_0 \\triangleleft H_1 \\triangleleft \\cdots \\triangleleft H_n = H,\n\\]\nof $H$ that satisfies $n=2$, $H_1/H_0 = \\mathbb{Z}/p\\mathbb{Z}$, $H_2/H_1 = \\mathbb{Z}/q\\mathbb{Z}$. Further suppose that there exists a composition series\n\\[\n\\{e\\} = G_0 \\triangleleft G_1 \\triangleleft \\cdots \\triangleleft G_n = G,\n\\]\nand positive integers $i<j\\leq n$ such that $G_{i}/G_{i-1} = \\mathbb{Z}/q\\mathbb{Z}$, $G_{j}/G_{j-1} = \\mathbb{Z}/p\\mathbb{Z}$. Show that there exists a composition series\n    \\[\n\\{e\\} = H_0 \\triangleleft H_1 \\triangleleft \\cdots \\triangleleft H_n = H,\n\\]\nof $H$ that satisfies $n=2$, $H_1/H_0 = \\mathbb{Z}/q\\mathbb{Z}$, $H_2/H_1 = \\mathbb{Z}/p\\mathbb{Z}$.\n",
    "informal_proof": "\nConsider the series for $H$ defined by $K_k = H \\cap G_k$ for $k=0, \\dots, m$. This forms a normal series $\\{e\\} = K_0 \\triangleleft K_1 \\triangleleft \\cdots \\triangleleft K_m = H$. By the Second Isomorphism Theorem, the factors of this series satisfy\n\\[\nK_k / K_{k-1} = (H \\cap G_k) / (H \\cap G_{k-1}) \\cong (H \\cap G_k)G_{k-1} / G_{k-1}.\n\\]\nAs $G_{k-1}$ is a maximal normal subgroup of $G_k$, the subgroup $(H \\cap G_k)G_{k-1}$ is either $G_{k-1}$ or $G_k$. Consequently, the quotient $K_k/K_{k-1}$ is either trivial or isomorphic to $G_k/G_{k-1}$.\n\nRemoving the trivial factors from $\\{K_k/K_{k-1}\\}$ yields a composition series for $H$. By the Jordan-Hölder theorem, the factors of this new series must be a permutation of $\\{\\mathbb{Z}/p\\mathbb{Z}, \\mathbb{Z}/q\\mathbb{Z}\\}$, as $|H|=pq$. Since $p, q, r$ are distinct primes, these factors must be isomorphic to $G_i/G_{i-1}$ and $G_j/G_{j-1}$, respectively.\n\nThe construction preserves the index ordering of the non-trivial factors. Since $i < j$, the factor isomorphic to $\\mathbb{Z}/q\\mathbb{Z}$ must appear before the factor isomorphic to $\\mathbb{Z}/p\\mathbb{Z}$ in the resulting composition series for $H$.\n\nTherefore, there exists a composition series $\\{e\\} = H_0 \\triangleleft H_1 \\triangleleft H_2 = H$ with $H_1/H_0 \\cong \\mathbb{Z}/q\\mathbb{Z}$ and $H_2/H_1 \\cong \\mathbb{Z}/p\\mathbb{Z}$.\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nA subgroup `H₁` is a maximal normal subgroup of `H₂` if it is contained in `H₂`,\nand `H₁` is maximal normal in `H₂`.\n-/\nstructure Subgroup.IsMaximalNormal {G : Type} [Group G] (H₁ H₂ : Subgroup G) : Prop where\n  le : H₁ ≤ H₂\n  subgroupOf_normal : (H₁.subgroupOf H₂).Normal\n  is_maximal : ∀ H : Subgroup G, H₁ ≤ H → H ≤ H₂ → (H.subgroupOf H₂).Normal → (H = H₁ ∨ H = H₂)\n\n/--\nA normal subgroup composition series of a group `G` is a *maximal* finite chain of normal subgroups\n\\[\n\\{e\\} = G_0 \\triangleleft G_1 \\triangleleft \\cdots \\triangleleft G_n = G\n\\]\nsuch that each quotient `G_{i+1}/G_i` is a simple group.\n-/\nstructure NormalSubgroupCompositionSeries (G : Type) [Group G] : Type where\n  toRelSeries : RelSeries (Subgroup.IsMaximalNormal (G := G))\n  maximal : ∀ s : RelSeries (Subgroup.IsMaximalNormal (G := G)), s.length ≤ toRelSeries.length\n\n/--\nThe \\(i\\)-th factor of a normal subgroup composition series, which is the quotient of the \\(i + 1\\)-th\nsubgroup by the previous one.\n-/\ndef StepwiseQuotient {G : Type} [Group G] (s : NormalSubgroupCompositionSeries G) (i : Fin s.toRelSeries.length) :\n    Type :=\n  s.toRelSeries i.succ ⧸ (s.toRelSeries i.castSucc).subgroupOf _\n\n/--\nThe \\(i\\)-th factor of a normal subgroup composition series is a group.\n-/\ninstance {G : Type} [Group G] (s : NormalSubgroupCompositionSeries G) (i : Fin s.toRelSeries.length) :\n    Group (StepwiseQuotient s i) := QuotientGroup.Quotient.group _ (nN := (s.toRelSeries.step i).subgroupOf_normal)\n\n/--\nLet $p,q,r$ be three distinct prime numbers, $t$ a positive integer. Let $G$ be a finite group,\n$H$ a normal subgroup of $G$ such that the cardinality of $G/H$ is $r^{t}$.\nSuppose that there exists a composition series\n\\[\n\\{e\\} = H_0 \\triangleleft H_1 \\triangleleft \\cdots \\triangleleft H_n = H,\n\\]\nof $H$ that satisfies $n=2$, $H_1/H_0 = \\mathbb{Z}/p\\mathbb{Z}$,\n$H_2/H_1 = \\mathbb{Z}/q\\mathbb{Z}$. Further suppose that there exists a composition series\n\\[\n\\{e\\} = G_0 \\triangleleft G_1 \\triangleleft \\cdots \\triangleleft G_n = G,\n\\]\nand positive integers $i < j\\leq n$ such that $G_{i}/G_{i-1} = \\mathbb{Z}/q\\mathbb{Z}$,\n$G_{j}/G_{j-1} = \\mathbb{Z}/p\\mathbb{Z}$. Show that there exists a composition series\n\\[\n\\{e\\} = H_0 \\triangleleft H_1 \\triangleleft \\cdots \\triangleleft H_n = H,\n\\]\nof $H$ that satisfies $n=2$, $H_1/H_0 = \\mathbb{Z}/q\\mathbb{Z}$,\n$H_2/H_1 = \\mathbb{Z}/p\\mathbb{Z}$.\n-/\ntheorem exists_swap_stepwiseQuotient {p q r t : ℕ} (hp : p.Prime) (hq : q.Prime) (hr : r.Prime)\n    (ht : 0 < t) (G : Type) [Group G] [Fintype G] (H : Subgroup G) [H.Normal]\n    (hH : Nat.card (G ⧸ H) = r ^ t) (Hs : NormalSubgroupCompositionSeries H)\n    (hHs: Hs.toRelSeries.length = 2) (hHs0 : StepwiseQuotient Hs ⟨0, by omega⟩ ≃* ZMod p)\n    (hHs1 : StepwiseQuotient Hs ⟨1, by omega⟩ ≃* ZMod q)\n    (Gs : NormalSubgroupCompositionSeries G) (i j : Fin Gs.toRelSeries.length) (hij : i < j)\n    (hGi : StepwiseQuotient Gs i ≃* ZMod q) (hGj : StepwiseQuotient Gs j ≃* ZMod p) :\n    ∃ (Hs' : NormalSubgroupCompositionSeries H) (hlen : Hs'.toRelSeries.length = 2),\n    Nonempty (StepwiseQuotient Hs' ⟨0, by omega⟩  ≃* ZMod q) ∧\n    Nonempty (StepwiseQuotient Hs' ⟨1, by omega⟩  ≃* ZMod p) := by\n  sorry\n"
  },
  {
    "id": 16,
    "informal_statement": "\nLet $p$ be a prime and let $F$ be a field. Let $K$ be a finite Galois extension of $F$ whose Galois group is a $p$-group (i.e., the degree $[K : F]$ is a power of $p$). Such an extension is called a \\emph{$p$-extension} (note that $p$-extensions are Galois by definition). Let $L$ be a $p$-extension of $K$. Prove that the Galois closure of $L$ over $F$ is a $p$-extension of $F$.\n",
    "informal_proof": "\nLet $M$ be the Galois closure of $L/F$. Denote $\\mathrm{Gal}(M/F)=\\{\\sigma_1,\\dots,\\sigma_N\\}$ where $\\sigma_1=\\text{id}$, and $L_i=\\sigma_iL$. Write $\\tau_i=\\sigma_i|_K\\in\\mathrm{Gal}(K/F)$ as $K/F$ Galois. Then $K\\xrightarrow{\\tau_i^{-1}}K\\subset L\\xrightarrow{\\sigma_i}L_i\\subset M$ coincides with $K\\subset M$, and $L_i/K$ is abstractly isomorphic to $L/K$. \nSince $M=L_1\\cdots L_N$ is the compositum, $[M:K]$ devides $[L_1:K]\\cdots[L_N:K]$ as $L_i/K$ Galois. Now $M/K$ is a $p$-extension as each $L_i/K$ is. \n",
    "formal_statement": "import Mathlib\n\n/--\nA Galois extension such that the degree of the extension is a power of a prime \\( p \\) is\ncalled a p-extension.\n-/\nclass IsPExtension (F E : Type) [Field F] [Field E] [Algebra F E]\n    (p : ℕ) : Prop extends IsGalois F E where\n    rank_eq_pow : ∃ (n : ℕ), Module.rank F E = p ^ n\n\n/--\nLet $p$ be a prime and let $F$ be a field.\nLet $K$ be a finite Galois extension of $F$ whose Galois group is a $p$-group (i.e., the degree\n$[K : F]$ is a power of $p$). Such an extension is called a \\emph{$p$-extension} (note that\n$p$-extensions are Galois by definition). Let $L$ be a $p$-extension of $K$. Prove that the\nGalois closure of $L$ over $F$ is a $p$-extension of $F$.\n-/\ntheorem normalClosure_isPExtension_of_isPExtension (F E : Type) [Field F] [Field E]\n    [Algebra F E] (L : IntermediateField F E) (K : IntermediateField F L) (p : ℕ) (hp : p.Prime)\n    [IsPExtension F K p] [IsGalois K L] [IsPExtension K L p]\n    (h_normalClosure : IsNormalClosure F L E) : IsPExtension F E p := by\n  sorry\n"
  },
  {
    "id": 17,
    "informal_statement": "\nLet $K$ be a subfield of $\\mathbb{C}$ maximal with respect to the property that $\\sqrt 2 \\notin K$. Deduce that $[\\mathbb{C} : K]$ is countable (and not finite).\n",
    "informal_proof": "\nThis case $\\mathbb{C}/K$ is algebraic, else it includes a purely transcendental subextension $K(T)/K$ without $\\sqrt 2$ contained. Moreover, $\\mathrm{Gal}(\\mathbb{C}/K)$ is a 2-group, else its 2-Sylow subgroup corresponds to some subextension of odd degree, without $\\sqrt 2$ contained. Note that $\\mathbb{C}/K$ has a unique degree 2 subextension $K(\\sqrt2)$, corresponding to a unique maximal closed subgroup $H$. Hence $G_K=\\overline{\\langle\\sigma\\rangle}$ for generator $\\sigma\\in G_K-H$, thus $\\mathbb{C}/K$ only has cyclic finite subextensions. Now $\\mathbb{C}/K$ is the limit of a 2-radical tower $K=K_0\\subset K_1\\subset\\dots$.\nConsequently $\\mathbb{C}/K$ is of countable degree with a linear basis consisting of finite products of those successively adjoined roots.\n\nReferring to Exercise 166, $\\mathbb{C}/K$ can't be finite, else $\\mathbb{C}=K(\\text{i})=K(\\sqrt2)$ by condition. However $2=\\mathrm{Nm}_{\\mathbb{C}/K}(1+\\text{i})=(\\mathrm{Nm}_{\\mathbb{C}/K}(\\sqrt{1+\\text{i}}))^2\\in K^{\\times2}$, contradicts.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $K$ be a subfield of $\\mathbb{C}$ maximal with respect to the property that $\\sqrt 2 \\notin K$.\nDeduce that $[\\mathbb{C} : K]$ is countable (and not finite).\n-/\ntheorem countable_index_of_maximal_subfield_sqrt_2_nmem\n    (K : Subfield ℂ) (h_nmem : (Real.sqrt 2 : ℂ) ∉ K)\n    (h : ∀ (L : Subfield ℂ), K ≤ L → (Real.sqrt 2 : ℂ) ∉ L → K = L) :\n    Module.rank K ℂ = Cardinal.aleph0 := by\n  sorry\n"
  },
  {
    "id": 18,
    "informal_statement": "\nLet \\( E \\) be a subfield of \\( \\mathbb{R} \\) and let \\( K/E \\) be a finite Galois extension of odd degree \\( > 1 \\). Prove that \\( K \\) cannot be \\( E \\)-embedded into a radical tower that is a subfield of \\( \\mathbb{R} \\).\n",
    "informal_proof": "\nElse assume $F/K$ is minimal such that $F/E$ is some radical tower embedded into $\\mathbb{R}$. As $\\mathrm{Gal}(K/E)$ contains a subgroup of some odd prime order $p$, there is some $K/E'/E$ such that $[K:E']=p$. Consider $FE'/K/E'$ then we may assume $E=E'$.\n\nWrite $F/E$ as a successive extension of adjoining prime roots\n$E = E_0\\subset E_1\\subset\\cdots \\subset E_N = F$\nwhere $E_{i+1}=E_i(a_i)$ with $a_i^{p_i}\\in E_i^\\times$ with $p_i$ prime. Since $K/E$ is prime, $K\\cap E_{N−1}=E$ as $F$ is minimal. Then $KE_{N-1}/E_{N-1}$ is finite Galois of degree $p$. Consider $F/KE_{N-1}/E_{N-1}$ then we may assume $E=E_{N-1}$ and write $F=E(a)$ with $a^{p'}=b\\in E^\\times$.\n\nIf $T^{p'}-b\\in E[T]$ irreducible then $F\\simeq E[T]/(T^{p'}-b)$ of prime degree $p'$. Then $F=K$ Galois over $E$, and for any conjunction $a'$ of $a$, $1\\neq a'/a\\in F$ is some $p$-th root of unity. If $T^{p'}-b$ reducible over $E$, write $[F:E]=d<p'$. Consider the norm we get $\\mathrm{Nm}_{F/E} a^{p'}=b^d$. As $\\gcd(d,p')=1$ write $ud+vp'=1$, we get $b=a'^{p'}$ with $a'=(\\mathrm{Nm} a)^ub^v\\in E$. Hence $a'/a\\in F-E$ is some $p'$-th root of unity. As it is not equal to $-1$ we get $p'>2$.\n\nHowever, an odd prime cyclotomic extension of $\\mathbb{Q}$ cannot be embedded to $\\mathbb{R}$. \n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( E \\) be a commutative ring, \\( F \\) be an \\( E \\)-algebra, then we say \\( F \\) is\na radical extension over \\( E \\), if \\( F \\) is generated by a single element \\( x \\in F \\) over \\( E \\)\nsuch that \\( x ^ n - e = 0 \\) for some \\( e \\in E \\).\n-/\ndef IsRadicalExtension (E F : Type) [CommRing E] [CommRing F] [Algebra E F] : Prop :=\n    ∃ (x : F), Algebra.adjoin E {x} = ⊤ ∧ (∃ (n : ℕ) (e : E), n ≥ 1 ∧ x ^ n - (algebraMap E F) e = 0)\n\n/--\nAn algebra is said to be a radical tower over the base ring if it can be written as\ncomposition of radical extensions.\n-/\ninductive IsRadicalTower : ∀ (E : Type) (F : Type) [CommRing E] [CommRing F] [Algebra E F], Prop\n  | of_isRadicalExtension (E : Type) (F : Type)\n      [CommRing E] [CommRing F] [Algebra E F] : IsRadicalExtension E F → IsRadicalTower E F\n  | of_composition (E : Type) (F : Type) [CommRing E] [CommRing F] [Algebra E F] (F' : Subalgebra E F) :\n      IsRadicalExtension F' F → IsRadicalTower E F' → IsRadicalTower E F\n\n/--\nLet \\( E \\) be a subfield of \\( \\mathbb{R} \\) and let \\( K/E \\) be a finite Galois extension of odd degree \\( > 1 \\).\nProve that \\( K \\) cannot be \\( E \\)-embedded into a radical tower that is a subfield of \\( \\mathbb{R} \\).\n-/\ntheorem isEmpty_embedding_intermediateField_of_odd_degree_galois (E : Subfield ℝ) (K : Type)\n    [Field K] [Algebra E K] [IsGalois E K] (n : ℕ) (h_odd : Odd n) (hn : n > 1) (h_deg_eq : Module.rank E K = n)\n    (K' : IntermediateField E ℝ) (h_radical : IsRadicalTower E K') :\n    IsEmpty (K →ₐ[E] K') := by\n  sorry\n"
  },
  {
    "id": 19,
    "informal_statement": "\nLet $\\alpha = \\sqrt{(2+\\sqrt 2)(3+\\sqrt 3)}$ and consider the extension $E =\\mathbb{Q}(\\alpha)$. Show that $\\mathrm{Gal}(E/\\mathbb{Q}) \\cong Q_8$, the quaternion group of order $8$.\n",
    "informal_proof": "\nLet $\\sigma$ be the automorphism of $\\mathbb{Q}(\\sqrt{2},\\sqrt{3})$ over $\\mathbb{Q}$ sending $\\sqrt{2}$ to $-\\sqrt{2}$ and fixing $\\sqrt{3}$. We extend $\\sigma$ to an automorphism of $E = \\mathbb{Q}(\\alpha)$. To see how $\\sigma$ acts on $\\alpha$, we compute the ratio $\\sigma(\\alpha^2)/\\alpha^2$:\n\\[\n\\frac{\\sigma(\\alpha^2)}{\\alpha^2} = \\frac{(2-\\sqrt{2})(3+\\sqrt{3})}{(2+\\sqrt{2})(3+\\sqrt{3})} = \\frac{2-\\sqrt{2}}{2+\\sqrt{2}} = \\frac{(2-\\sqrt{2})^2}{4-2} = \\frac{4-4\\sqrt{2}+2}{2} = 3-2\\sqrt{2} = (1-\\sqrt{2})^2\n\\]\nSo, we have $\\sigma(\\alpha^2) = \\alpha^2(1-\\sqrt{2})^2$. Taking the square root gives $\\sigma(\\alpha) = \\pm\\alpha(1-\\sqrt{2})$.\n\nIf $\\alpha$ were an element of $\\mathbb{Q}(\\sqrt{2},\\sqrt{3})$, then $\\sigma(\\alpha)$ would also be in that field. Applying $\\sigma$ again:\n\\[\n\\sigma^2(\\alpha) = \\sigma(\\pm\\alpha(1-\\sqrt{2})) = \\sigma(\\pm\\alpha) \\sigma(1-\\sqrt{2}) = (\\pm\\sigma(\\alpha)) (1+\\sqrt{2}) = (\\pm(\\pm\\alpha(1-\\sqrt{2}))) (1+\\sqrt{2}) = \\alpha(1-\\sqrt{2})(1+\\sqrt{2}) = -\\alpha\n\\]\nSo $\\sigma^2(\\alpha) = -\\alpha$. However, the restriction of $\\sigma$ to $\\mathbb{Q}(\\sqrt{2},\\sqrt{3})$ has order 2, meaning $\\sigma^2$ acts as the identity on this field. Since $\\sigma^2(\\alpha) = -\\alpha \\neq \\alpha$, this is a contradiction. Therefore, $\\alpha$ cannot be in $\\mathbb{Q}(\\sqrt{2},\\sqrt{3})$, and it must have degree 2 over this field.\n\nFrom $\\sigma^2(\\alpha) = -\\alpha$, we can see that $\\sigma^4(\\alpha) = \\sigma^2(-\\alpha) = -\\sigma^2(\\alpha) = -(-\\alpha) = \\alpha$. Since $\\sigma^4$ is the identity on both the base field and on $\\alpha$, its order is 4. Thus, $\\sigma$ generates a subgroup of order 4 in the Galois group.\n\nNow, let $\\tau$ be the automorphism of $\\mathbb{Q}(\\sqrt{2},\\sqrt{3})$ over $\\mathbb{Q}$ sending $\\sqrt{3}$ to $-\\sqrt{3}$ and fixing $\\sqrt{2}$. A similar computation shows that $\\tau$ also has order 4.\n\\[\n\\frac{\\tau(\\alpha^2)}{\\alpha^2} = \\frac{(2+\\sqrt{2})(3-\\sqrt{3})}{(2+\\sqrt{2})(3+\\sqrt{3})} = \\frac{3-\\sqrt{3}}{3+\\sqrt{3}} = \\frac{(3-\\sqrt{3})^2}{9-3} = \\frac{9-6\\sqrt{3}+3}{6} = 2-\\sqrt{3} = \\left(\\frac{\\sqrt{3}-1}{\\sqrt{2}}\\right)^2\n\\]\nThis implies $\\tau(\\alpha) = \\pm\\alpha\\frac{\\sqrt{3}-1}{\\sqrt{2}}$, and as before, we can show $\\tau^2(\\alpha) = -\\alpha$ and $\\tau^4(\\alpha) = \\alpha$.\n\nFinally, we check if these elements commute. Let's choose the positive signs for the actions on $\\alpha$ for simplicity: $\\sigma(\\alpha) = \\alpha(1-\\sqrt{2})$ and $\\tau(\\alpha) = \\alpha\\frac{\\sqrt{3}-1}{\\sqrt{2}}$.\n\\begin{align*}\n\\sigma\\tau(\\alpha) &= \\sigma\\left(\\alpha\\frac{\\sqrt{3}-1}{\\sqrt{2}}\\right) = \\sigma(\\alpha)\\sigma\\left(\\frac{\\sqrt{3}-1}{\\sqrt{2}}\\right) = \\alpha(1-\\sqrt{2})\\left(\\frac{\\sqrt{3}-1}{-\\sqrt{2}}\\right) \\\\\n\\tau\\sigma(\\alpha) &= \\tau(\\alpha(1-\\sqrt{2})) = \\tau(\\alpha)\\tau(1-\\sqrt{2}) = \\alpha\\left(\\frac{\\sqrt{3}-1}{\\sqrt{2}}\\right)(1-\\sqrt{2})\n\\end{align*}\nComparing the two, we see that $\\sigma\\tau(\\alpha) = -\\tau\\sigma(\\alpha)$. This means the automorphisms anti-commute. The Galois group has order 8 and we have found two elements, $\\sigma$ and $\\tau$, of order 4 that anti-commute. The only non-abelian groups of order 8 are the dihedral group $D_8$ and the quaternion group $Q_8$. In $D_8$, the elements of order 4 commute with each other. Therefore, the Galois group must be isomorphic to the quaternion group, $Q_8$.\n\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $E$ denote the algebra $\\mathbb{Q}(\\sqrt{(2+\\sqrt 2)(3+\\sqrt 3)})\n-/\nabbrev E : Type := (Algebra.adjoin ℚ {Real.sqrt ((2 + Real.sqrt 2) * (3 + Real.sqrt 3))})\n\n/--\nLet $\\alpha = \\sqrt{(2+\\sqrt 2)(3+\\sqrt 3)}$ and consider the extension $E =\\mathbb{Q}(\\alpha)$.\nShow that $\\mathrm{Gal}(E/\\mathbb{Q}) \\cong Q_8$, the quaternion group of order $8$.\n-/\ntheorem galoisGroup_iso_quaternion_group : Nonempty ((E ≃ₐ[ℚ] E) ≃* (QuaternionGroup 2)) := by\n  sorry\n"
  },
  {
    "id": 20,
    "informal_statement": "\nLet $p$ be a prime number. Let $L/K$ be a finite extension of fields of characteristic $p$, and let $\\sigma:x\\mapsto x^p$ denote the $p$-Frobenius endomorphism on $L$, which of course stabilizes $K$. Prove that if $[L:K\\sigma(L)] \\leq p$, then $L/K$ can be generated by one element.\n",
    "informal_proof": "\n(a) Consider the following tower of extensions\n$$\n\\begin{tikzcd}[row sep= small, column sep= small]\n&& K \\sigma^n(L) \\ar[dl, -] \\ar[ddr, dashed,-]\n\\\\\n& K\\sigma^{n+1}(L) \\ar[drr, -] \\ar[ddr, dashed,-]\\ar[dl,-]\n\\\\\nK\\sigma^{n+2}(L)  \\ar[drr,-]& & &\\sigma(K) \\sigma^{n+1}(L)\\ar[dl,-]\n\\\\\n&& \\sigma(K)\\sigma^{n+2}(L)\n\\end{tikzcd}\n$$\nThe extension $\\sigma(K) \\sigma ^{n+1}(L) / \\sigma(K) \\sigma^{n+2}(L)$ is isomorphic to the extension $K \\sigma^n(L) / K\\sigma^{n+1}(L)$ (under the isomorphism via $\\sigma$), and the extension $K\\sigma^{n+1}(L) / K\\sigma^{n+2}(L)$ is the composition of the extension $\\sigma(K) \\sigma ^{n+1}(L) / \\sigma(K) \\sigma^{n+2}(L)$ with $K$. So we have\n$$\n[K\\sigma^n(L): K\\sigma^{n+1}(L)] = [\\sigma(K) \\sigma^{n+1}(L): \\sigma(K)\\sigma^{n+2}(L)] \\geq [K\\sigma^{n+1}(L) : K\\sigma^{n+2}(L)].\n$$\n\n(b) \nFirst of all, the $p$-th power of every element of $K\\sigma^n(L)$ belongs to $K\\sigma^{n+1}(L)$; the extension $K\\sigma^n(L)/K\\sigma^{n+1}(L)$ is a power of $p$ (or $1$).\n\nBy (a), we know that\n$$\np \\geq [L:K\\sigma(L)] \\geq [K\\sigma(L): K\\sigma^2(L)] \\geq \\cdots\n$$ \nSo there must be a positive integer $n$ such that\n$$\n[L:K\\sigma(L)] = \\cdots = [K \\sigma^{n-1}(L): K\\sigma^{n}(L)] = p, \\quad K \\sigma^{n}(L) = K\\sigma^{n+1}(L) = K\\sigma^{n+2}(L) = \\cdots\n$$\nLet $\\alpha$ be an element of $L$ that generates $L$ over $K\\sigma(L)$. Then $\\alpha^p \\in K\\sigma(L)$. By the exact proof of (a), we see that $\\alpha^p$ generates $\\sigma(K)\\sigma(L)$ over $\\sigma(K)\\sigma^2(L)$ and hence generates $K\\sigma(L)$ over $K\\sigma^2(L)$. Continue this way, we have $\\alpha^{p^{n-1}}$ generates $K\\sigma^{n-1}(L)$ over $K\\sigma^n(L)$. Thus, $\\alpha$ generates $L$ over $K\\sigma^n(L)$.\n\nOn the other hand, put $F =\\sigma^n(L)$.  We show that $KF = K\\sigma(F)$ implies that $KF$ is separable over $K$.\nIndeed, we first prove that for any intermediate field $E$ of $KF/K$, $E = \\sigma(E)K$. Clearly, $E \\supseteq K\\sigma(E)$.\nThen we have the following diagram\n$$\n\\begin{tikzcd}[row sep = small, column sep = small]\nKF \\ar[r, equal] \\ar[d,-] & K \\sigma(F) \\ar[dr,-] \\ar[dd,-]\n\\\\\nE \\ar[dd,-] \\ar[dr,-] && \\sigma(KF) \\ar[dd,-]\n\\\\\n& K\\sigma(E) \\ar[dl,-] \\ar[dr, -]\n\\\\\nK && \\sigma(E)\n\\end{tikzcd}\n$$\nFrom this, we have\n$$\n[K\\sigma(F):K\\sigma(E)]  = [KF:E][E:K\\sigma(E)] \\geq [KF:E] = [\\sigma(KF):\\sigma(E)] \\geq [K\\sigma(F): K\\sigma(E)].\n$$\nHere the last equality follows from the isomorphism $\\sigma$, and the last inequality follows from composing the extension $\\sigma(KF)/\\sigma(E)$ with $K$. From this series of inequalities, we see that all equality holds; in particular $E = K\\sigma(E)$.\n\nNow suppose that $KF$ is not separable over $K$. If $\\alpha \\in KF$ is inseparable over $K$, with minimal polynomial $g(t^p)$ for a polynomial $g(x) \\in F[x]$ of degree $m$. Then $[K(\\alpha):K] = pm$ and $[K(\\alpha^p):K] = m$. Yet $\\alpha^p \\in K\\sigma(K(\\alpha))$ which is equal to $KK(\\alpha) = K(\\alpha)$ by the discussion of intermediate field. This is a contradiction.\n\nNow, we conclude by noting that $K\\sigma^n(L) / K$ is separable and hence generated by one element $\\beta$. Thus $\\alpha$ and $\\beta$ generate $L$ over $K$ with $\\beta$ separable over $K$. By a theorem in class, $L/K$ is generated by one element.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $p$ be a prime number. Let $L/K$ be a finite extension of fields of characteristic $p$,\nand let $\\sigma:x\\mapsto x^p$ denote the $p$-Frobenius endomorphism on $L$, which of course stabilizes $K$.\nProve that if $[L:K\\sigma(L)] \\leq p$, then $L/K$ can be generated by one element.\n-/\ntheorem generated_single_elem_of_degree_le_p (p : ℕ) [Fact (Nat.Prime p)]\n    (K L : Type) [Field K] [Field L] [CharP L p] [Algebra K L] [FiniteDimensional K L]\n    (h : Module.rank (IntermediateField.adjoin K ((frobenius L p).range : Set L)) L ≤ p) :\n    ∃ (x : L), IntermediateField.adjoin K {x} = ⊤ := by\n  sorry\n"
  },
  {
    "id": 21,
    "informal_statement": "\nLet $F$ be a field and let $f(x) \\in F[x]$ be an irreducible polynomial. Suppose that $K$ is a splitting field for $f(x)$ over $F$ and assume that there exists an element $\\alpha \\in K$ such that both $\\alpha$ and $\\alpha+1$ are roots of $f(x)$. Prove that there exists an intermediate field $E$ between $K$ and $F$ such that $[K:E]$ is equal to the characteristic of $F$. (In particular, the characteristic of $F$ is not zero)\n",
    "informal_proof": "\n  设 $F$ 的特征为~$\\mathrm{char}(F)$。因 $f(x)\\in F[x]$ 在其分裂域\n  $K$ 中分裂，且 $f(x)$ 在 $F$ 上不可约，所以\n  $$\n    F(\\alpha)\\;\\cong\\;F[x]/\\bigl(f(x)\\bigr),\n  $$\n  同理 $F(\\alpha+1)$ 也同构于 $F[x]/(f(x))$。因此存在唯一的\n  $F$-同构\n  $$\n    \\sigma_0 : F(\\alpha)\\;\\longrightarrow\\;F(\\alpha+1)\n  $$\n  使得 $\\sigma_0(\\alpha)=\\alpha+1$。由于 $K/F$ 是可分扩张，$\\sigma_0$\n  可延拓为整个 $K$ 上的 $F$-自同构\n  $$\n    \\sigma:K\\;\\xrightarrow{\\;\\sim\\;}\\;K,\n    \\mathbb{Q}uad\n    \\sigma|_{F(\\alpha)}=\\sigma_0.\n  $$\n  由此对任意整数 $n$，有\n  $$\n    \\sigma^n(\\alpha)\n    = \\alpha + n.\n  $$\n  若 $\\mathrm{char}(F)=0$，则 $\\{\\sigma^n\\mid n\\in\\mathbb Z\\}$ 会有无限\n  多个不同的自同构，然而 $K/F$ 是有限扩张，这不可能。因此\n  $\\mathrm{char}(F)=p>0$，且恰有\n  $$\n    \\sigma^p = \\mathrm{id},\\quad\n    \\text{且对 }1\\le n<p\\text{ 有 }\\sigma^n\\ne\\mathrm{id}.\n  $$\n  于是 $G=\\langle\\sigma\\rangle\\subset\\mathrm{Gal}(K/F)$ 是一个循环群，$|G|=p$。\n  由 Galois 对应，取\n  $$\n    E \\;=\\; K^G\n    = \\{\\,x\\in K:\\sigma(x)=x\\,\\},\n  $$\n  则\n  $$\n    [K:E] \\;=\\; |G| \\;=\\; p = \\mathrm{char}(F).\n  $$\n  特别地，$\\mathrm{char}(F)\\ne0$。证毕。\n",
    "formal_statement": "import Mathlib\n\nopen Polynomial\n\n/--\nLet $F$ be a field and let $f(x) \\in F[x]$ be an irreducible polynomial.\nSuppose that $K$ is a splitting field for $f(x)$ over $F$ and assume that there exists an element\n$\\alpha \\in K$ such that both $\\alpha$ and $\\alpha+1$ are roots of $f(x)$.\nProve that there exists an intermediate field $E$ between $K$ and $F$ such that $[K:E]$\nis equal to the characteristic of $F$. (In particular, the characteristic of $F$ is not zero)\n-/\ntheorem intermediateField_rank_eq_ringChar (F : Type) [Field F] (f : Polynomial F) (hf : Irreducible f)\n    (K : Type) [Field K] [Algebra F K] (hK : f.IsSplittingField F K) (α : K)\n    (hα : f.aeval α = 0) (hα1 : f.aeval (α + 1) = 0) :\n    ∃ (E : IntermediateField F K), Module.rank E K = ringChar F := by\n  sorry\n"
  },
  {
    "id": 22,
    "informal_statement": "\nLet $F$ be a field with $\\mathbb{Q} \\subseteq F \\subseteq \\mathbb{C}$, where $F/\\mathbb{Q}$ is a finite \\emph{abelian} Galois extension. Prove that $F$ contains only finitely many algebraic integers (i.e. elements in $F$ whose minimal polynomial over $\\mathbb{Q}$ have coefficients in $\\mathbb{Z}$) having absolute value $1$, and each of the algebraic integers is a root of unity.\n",
    "informal_proof": "\nAs $\\mathbb{Q}$ is a real field, the complex conjugation $\\bar\\cdot\\in\\mathrm{Gal}(F/\\mathbb{Q})$. Pick some $a\\in \\mathcal O_F$ with $|a|=1$. Since $F/\\mathbb{Q}$ abelian, for any $\\sigma\\in\\mathrm{Gal}(F/\\mathbb{Q})$, we have $|\\sigma a|^2=\\sigma a\\cdot\\overline{\\sigma a}=\\sigma a\\cdot\\sigma\\bar a=\\sigma|a|^2=1$. Then the polynomial $p_a=\\prod_{\\mathrm{Gal}(F/\\mathbb{Q})}(T-\\sigma a)\\in\\mathbb{Z}[T]$ has coeffecients bounded by $2^{[F:\\mathbb{Q}]}$. There are only finitely many such polynomials, thus only finitely many such $a$ as their roots. Moreover, consider $p_{a^N}$ for $N>0$ we get $a^N=\\sigma a^n$ for some $N>n>0$ and $\\sigma\\in\\mathrm{Gal}(F/\\mathbb{Q})$. Hence $a^{N^{[F:\\mathbb{Q}]}}=a^{n^{[F:\\mathbb{Q}]}}$, then $a$ is a root of unity.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $F$ be a field with $\\mathbb{Q} \\subseteq F \\subseteq \\mathbb{C}$, where $F/\\mathbb{Q}$\nis a finite \\emph{abelian} Galois extension. Prove that $F$ contains only finitely many algebraic integers\n(i.e. elements in $F$ whose minimal polynomial over $\\mathbb{Q}$ have coefficients in $\\mathbb{Z}$) having absolute value $1$,\nand each of the algebraic integers is a root of unity.\n-/\ntheorem finite_algebraic_integers_of_finite_module\n    (F : IntermediateField ℚ ℂ) (h_fin : Module.Finite ℚ F) [IsGalois ℚ F]\n    (h : IsMulCommutative (F ≃ₐ[ℚ] F)) : {x : F | IsIntegral ℤ x ∧ ‖(x : ℂ)‖ = 1}.Finite ∧\n    (∀ x : F, IsIntegral ℤ x → ‖(x : ℂ)‖ = 1 → ∃ n,  x ^ n = 1) := by\n  sorry\n"
  },
  {
    "id": 23,
    "informal_statement": "\nLet $f(X)\\in\\mathbb{Z}[X]$ be an irreducible polynomial, $n_p$ is the number of solutions of $f(X)$ in $\\mathbb{F}_p$, show that $$\\lim\\limits_{s\\rightarrow 1^{+}}\\frac{\\sum\\limits_{p\\textbf{ prime}}\\frac{n_p}{p^s}}{\\sum\\limits_{p\\textbf{ prime}}\\frac{1}{p^s}}=1$$.\n",
    "informal_proof": "\n\nChebotarev Density Theorem is valid for Dirichlet density.\n\nThis quantity always exists and is always equal to $1$. By Chebotarev's density theorem, the density of primes $p$ such that $f$ has $k$ roots $\\bmod p$ is equal to the proportion of elements in the Galois group of $f$ which fix $k$ roots when acting on the roots. Since the Galois group acts transitively on the roots, the average number of fixed points is $1$ by Burnside's lemma.\n\n",
    "formal_statement": "import Mathlib\n\nlocal instance (p : Nat.Primes) : NeZero p.1 := ⟨p.2.ne_zero⟩\nlocal instance (p : Nat.Primes) : IsDomain (ZMod p) := @ZMod.instIsDomain p ⟨p.2⟩\n\n/--\nLet $f(X)\\in\\mathbb{Z}[X]$ be an irreducible polynomial, $n_p$ is the number of solutions of $f(X)$ in $\\mathbb{F}_p$,\nshow that $$\\lim\\limits_{s\\rightarrow 1^{+}}\\frac{\\sum\\limits_{p\\textbf{ prime}}\\frac{n_p}{p^s}}{\\sum\\limits_{p\\textbf{ prime}}\\frac{1}{p^s}}=1$$.\n-/\ntheorem ratio_tendsto_one_of_irreducible (f : Polynomial ℤ) (h_irr : Irreducible f) :\n    Function.rightLim\n    (fun (s : ℝ) ↦\n    (tsum (fun p : Nat.Primes ↦ (f.rootSet (ZMod p)).ncard * ((p : ℝ) ^ (-s)))) /\n    (tsum (fun p : Nat.Primes ↦ (p : ℝ) ^ (-s)))) 1 = 1 := by\n  sorry\n"
  },
  {
    "id": 24,
    "informal_statement": "\nLet $p_1, \\dots, p_r$ be $r$ different prime numbers. Prove that the Galois group of $K =\\mathbb{Q}(\\sqrt{p_1}, \\dots, \\sqrt{p_r})$ over $\\mathbb{Q}$ is $(\\mathbb{Z}/2\\mathbb{Z})^r$, here $\\mathbb{Z}/2\\mathbb{Z}$ is the cyclic group of order 2.\n",
    "informal_proof": "\n\n\nKummer theory tells that let $m$ be a fixed integer, $K$ a field of characteristic not dividing $m$, \ncontaining the group $W_m$ of all $m$-th roots of unity; let $A$ be a subgroup \nof $K^*$ containing $K^{*m}$, and let $L = K(A^{1/m})$, the field obtained by \nadding to $K$ all the $m$-th roots of all elements of $A$. Then $L/K$ is Galois, \nwith abelian Galois group $G$ of exponent $m$, isomorphic to $\\operatorname{Hom}(A/K^{*m}, W_m)$.\n\nHere we take $K = \\mathbb{Q}$, $m = 2$, $A_n$ = the (multiplicative) subgroup \ngenerated by $p_1, \\dots, p_n$ and $\\mathbb{Q}^{*2}$. We want to show that \n$\\mathbb{Q}\\big((A_n)^{1/2}\\big)/\\mathbb{Q}$ has Galois group isomorphic to \n$\\underbrace{\\mathbb{Z}/2\\mathbb{Z} \\times \\cdots \\times \\mathbb{Z}/2\\mathbb{Z}}_{n \\text{ times}}$. \n\nBy Kummer theory, this amounts to showing that $A_n \\bmod \\mathbb{Q}^{*2}$ has \nthe same description.  All the previous multiplicative groups are of exponent $2$, hence can be viewed as vector spaces over the field $\\mathbb{Z}/2\\mathbb{Z}$. Let us show that $p_1 \\bmod \\mathbb{Q}^{*2}$, $\\ldots$, $p_n \\bmod \\mathbb{Q}^{*2}$ form a basis of $A_n \\bmod \\mathbb{Q}^{*2}$. Any relation of linear dependence between them, written multiplicatively, would be of the form:\n\\[\n\\text{A product of distinct } p_i\\text{'s is equal to an element of } \\mathbb{Q}^{*2}.\n\\]\nThis is impossible by the uniqueness of decomposition into primes in $\\mathbb{Z}$. Thus we have shown that $A_n \\bmod \\mathbb{Q}^{*2}$, as a vector space over $\\mathbb{Z}/2\\mathbb{Z}$ (written multiplicatively), has dimension $n$.\n",
    "formal_statement": "import Mathlib\n\n/--\nThe field $K = \\mathbb{Q}(\\sqrt{p_1}, \\dots, \\sqrt{p_r})$\nfor a finite list of integers $p_1, \\dots, p_r$.\n-/\nabbrev RatAdjoinSqrt {I : Type} (p : I → ℕ) : Type :=\n  Algebra.adjoin ℚ (Set.range (fun i ↦ Real.sqrt (p i)))\n\n/--\nLet $p_1, \\dots, p_r$ be $r$ different prime numbers.\nProve that the Galois group of $K =\\mathbb{Q}(\\sqrt{p_1}, \\dots, \\sqrt{p_r})$ over $\\mathbb{Q}$\nis $(\\mathbb{Z}/2\\mathbb{Z})^r$, here $\\mathbb{Z}/2\\mathbb{Z}$ is the cyclic group of order 2.\n-/\ntheorem galoisGroup_iso_of_distinct_primes {I : Type} [Finite I] (p : I → ℕ)\n    (hp : ∀ (i : I), (p i).Prime) (h_inj : p.Injective) :\n    Nonempty ((RatAdjoinSqrt p ≃ₐ[ℚ] RatAdjoinSqrt p) ≃* (Multiplicative (I → (ZMod 2)))) := by\n  sorry\n"
  },
  {
    "id": 25,
    "informal_statement": "\nProve that the automorphism group of $\\mathbb{F}_2(t)$ is isomorphic to $S_3$, and its fixed field is $\\mathbb{F}_2(u)$ with $$u = \\frac{(t^4-t)^3}{(t^2-t)^5} = \\frac{(t^2+t+1)^3}{(t^2-t)^2}$$.\n",
    "informal_proof": "\n\n\\textbf{Theorem}\n\nThe automorphism group of the field of rational functions $\\mathbb{F}_2(t)$ over $\\mathbb{F}_2$, denoted $\\text{Aut}(\\mathbb{F}_2(t)/\\mathbb{F}_2)$, is isomorphic to the symmetric group $S_3$. The fixed field of this automorphism group is $\\mathbb{F}_2(u)$, where\n\\[ u = \\frac{(t^2+t+1)^3}{(t^2+t)^2} \\]\n\n\\textbf{Proof.}\n\nThe automorphisms of the rational function field $\\mathbb{F}_2(t)$ that fix the base field $\\mathbb{F}_2$ are the fractional linear transformations of the form\n\\[ \\phi: t \\mapsto \\frac{at+b}{ct+d} \\]\nwhere $a, b, c, d \\in \\mathbb{F}_2$ and $ad-bc \\neq 0$. This group of automorphisms is isomorphic to the projective general linear group $\\text{PGL}(2, \\mathbb{F}_2)$.\n\nThe general linear group $\\text{GL}(2, \\mathbb{F}_2)$ consists of invertible $2 \\times 2$ matrices with entries in $\\mathbb{F}_2$. The number of such matrices is $(2^2-1)(2^2-2) = 6$. The center of $\\text{GL}(2, \\mathbb{F}_2)$, consisting of scalar matrices, is trivial since the only non-zero scalar is 1. Thus, $\\text{PGL}(2, \\mathbb{F}_2) \\cong \\text{GL}(2, \\mathbb{F}_2)$. This group has order 6 and is non-abelian, so it is isomorphic to the symmetric group $S_3$.\n\nThe six automorphisms are given by:\n\\begin{align*} \n\\phi_1(t) &= t & \\phi_4(t) &= \\frac{1}{t+1} \\\\ \n\\phi_2(t) &= t+1 & \\phi_5(t) &= \\frac{t}{t+1} \\\\ \n\\phi_3(t) &= \\frac{1}{t} & \\phi_6(t) &= \\frac{t+1}{t} \n\\end{align*}\n\nBy the fundamental theorem of Galois theory, the fixed field of this automorphism group, let's call it $K$, is a subfield of $\\mathbb{F}_2(t)$ such that the degree of the field extension $[\\mathbb{F}_2(t):K]$ is equal to the order of the automorphism group, which is 6.\n\nLet us define the element $u$ as\n\\[ u = \\frac{(t^2+t+1)^3}{(t^2+t)^2} \\]\nWe must show that $u$ is in the fixed field $K$, which means it is invariant under the action of all six automorphisms. Let's check the generators of the group, for example, $\\phi_2(t) = t+1$ and $\\phi_3(t) = 1/t$.\n\nFor $\\phi_2(t) = t+1$:\n\\[ \\phi_2(u) = \\frac{(((t+1)^2+(t+1)+1)^3}{((t+1)^2+(t+1))^2} = \\frac{((t^2+1)+(t+1)+1)^3}{((t^2+1)+(t+1))^2} = \\frac{(t^2+t+1)^3}{(t^2+t)^2} = u \\]\nFor $\\phi_3(t) = 1/t$:\n\\[ \\phi_3(u) = \\frac{((1/t)^2+(1/t)+1)^3}{((1/t)^2+(1/t))^2} = \\frac{\\left(\\frac{1+t+t^2}{t^2}\\right)^3}{\\left(\\frac{1+t}{t^2}\\right)^2} = \\frac{\\frac{(t^2+t+1)^3}{t^6}}{\\frac{(t+1)^2}{t^4}} = \\frac{(t^2+t+1)^3}{t^2(t+1)^2} = \\frac{(t^2+t+1)^3}{(t^2+t)^2} = u \\]\nSince $u$ is invariant under the generators of the group, it is invariant under the entire group. Therefore, $\\mathbb{F}_2(u)$ is a subfield of the fixed field $K$.\n\nNow, we consider the degree of the field extension $[\\mathbb{F}_2(t):\\mathbb{F}_2(u)]$. The element $u$ is a rational function in $t$. The degree of this extension is the degree of the rational function $u$, which is the maximum of the degrees of its numerator and denominator. The numerator of $u$ has degree $3 \\times 2 = 6$, and the denominator has degree $2 \\times 2 = 4$. Thus, the degree of the extension is 6.\n\nSince we have found a subfield $\\mathbb{F}_2(u)$ of the fixed field $K$ such that $[\\mathbb{F}_2(t):\\mathbb{F}_2(u)] = 6$, and we know that $[\\mathbb{F}_2(t):K] = 6$, it must be that $K = \\mathbb{F}_2(u)$.\n\nFinally, we show the equivalence of the two expressions for $u$ given in the prompt. In $\\mathbb{F}_2$, we have $-1=1$, so we can write $t^2-t$ as $t^2+t$. We also factor $t^4-t = t(t^3-1) = t(t-1)(t^2+t+1) = t(t+1)(t^2+t+1)$, as we are in $\\mathbb{F}_2$.\n\\[ \\frac{(t^4-t)^3}{(t^2-t)^5} = \\frac{(t(t+1)(t^2+t+1))^3}{(t(t+1))^5} = \\frac{t^3(t+1)^3(t^2+t+1)^3}{t^5(t+1)^5} = \\frac{(t^2+t+1)^3}{t^2(t+1)^2} = \\frac{(t^2+t+1)^3}{(t^2+t)^2} \\]\nThis confirms that both expressions for $u$ are identical.\n\nThus, the automorphism group of $\\mathbb{F}_2(t)$ is isomorphic to $S_3$, and its fixed field is $\\mathbb{F}_2(u)$.\n",
    "formal_statement": "import Mathlib\n\n/--\nProve that the automorphism group of $\\mathbb{F}_2(t)$ is isomorphic to $S_3$, and its fixed field is\n$\\mathbb{F}_2(u)$ with $$u = \\frac{(t^4-t)^3}{(t^2-t)^5} = \\frac{(t^2+t+1)^3}{(t^2-t)^2}$$.\n-/\ntheorem fixedField_eq_algebra_adjoin :\n    Nonempty ((RatFunc (ZMod 2) ≃+* RatFunc (ZMod 2)) ≃* (Equiv.Perm (Fin 3))) ∧\n    IntermediateField.fixedField (F := ZMod 2) (E := RatFunc (ZMod 2)) ⊤ =\n    IntermediateField.adjoin (ZMod 2) {((.X ^ 4 - .X) ^ 3 / (.X ^ 2 - .X) ^ 5 : (RatFunc (ZMod 2)))} := by\n  sorry\n"
  },
  {
    "id": 26,
    "informal_statement": "\nLet $K/\\mathbb{Q}$ be a finite extension. Let $H$ be a closed subgroup of the absolute Galois group $G(K)$ of $K$. If $H$ is finite, then the cardinality of $H$ is either one or two.\n",
    "informal_proof": "\nMay assume $H$ nontrivial. For a prime $p|\\#H$, $H$ includes some $p$-th cyclic subgroup, closed by default, with fixed field $E\\subset\\overline K$ of index $p$. Referring to the next Exercise, $E$ cannot contain the $p^2$-th root of unity. Thus $\\overline K=E(\\zeta_{p^2})$, and note that $\\zeta_p\\in E$. As $\\overline K$ algebraic closed, $\\mathrm{Nm}_{\\overline K/E}:\\overline K=\\overline K^p\\to E$ has image in $E^p$. Then $(-1)^{p-1}\\zeta_p=\\mathrm{Nm}_{\\overline K/E}\\zeta_{p^2}\\in E^p$, the only case is $p=2$. Moreover, the finite index subfield $\\overline K^H(\\text{i})=\\overline K$, else included in some subfield of index 2, contradictory to the previous. Hence $H$ has order $2$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $K/\\mathbb{Q}$ be a finite extension.\nLet $H$ be a closed subgroup of the absolute Galois group $G(K)$ of $K$.\nIf $H$ is finite, then the cardinality of $H$ is either one or two.\n-/\ntheorem card_one_or_two_of_finite_closed_subgroup_of_absoluteGaloisGroup\n    (K : Type) [Field K] [Algebra ℚ K] [Module.Finite ℚ K]\n    (H : Subgroup (Field.absoluteGaloisGroup K))\n    (h_closed : IsClosed (H : Set (Field.absoluteGaloisGroup K)))\n    (h_fin : Finite H) : Nat.card H = 1 ∨ Nat.card H = 2 := by\n  sorry\n"
  },
  {
    "id": 27,
    "informal_statement": "\nLet $p$ be a prime number. Let $K/\\mathbb{Q}$ be a finite extension, such that the $p^{2}$th root of unity is contained in $K$. Let $L/K$ be a Galois extension of degree $p$, show that there exists a Galois extension $L'/L$ of degree $p$, such that the extension $L'/K$ is Galois.\n",
    "informal_proof": "\nNote that $L/K$ is cyclic. By Kummer theory, $L=K(\\sqrt[p]{a})$ for some $a\\in K^\\times-K^{\\times p}$. Again by Kummer theory, $L'=K(\\sqrt[p^2]a)$ is Galois over $K$ of degree $p^2$, including $L$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $p$ be a prime number. Let $K/\\mathbb{Q}$ be a finite extension, such that the $p^{2}$th root of unity is contained in $K$.\nLet $L/K$ be a Galois extension of degree $p$, show that there exists a Galois extension $L'/L$ of degree $p$,\nsuch that the extension $L'/K$ is Galois.\n-/\ntheorem isGalois_and_rank_eq_of_isPrimitiveRoot_sq (p : ℕ) (hp : p.Prime) {K : Type} [Field K]\n    [NumberField K] {ζ : K} (h : IsPrimitiveRoot ζ (p^2))\n    {L : IntermediateField K (AlgebraicClosure K)} [IsGalois K L]\n    (hdeg : Module.rank K L = p) :\n    ∃ (L' : Type) (_ : Field L') (_ : Algebra K L')\n    (_ : Algebra L L') (_ : IsScalarTower K L L'),\n    IsGalois K L' ∧ IsGalois L L' ∧ Module.rank L L' = p := by\n  sorry\n"
  },
  {
    "id": 28,
    "informal_statement": "\nLet $K/\\mathbb{Q}$ be a finite extension. Let $g$ be a nontrivial element of the absolute Galois group $G(K)$ of $K$. Show that $g$ admits an infinite number of conjugates.\n",
    "informal_proof": "\nAssume that $g$ admits finitely many conjugates; we need to show that $g=1$. \n\nBy assumption, $Z_{G(K)}(g)$ has finite index. It is moreover closed, hence open; in other words, there exists a number field $L$ over $K$ such that $G(L)=Z_{G(K)}(g)$ as open subgroups of $G(K)$ of finite index.\n\nObserve that: if $P_1,P_2$ are distinct primes in $\\bar L$ whose decomposition groups (in $G(L)$) are denoted respectively by $G(P_1),G(P_2)$, then $G(P_1)\\cap G(P_2)=1$. Since $g$ lies in the center of $G(L)$, we have\n\\[G(gP)=gG(P)g^{-1}=G(P),\\]\nwhich implies $gP=P$ for every prime $P$ in $\\bar L$. Thus $g=1$.\n\nThe last step uses Corollary 12.1.6, \\emph{Cohomology of Number Fields, Neukirch and others}. \n\nAny proper subfield $E\\subset\\overline K$ has at most one prime indecomposable in $\\overline K$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $K/\\mathbb{Q}$ be a finite extension.\nLet $g$ be a nontrivial element of the absolute Galois group $G(K)$ of $K$.\nShow that $g$ admits an infinite number of conjugates.\n-/\ntheorem infinite_conj_of_ne_1_absoluteGaloisGroup (K : Type)\n    [Field K] [Algebra ℚ K] [Module.Finite ℚ K] (g : Field.absoluteGaloisGroup K) (h : g ≠ 1) :\n    {g' : Field.absoluteGaloisGroup K | IsConj g g'}.Infinite := by\n  sorry\n"
  },
  {
    "id": 29,
    "informal_statement": "\nLet $K/\\mathbb{Q}$ be a finite extension. Let $g$ be an element of the absolute Galois group $G(K)$ of $K$. Show that the subgroup generated by $g$ is closed in $G(K)$ if and only if $g$ is torsion.\n",
    "informal_proof": "\nThe absolute Galois group $G_K$ is a profinite group, which means it is a compact, Hausdorff, and totally disconnected topological group. Let $g \\in G_K$ and consider the cyclic subgroup it generates, $\\langle g \\rangle = \\{g^k \\mid k \\in \\mathbb{Z}\\}$.\n\nFirst, assume that $g$ is a torsion element, meaning it has finite order. Let the order of $g$ be $n$. The subgroup generated by $g$ is the finite set $\\langle g \\rangle = \\{e, g, g^2, \\dots, g^{n-1}\\}$, where $e$ is the identity in $G_K$. Since $G_K$ is a Hausdorff space, any finite subset is closed. Thus, $\\langle g \\rangle$ is a closed subgroup of $G_K$.\n\nConversely, assume that the subgroup $\\langle g \\rangle$ is closed in $G_K$. We will show by contradiction that $g$ must be a torsion element. Suppose $g$ is not torsion, meaning it has infinite order. Then the subgroup $\\langle g \\rangle$ is algebraically isomorphic to the additive group of integers, $\\mathbb{Z}$. Since $\\langle g \\rangle$ is a closed subset of the compact group $G_K$, it must itself be compact. However, a group isomorphic to $\\mathbb{Z}$ endowed with the subspace topology from $G_K$ (which is Hausdorff) cannot be compact.\n\nMore formally, the closure of an infinite cyclic subgroup in a profinite group is known to be the profinite completion of the integers, $\\hat{\\mathbb{Z}}$. So, the closure of $\\langle g \\rangle$ is $\\overline{\\langle g \\rangle} \\cong \\hat{\\mathbb{Z}}$. Since we assumed $\\langle g \\rangle$ is closed, we must have $\\langle g \\rangle = \\overline{\\langle g \\rangle}$. This would imply that $\\langle g \\rangle \\cong \\hat{\\mathbb{Z}}$. This is a contradiction, because $\\langle g \\rangle \\cong \\mathbb{Z}$ is a countable set, while $\\hat{\\mathbb{Z}}$ (the inverse limit of finite cyclic groups, $\\varprojlim_n \\mathbb{Z}/n\\mathbb{Z}$) is uncountable. Because a countable set cannot be equal to an uncountable set, our assumption that $g$ has infinite order must be false. Therefore, $g$ must be a torsion element.\n\nThus, the subgroup $\\langle g \\rangle$ is closed if and only if $g$ is a torsion element.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $K/\\mathbb{Q}$ be a finite extension. Let $g$ be an element of the absolute Galois group $G(K)$ of $K$.\nShow that the subgroup generated by $g$ is closed in $G(K)$ if and only if $g$ is torsion.\n-/\ntheorem isClosed_zpowers_iff_isOfFinOrder (K : Type)\n    [Field K] [Algebra ℚ K] [Module.Finite ℚ K] (g : Field.absoluteGaloisGroup K) :\n    IsClosed ((Subgroup.zpowers g) : Set (Field.absoluteGaloisGroup K)) ↔ IsOfFinOrder g := by\n  sorry\n"
  },
  {
    "id": 30,
    "informal_statement": "\nLet \\( A \\) be a subring of a ring \\( B \\), such that the set \\( B \\setminus A \\) is closed under multiplication. Show that \\( A \\) is integrally closed in \\( B \\).\n",
    "informal_proof": "\nIf not, there is some nonzero element $b\\in B\\backslash A$ satisfied the equation\n\\begin{equation*}\n    b^n+a_{n-1}b^{n-1}+...+a_0=0\\qquad a_i\\in A.\n\\end{equation*}\nBut the nonzero element $a_0$ is the product of $-b$ and $b^{n-1}+a_{n-1}b^{n-2}+...+a_1$, which shows that the latter is in the ring $A$. Then consider the factors $-b$ and $b^{n-2}+a_{n-1}b^{n-3}+...+a_2$ and ... Finally, we will get the result that $b+a_{n-1}$ is in the ring A which is wrong.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( A \\) be a subring of a ring \\( B \\), such that the set \\( B \\setminus A \\) is closed under multiplication.\nShow that \\( A \\) is integrally closed in \\( B \\).\n-/\ntheorem integrallyClosedIn_of_complement_multiplicatively_closed (B : Type) [CommRing B] (A : Subring B)\n    (h : ∀ (x y : B), x ∉ A → y ∉ A → x * y ∉ A) : IsIntegrallyClosedIn A B := by\n  sorry\n"
  },
  {
    "id": 31,
    "informal_statement": "\nLet \\( R = \\mathbb{C}[x_1, \\dots, x_n]/(x_1^2 + x_2^2 + \\dots + x_n^2) \\). Then \\( R \\) is a unique factorization domain for \\(n \\geq 5 \\).\n",
    "informal_proof": "\n(\\href{http://math.stanford.edu/~vakil/216blog/FOAGjul2724public.pdf}{The Rising Sea} P450-P451)\n",
    "formal_statement": "import Mathlib\n\nopen MvPolynomial\n\n/--\nLet \\( R = \\mathbb{C}[x_1, \\dots, x_n]/(x_1^2 + x_2^2 + \\dots + x_n^2) \\).\n-/\nabbrev R (n : ℕ) : Type :=\n  MvPolynomial (Fin n) ℂ ⧸ Ideal.span {(∑ i : Fin n, X i ^ 2 : MvPolynomial (Fin n) ℂ)}\n\n/--\nLet \\( R = \\mathbb{C}[x_1, \\dots, x_n]/(x_1^2 + x_2^2 + \\dots + x_n^2) \\).\nThen \\( R \\) is a unique factorization domain for \\( n \\geq 5 \\).-/\ntheorem UFD_of_ge_5 (n : ℕ) (h : n ≥ 5) :\n    ∃ (h : IsDomain (R n)), UniqueFactorizationMonoid (R n) := by\n  sorry\n"
  },
  {
    "id": 32,
    "informal_statement": "\nLet \\( A \\) be a Noetherian local ring such that its completion \\( \\widehat{A} \\) is a unique factorization domain. Then \\( A \\) is a unique factorization domain.\n",
    "informal_proof": "\nSince $A$ is Noetherian, $A\\to \\widehat{A}$ is faithfully flat; consequently, since $\\widehat{A}$ is a normal domain, so is $A$.\\par\nWe show the unique factorization property. If not, by mapping to $\\widehat{A}$, it suffices to show the following statement: If two irreducible elements $f_1$ and $f_2$ in $A$ have a common factor $g$ in $\\widehat{A}$, then $f_1=f_2$ up to a unit. Set $f_1=g\\alpha_1$ and $f_2=g\\alpha_2$ for $g,\\alpha_1,\\alpha_2\\in \\widehat{A}$, and suppose that $\\alpha_1$ and $\\alpha_2$ are prime to each other. By approximation, find $g=g_n+m_n$ such that $g_n\\in A$ and $m_n\\in \\mathfrak{m}^n\\widehat{A}\\subset (f_1)\\cap(f_2)$ (this uses the Noetherian property). We have $f_1(1-k_1\\alpha_1)=g_n\\alpha_1$. It is easy to see that $1-k_1\\alpha_1$ is a unit when $n>>0$ and $f_1=g_n\\alpha_1(1-k_1\\alpha_1)^{-1}$. Similarly, $f_2=g_n\\alpha_2(1-k_2\\alpha_2)^{-1}$. Then $(f_1)\\subset(g_n)$ and $(f_2)\\subset (g_n)$. (In fact, $g_n\\widehat{A}+f_1\\widehat{A}/g_n\\widehat{A}$ is trivial, then $g_nA+f_1A/g_nA$ is trivial by faithful-flatness.) The irreducibility of $f_1$ and $f_2$ implies that $f_1=f_2=g_n$ up to multiplying units.\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing\n\n/--\nLet \\( A \\) be a Noetherian local ring such that its completion \\( \\widehat{A} \\) is a unique factorization domain.\nThen \\( A \\) is a unique factorization domain.-/\ntheorem UFD_of_adicCompletion_UFD (R : Type) [CommRing R] [IsLocalRing R] [IsNoetherianRing R]\n    [IsDomain (AdicCompletion (maximalIdeal R) R)]\n    [UniqueFactorizationMonoid (AdicCompletion (maximalIdeal R) R)] :\n    ∃ (h : IsDomain R), UniqueFactorizationMonoid R := by\n  sorry\n"
  },
  {
    "id": 33,
    "informal_statement": "\nLet $A\\subset B$ be commutative rings such that $B$ is finitely generated as a module over $A$. If $B$ is a noetherian ring, show that $A$ is also a noetherian ring.\n",
    "informal_proof": "\nThis is Eakin–Nagata theorem. Here is a proof from Wiki. \n\nIt is enough to show that \\( B \\) is a Noetherian module since, in general, a ring admitting a faithful Noetherian module over it is a Noetherian ring. Suppose otherwise. By assumption, the set of all \\( IB \\), where \\( I \\) is an ideal of \\( A \\) such that \\( B/IB \\) is not Noetherian has a maximal element, \\( I_0B \\). Replacing \\( B \\) and \\( A \\) by \\( B/I_0B \\) and \\( A/\\text{Ann}(B/I_0B) \\), we can assume\n\\begin{itemize}\n    \\item[$\\bullet$] For each nonzero ideal \\( I \\subset A \\), the module \\( B/IB \\) is Noetherian.\n\\end{itemize}\nNext, consider the set \\( \\mathcal{S} \\) of submodules \\( N \\subset B \\) such that \\( B/N \\) is faithful. Choose a set of generators \\( \\{x_1,\\ldots,x_n\\} \\) of \\( B \\) and then note that \\( B/N \\) is faithful if and only if for each \\( a \\in A \\), the inclusion \\( \\{ax_1,\\ldots,ax_n\\} \\subset N \\) implies \\( a = 0 \\). Thus, it is clear that Zorn's lemma applies to the set \\( \\mathcal{S} \\), and so the set has a maximal element, \\( N_0 \\). Now, if \\( B/N_0 \\) is Noetherian, then it is a faithful Noetherian module over \\( A \\) and, consequently, \\( A \\) is a Noetherian ring, a contradiction. Hence, \\( B/N_0 \\) is not Noetherian and replacing \\( B \\) by \\( B/N_0 \\), we can also assume\n\\begin{itemize}\n    \\item[$\\bullet$] Each nonzero submodule \\( N \\subset B \\) is such that \\( B/N \\) is not faithful.\n\\end{itemize}\nLet a submodule \\( 0 \\neq N \\subset B \\) be given. Since \\( B/N \\) is not faithful, there is a nonzero element \\( a \\in A \\) such that \\( aB \\subset N \\). By assumption, \\( B/aB \\) is Noetherian and so \\( N/aB \\) is finitely generated. Since \\( aB \\) is also finitely generated, it follows that \\( N \\) is finitely generated; i.e., \\( B \\) is Noetherian, a contradiction. \n",
    "formal_statement": "import Mathlib\n\n/--\nLet $A\\subset B$ be commutative rings such that $B$ is finitely generated as a module over $A$.\nIf $B$ is a noetherian ring, show that $A$ is also a noetherian ring.\n-/\ntheorem isNoetherianRing_of_fg_of_isNoetherianRing (B : Type) [CommRing B] [IsNoetherianRing B]\n    (A : Subring B) (h : Module.Finite A B) : IsNoetherianRing A := by\n  sorry\n"
  },
  {
    "id": 34,
    "informal_statement": "\nIf \\( R \\) is a valuation ring of Krull dimension \\( \\geq 2 \\), then the formal power series ring \\( R[[X]] \\) is not integrally closed.\n",
    "informal_proof": "\nLet $0 \\subset p_1 \\subset p_2$ be a strictly increasing chain of prime ideals of $R$ and let $0 \\neq b \\in p_1$, $a \\in p_2-p_1$, thus $ba^{-n} \\in R$ for all $n > 0$. Take $f=\\sum_{i=1}^\\infty u_i X^i$ to be a root of $f^2+af+X=0$. Then $u_1 = a^{-1}$ and for all $i$ we have $u_i \\in a^{-2i+1}R$ so $bf(x) \\in R[[X]]$ but $f(X) \\not \\in R[[X]]$.\n",
    "formal_statement": "import Mathlib\n\nopen PowerSeries\n\n/--\nIf \\( R \\) is a valuation ring of Krull dimension \\( \\geq 2 \\),\nthen the formal power series ring \\( R[[X]] \\) is not integrally closed.-/\ntheorem powerSeries_not_integrallyClosed_of_two_lt_ringKrullDim (R : Type) [CommRing R]\n    [IsDomain R] [ValuationRing R] (two_lt : 2 ≤ ringKrullDim R) :\n    ¬ (IsIntegrallyClosed R⟦X⟧) := by\n  sorry\n"
  },
  {
    "id": 35,
    "informal_statement": "\nA commutative ring whose prime ideals are finitely generated is Noetherian.\n",
    "informal_proof": "\nFor any chain of ideals which are not finitely generated ${I_\\alpha}$, it admits an upper bound $\\bigcup I_\\alpha$, thus by Zorn's lemma the set of ideals which are not finitely generated has maximal element $I$. So every ideal of $R/I$ is finitely generated and therefore $R/I$ is Noetherian. The ideal $I$ is not prime thus there exist two ideals $K_1,K_2$ of $R$ such that $K_1$ and $K_2$ are not contained in $I$ but $K_1K_2\\subset I$. Then $J_1=K_1+I$ and $J_2=K_2+I$ are finitely generated and $J_1J_2\\subset I$. The $R/I$-module $J_1/J_1J_2$ is finitely generated as $J_1$ is. Since $R/I$ is Noetherian, the submodule $I/J_1J_2\\subset J_1/J_1J_2$ is finitely generated. Now we have $J_1J_2$ and $I/J_1J_2$ are finitely generated $R$-modules so $I$ is finitely generated, which is a contradiction.\n \n",
    "formal_statement": "import Mathlib\n\n/--\nA commutative ring whose prime ideals are finitely generated is Noetherian. -/\ntheorem noetherian_of_prime_ideals_fg (R : Type) [CommRing R]\n    (h_fg : ∀ (p : Ideal R), p.IsPrime → p.FG) : IsNoetherianRing R := by\n  sorry\n"
  },
  {
    "id": 36,
    "informal_statement": "\nIf \\( R \\) is Noetherian and \\( M \\) and \\( N \\) are finitely generated \\( R \\)-modules, show that\n\\[\n\\operatorname{Ass} \\operatorname{Hom}_R(M, N) = \\operatorname{Supp} M \\cap \\operatorname{Ass} N,\n\\]\nwhere \\( \\operatorname{Supp} M \\) is the set of all primes containing the annihilator of \\( M \\).\n",
    "informal_proof": "\nThe proof is done by showing two inclusions.\n\n\\textbf{Part 1: \\( \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\subseteq \\operatorname{Supp}(M) \\cap \\operatorname{Ass}(N) \\)}\n\nFirst, we prove \\( \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\subseteq \\operatorname{Supp}(M) \\).\nLet \\( \\mathfrak{p} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\). By definition, there exists a homomorphism \\( \\phi \\in \\operatorname{Hom}_R(M, N) \\) such that \\( \\mathfrak{p} = \\operatorname{Ann}(\\phi) \\). We want to show that \\( \\mathfrak{p} \\in \\operatorname{Supp}(M) \\), which is equivalent to showing \\( \\operatorname{Ann}(M) \\subseteq \\mathfrak{p} \\).\nLet \\( x \\in \\operatorname{Ann}(M) \\). Then for any \\( m \\in M \\), \\( xm = 0 \\).\nApplying \\( \\phi \\) gives \\( \\phi(xm) = \\phi(0) = 0 \\).\nBy the module structure of \\( \\operatorname{Hom}_R(M,N) \\), we have \\( (x\\phi)(m) = \\phi(xm) \\).\nSo, \\( (x\\phi)(m) = 0 \\) for all \\( m \\in M \\), which means \\( x\\phi = 0 \\).\nThis implies that \\( x \\in \\operatorname{Ann}(\\phi) = \\mathfrak{p} \\). Thus, \\( \\operatorname{Ann}(M) \\subseteq \\mathfrak{p} \\).\n\nSecond, we prove \\( \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\subseteq \\operatorname{Ass}(N) \\).\nLet \\( \\mathfrak{p} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\). By the properties of localization, this implies \\( \\mathfrak{p}R_\\mathfrak{p} \\in \\operatorname{Ass}_{R_\\mathfrak{p}}(\\operatorname{Hom}_R(M, N)_\\mathfrak{p}) \\).\nSince \\( M \\) is finitely generated, we have the isomorphism \\( \\operatorname{Hom}_R(M, N)_\\mathfrak{p} \\cong \\operatorname{Hom}_{R_\\mathfrak{p}}(M_\\mathfrak{p}, N_\\mathfrak{p}) \\).\nSo we have \\( \\mathfrak{p}R_\\mathfrak{p} \\in \\operatorname{Ass}_{R_\\mathfrak{p}}(\\operatorname{Hom}_{R_\\mathfrak{p}}(M_\\mathfrak{p}, N_\\mathfrak{p})) \\).\nFor a prime ideal \\( \\mathfrak{p} \\) in a Noetherian ring \\(R\\), \\( \\mathfrak{p} \\in \\operatorname{Ass}(L) \\) if and only if, after localizing at \\( \\mathfrak{p} \\), we have \\( \\operatorname{depth}_{R_\\mathfrak{p}}(L_\\mathfrak{p})=0 \\).\nSo our premise is that in the local ring \\( (R_\\mathfrak{p}, \\mathfrak{p}R_\\mathfrak{p}) \\), we have \\( M_\\mathfrak{p} \\neq 0 \\) (since \\( \\mathfrak{p} \\in \\operatorname{Supp}(M) \\)) and \\( \\operatorname{depth}(\\operatorname{Hom}_{R_\\mathfrak{p}}(M_\\mathfrak{p}, N_\\mathfrak{p})) = 0 \\). We need to show that this implies \\( \\operatorname{depth}(N_\\mathfrak{p}) = 0 \\), which would mean \\( \\mathfrak{p} \\in \\operatorname{Ass}(N) \\).\nLet's simplify notation and assume \\( (R, \\mathfrak{m}) \\) is a local Noetherian ring. We want to show that if \\( M \\neq 0 \\) is a finitely generated module, then \\( \\operatorname{depth}(\\operatorname{Hom}_R(M,N))=0 \\) implies \\( \\operatorname{depth}(N)=0 \\).\nSuppose, for the sake of contradiction, that \\( \\operatorname{depth}(N) > 0 \\). Then there exists an \\( N \\)-regular element \\( x \\in \\mathfrak{m} \\).\nLet \\( \\phi \\in \\operatorname{Hom}_R(M, N) \\) be such that \\( x\\phi = 0 \\). This means \\( x\\phi(m) = 0 \\) for all \\( m \\in M \\).\nSince \\( x \\) is \\( N \\)-regular and \\( \\phi(m) \\in N \\), this implies \\( \\phi(m) = 0 \\) for all \\( m \\in M \\). Therefore, \\( \\phi = 0 \\).\nThis shows that \\( x \\) is a regular element for \\( \\operatorname{Hom}_R(M, N) \\). But this contradicts \\( \\operatorname{depth}(\\operatorname{Hom}_R(M, N)) = 0 \\), which states that every element of \\( \\mathfrak{m} \\) is a zero divisor for \\( \\operatorname{Hom}_R(M, N) \\).\nThus, our assumption was false, and we must have \\( \\operatorname{depth}(N) = 0 \\). This implies \\( \\mathfrak{p} \\in \\operatorname{Ass}(N) \\).\n\n\\textbf{Part 2: \\( \\operatorname{Supp}(M) \\cap \\operatorname{Ass}(N) \\subseteq \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\)}\n\nLet \\( \\mathfrak{p} \\in \\operatorname{Supp}(M) \\cap \\operatorname{Ass}(N) \\). We want to show \\( \\mathfrak{p} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\).\nIt is sufficient to prove this after localizing at \\( \\mathfrak{p} \\). So we can assume \\( (R, \\mathfrak{m}) \\) is a local Noetherian ring, \\( \\mathfrak{m} \\in \\operatorname{Supp}(M) \\) (i.e., \\( M \\neq 0 \\)), and \\( \\mathfrak{m} \\in \\operatorname{Ass}(N) \\). We need to prove that \\( \\mathfrak{m} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\).\nSince \\( \\mathfrak{m} \\in \\operatorname{Ass}(N) \\), there exists an injective homomorphism \\( i: R/\\mathfrak{m} \\hookrightarrow N \\). Let \\( k = R/\\mathfrak{m} \\) be the residue field.\nApplying the left-exact functor \\( \\operatorname{Hom}_R(M, \\cdot) \\) gives an injective homomorphism:\n\\[ \\operatorname{Hom}_R(M, k) \\hookrightarrow \\operatorname{Hom}_R(M, N) \\]\nNow we must show that \\( \\mathfrak{m} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M, k)) \\). This is equivalent to showing that \\( \\operatorname{Hom}_R(M, k) \\) is not the zero module.\nSince \\( M \\) is a non-zero finitely generated module over a local ring \\( (R, \\mathfrak{m}) \\), by Nakayama's Lemma, \\( M/\\mathfrak{m}M \\) is a non-zero vector space over the field \\( k \\).\nSo \\( \\operatorname{Hom}_k(M/\\mathfrak{m}M, k) \\neq 0 \\).\nBut \\( \\operatorname{Hom}_R(M, k) \\cong \\operatorname{Hom}_R(M/\\mathfrak{m}M, k) \\cong \\operatorname{Hom}_k(M/\\mathfrak{m}M, k) \\).\nSo \\( \\operatorname{Hom}_R(M, k) \\neq 0 \\). Let \\( \\psi \\in \\operatorname{Hom}_R(M,k) \\) be a non-zero homomorphism.\nThe module \\( k \\) is annihilated by \\( \\mathfrak{m} \\), so for any \\( a \\in \\mathfrak{m} \\), \\( a\\psi(m) = \\psi(am) = 0 \\) because \\( \\psi(M) \\subseteq k \\). Therefore, \\( a \\psi = 0 \\), which implies \\( \\mathfrak{m} \\subseteq \\operatorname{Ann}(\\psi) \\).\nSince \\( \\psi \\neq 0 \\) and \\( \\psi \\) takes values in \\( k=R/\\mathfrak{m} \\), its annihilator must be exactly \\( \\mathfrak{m} \\).\nSo \\( \\mathfrak{m} = \\operatorname{Ann}(\\psi) \\), which means \\( \\mathfrak{m} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M,k)) \\).\nSince we have an injection \\( \\operatorname{Hom}_R(M,k) \\hookrightarrow \\operatorname{Hom}_R(M,N) \\), every associated prime of \\( \\operatorname{Hom}_R(M,k) \\) is also an associated prime of \\( \\operatorname{Hom}_R(M,N) \\).\nTherefore, \\( \\mathfrak{m} \\in \\operatorname{Ass}(\\operatorname{Hom}_R(M, N)) \\).\n\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nIf \\( R \\) is Noetherian and \\( M \\) and \\( N \\) are finitely generated \\( R \\)-modules, show that\n\\[\n\\operatorname{Ass} \\operatorname{Hom}_R(M, N) = \\operatorname{Supp} M \\cap \\operatorname{Ass} N,\n\\]\nwhere \\( \\operatorname{Supp} M \\) is the set of all primes containing the annihilator of \\( M \\).-/\ntheorem associatedPrimes_hom_eq_support_inter_associatedPrimes (R : Type) [CommRing R]\n    [IsNoetherianRing R] (M N : Type) [AddCommGroup M] [AddCommGroup N] [Module R M] [Module R N]\n    [Module.Finite R M] [Module.Finite R N] : associatedPrimes R (M →ₗ[R] N) =\n    {p | p ∈ associatedPrimes R N ∧ Module.annihilator R M ≤ p} := by\n  sorry\n"
  },
  {
    "id": 37,
    "informal_statement": "\nLet $R=\\mathbb{C}[x_{11},x_{12},\\dots,x_{1n},x_{21},x_{22},\\dots,x_{2n},\\dots,x_{n1},x_{n2},\\dots,x_{nn}]/(\\det(x_{ij})-1)$, show that $R$ is a unique factorization domain.\n",
    "informal_proof": "\nWe found two approaches:\n\\begin{itemize}\n    \\item The first one is proved in a general context.\n(sketch) We show that $Pic(SL_n)=1$. This is one of the main results of the paper below, in which it was shown that the Picard group of any simply connected semisimple linear algebraic group is trivial.\\par\nBy Bruhat decomposition, $SL_n=N_-TN^+\\cup N_-\\omega_iTN^+\\cup\\cdots$. The variety $SL_n\\backslash N_-TN^+$ consists of $r$ irreducible components of dimension $dim SL_n-1$, where $r=n-1$ is the semisimple rank of $SL_n$. Then $Pic(SL_n)=<\\Gamma_i>_{i=1}^{n-1}/(\\text{linear equivalences})$. Take an effective divisor $\\Gamma_{(\\mathbf{a})}$. According to Theorem 1 of the paper below, $\\Gamma_{(\\mathbf{a})}$ bijectively corresponds to a minimal linear system that contains all $g$ transitions of $\\Gamma_{(\\mathbf{a})}$, and this bijectively corresponds to an irreducible projective representation $\\mathbb{P}\\rho_{\\mathbf{a}}:SL_n\\to PGL(V_{(\\mathbf{a})})$; this projective representation can be lifted to a usual representation if and only if $\\Gamma_{(\\mathbf{a})}$ is linearly equivalent to $0$. But for simply connected semisimple algebraic groups, all projective representations can be lifted to a usual representation. This shows that the Picard group of $SL_n$ is trivial.\n\\item The second one is simple. We know that $Pic(GL_n)=1$ by (the corrected version of) the exercise 55 below. There is a splitting of the group homomorphism $GL_n\\to \\mathbb{G}_m$ over $\\mathbb{C}$ defined by $x\\mapsto \\mathrm{diag}\\{x,1,1,\\cdots,1\\}$ defining an isomorphism of \\emph{schemes} $SL_n\\times \\mathbb{G}_m\\simeq GL_n$. It follows that $Pic(SL_n)$ is also trivial. \n\\end{itemize}\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $R=\\mathbb{C}[x_{11},x_{12},\\dots,x_{1n},x_{21},x_{22},\\dots,x_{2n},\\dots,x_{n1},x_{n2},\\dots,x_{nn}]/(\\det(x_{ij})-1)$.\n-/\nabbrev QuotDetSubOne (n : ℕ) : Type := MvPolynomial ((Fin n) × (Fin n)) ℂ ⧸ Ideal.span {\n      Matrix.det (fun (i : Fin n) ↦ (fun (j : Fin n) ↦ (.X ⟨i, j⟩ : (MvPolynomial ((Fin n) × (Fin n)) ℂ)))) - .C 1}\n\n/--\nLet $R=\\mathbb{C}[x_{11},x_{12},\\dots,x_{1n},x_{21},x_{22},\\dots,x_{2n},\\dots,x_{n1},x_{n2},\\dots,x_{nn}]/(\\det(x_{ij})-1)$,\nshow that $R$ is a unique factorization domain.\n-/\ntheorem ufd_quotDetSubOne (n : ℕ) (h : n ≥ 1) : ∃ (h : IsDomain (QuotDetSubOne n)),\n    UniqueFactorizationMonoid (QuotDetSubOne n) := by\n  sorry\n"
  },
  {
    "id": 38,
    "informal_statement": "\nLet \\( k \\) be a field, and let \\( R = k[t]/(t^2) \\). Set\n\\[\np(x) = tx^3 + tx^2 - x^2 - x \\in R[x].\n\\]\nShow that \\( S = R[x]/(p) \\) is a free \\( R \\)-module of rank \\( 2 \\).\n",
    "informal_proof": "\nWe prove that $\\bar{1}$ and $\\bar{x}$ is a basis of $S$ as a $R$-module. We have\n\\begin{equation*}\n    \\bar{x^2}=t\\bar{x^3}+t\\bar{x^2}-\\bar{x}=t\\bar{x}(-\\bar{x})+t(-\\bar{x})-\\bar{x}= -\\bar{x}.\n\\end{equation*}\nSo S is in the $R$-module generated by $\\bar{1}$ and $\\bar{x}$. Besides, the ring $R$ is a PID and $a\\bar{1}+b\\bar{x}$ is nonzero, which shows that the module $S$ is a free $R$-module of rank 2.\n",
    "formal_statement": "import Mathlib\n\nopen Polynomial DualNumber\n\n/--\nLet \\( k \\) be a field, and let \\( R = k[t]/(t^2) \\). Set\n\\[\np(x) = tx^3 + tx^2 - x^2 - x \\in R[x].\n\\]\nLet \\( S = R[x]/(p) \\).\n-/\nabbrev S (k : Type) [Field k] : Type := ((DualNumber k)[X] ⧸ Ideal.span {((C ε) * X^3 + (C ε) * X^2 - X^2 - X : (DualNumber k)[X])})\n\n/--\n\\(S\\) has a \\(R\\) module structure inherited from R[x].\n-/\nnoncomputable instance (k : Type) [Field k] : Module (DualNumber k) (S k) := Module.compHom _ C\n\n/--\nLet \\( k \\) be a field, and let \\( R = k[t]/(t^2) \\). Set\n\\[\np(x) = tx^3 + tx^2 - x^2 - x \\in R[x].\n\\]\nShow that \\( S = R[x]/(p) \\) is a free \\( R \\)-module of rank \\( 2 \\).\n-/\ntheorem free_dualNumber_and_rank_eq_2 (k : Type) [Field k] :\n    Module.Free (DualNumber k) (S k) ∧ Module.rank (DualNumber k) (S k) = 2 := by\n  sorry\n"
  },
  {
    "id": 39,
    "informal_statement": "\nLet \\( R \\) be a normal Noetherian domain, \\( K \\) its fraction field, \\( L/K \\) a finite field extension, and \\( \\overline{R} \\) the integral closure of \\( R \\) in \\( L \\). Prove that only finitely many primes \\( \\mathfrak{P} \\) of \\( \\overline{R} \\) lie over a given prime \\( \\mathfrak{p} \\) of \\( R \\).\n",
    "informal_proof": "\nWe claim that $\\overline{R}$ is a finite $R$-module. \\textcolor{red}{With the Noetherian condition, we can do a standard trace argument.} It suffices to show the claim when $L$ is Galois over $K$. Choose a $R$-sublattice $\\Lambda$ in $\\overline{R}\\subset L$. Let $\\Lambda^\\vee$ be the dual of $\\Lambda$ under $Tr_{L/K}$. We then have $\\Lambda\\subset \\overline{R}\\subset \\Lambda^\\vee$. Then $\\overline{R}$ is finite; this step used the Noetherian condition.\\par\nNow we know that the ring $\\overline{R}$ is a finite $R$-module. Then the induced map at the residue field $R_\\mathfrak{p}/\\mathfrak{p}\\to \\overline{R}_\\mathfrak{p}/\\mathfrak{p}\\overline{R}_\\mathfrak{p}$ is finite, which is a finite product of fields.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( R \\) be a normal Noetherian domain, \\( K \\) its fraction field, \\( L/K \\) a finite field extension,\nand \\( \\overline{R} \\) the integral closure of \\( R \\) in \\( L \\).\nProve that only finitely many primes \\( \\mathfrak{P} \\) of \\( \\overline{R} \\) lie over a given prime \\( \\mathfrak{p} \\) of \\( R \\).-/\ntheorem finite_primes_lies_over_of_finite_extension (R : Type) [CommRing R] [IsDomain R]\n    [IsNoetherianRing R] [IsIntegrallyClosed R] (L : Type) [Field L] [Algebra R L]\n    [Algebra (FractionRing R) L] [IsScalarTower R (FractionRing R) L]\n    [FiniteDimensional (FractionRing R) L] (p : Ideal R) [p.IsPrime] :\n    (p.primesOver (integralClosure R L)).Finite := by\n  sorry\n"
  },
  {
    "id": 40,
    "informal_statement": "\nLet $A$ be a reduced local ring with residue field $k$ and finite set $\\Sigma$ of minimal primes. For each $\\mathfrak{p}\\in\\Sigma$, set $K(\\mathfrak{p})=\\mathrm{Frac}(A/\\mathfrak{p})$. Let $P$ be a finitely generated module. Show that $P$ is free of rank $r$ if and only if $\\dim_k(P\\otimes_A k) = r$ and $\\dim_{K(\\mathfrak{p})}(P\\otimes_A K(\\mathfrak{p})) = r$ for each $\\mathfrak{p}\\in\\Sigma$.\n",
    "informal_proof": "\n``$\\Longrightarrow$'': This direction follows from the definition.\\par\n``$\\Longleftarrow$'': By Nakayama's Lemma, lifting a basis $\\{x_i\\}$ of $P_k$ to $P_{\\mathfrak{m}}:=P\\otimes_{A}A_{\\mathfrak{m}}$, the map $f:\\bigoplus_{i=1}^rAx_i\\to P_{\\mathfrak{m}}$ is surjective. Moreover, $f\\otimes K(\\mathfrak{p})$ is an isomorphism for every $\\mathfrak{p}\\in \\Sigma$ by assumption. Then the kernel of $f$ is contained in $\\bigcap_{\\mathfrak{p}\\in\\Sigma}\\mathfrak{p}A^r$. By reducedness, the kernel is trivial and $f$ is an isomorphism, as desired.\n",
    "formal_statement": "import Mathlib\n\nopen TensorProduct\n\n/--\nLet $A$ be a reduced local ring with residue field $k$ and finite set $\\Sigma$ of minimal primes.\nFor each $\\mathfrak{p}\\in\\Sigma$, set $K(\\mathfrak{p})=\\mathrm{Frac}(A/\\mathfrak{p})$.\nLet $P$ be a finitely generated module. Show that $P$ is free of rank $r$ if and only if\n$\\dim_k(P\\otimes_A k) = r$ and $\\dim_{K(\\mathfrak{p})}(P\\otimes_A K(\\mathfrak{p})) = r$ for each $\\mathfrak{p}\\in\\Sigma$.-/\ntheorem free_of_rank_iff (R : Type) [CommRing R] [IsLocalRing R] [IsReduced R]\n    (h : (minimalPrimes R).Finite) (r : ℕ) (M : Type) [AddCommGroup M] [Module R M] [Module.Finite R M] :\n    Module.Free R M ∧ Module.rank R M = r ↔\n    (Module.rank (IsLocalRing.ResidueField R) ((IsLocalRing.ResidueField R) ⊗[R] M) = r ∧\n    ∀ p ∈ minimalPrimes R,\n    Module.rank (FractionRing (R ⧸ p)) ((FractionRing (R ⧸ p)) ⊗[R] M) = r) := by\n  sorry\n"
  },
  {
    "id": 41,
    "informal_statement": "\nLet \\( k \\) be a field, \\( A := k[X_1, X_2, \\dots] \\) a polynomial ring, \\( m_1 < m_2 < \\cdots \\) positive integers with \\( m_{i+1} - m_i > m_i - m_{i-1} \\) for \\( i > 1 \\). Set \\[\\mathfrak{p}_i := (X_{m_i+1}, \\dots, X_{m_{i+1}})\\] and \\( S := A - \\bigcup_{i \\geq 1} \\mathfrak{p}_i \\). Show that  \\( S^{-1}A \\) is noetherian with infinite krull dimension.\n",
    "informal_proof": "\nThe height of the prime ideal \\(S^{-1}\\mathfrak{p}_i\\) in \\(S^{-1}A\\) is equal to the height of \\(\\mathfrak{p}_i\\) in \\(A\\), which is the number of generators of \\(\\mathfrak{p}_i\\).\nThus, \\(\\text{ht}(S^{-1}\\mathfrak{p}_i) = m_{i+1} - m_i\\).\nThe condition on the sequence \\(m_i\\) implies that these heights are strictly increasing and unbounded. Therefore, the Krull dimension of \\(S^{-1}A\\) is infinite.\n\\[ \\dim(S^{-1}A) = \\sup_{i} \\text{ht}(S^{-1}\\mathfrak{p}_i) = \\sup_{i} (m_{i+1} - m_i) = \\infty \\]\n\nTo prove that \\(S^{-1}A\\) is Noetherian, we use the following lemma (Atiyah-Macdonald, Exercise 7.9):\n\nLemma:\nLet \\(A\\) be a ring such that:\n\\begin{enumerate}\n    \\item For each maximal ideal \\(\\mathfrak{m}\\) of \\(A\\), the local ring \\(A_\\mathfrak{m}\\) is Noetherian.\n    \\item For each nonzero element \\(x \\in A\\), the set of maximal ideals of \\(A\\) containing \\(x\\) is finite.\n\\end{enumerate}\nThen \\(A\\) is Noetherian.\n\nWe will verify that \\(S^{-1}A\\) satisfies these two conditions.\n\nWe first show that the ideals \\(S^{-1}\\mathfrak{p}_i\\) are the maximal ideals of \\(S^{-1}A\\).\nThis follows from generalized prime avoidance, which says that any ideal contained in \\(\\bigcup_i \\mathfrak{p}_i\\) must be contained in some \\(\\mathfrak{p}_i\\). If we assume this, then the maximal ideals of \\(S^{-1}A\\) are precisely the ideals of the form \\(S^{-1}\\mathfrak{p}_i\\). Then the localization of \\(S^{-1}A\\) at a maximal ideal \\(S^{-1}\\mathfrak{p}_i\\) is\n\\[ (S^{-1}A)_{S^{-1}\\mathfrak{p}_i} \\cong A_{\\mathfrak{p}_i} \\]\nThe ring \\(A_{\\mathfrak{p}_i}\\) is a localization of the Noetherian ring \\(A\\), and hence is Noetherian. Specifically, \\(A_{\\mathfrak{p}_i} \\cong k(x_j)[x_{m_i+1}, \\dots, x_{m_{i+1}}]_{\\mathfrak{p}_i}\\), where \\(j\\) runs over all natural numbers not in the set \\(\\{m_i+1, \\dots, m_{i+1}\\}\\). This is a localization of a polynomial ring over a field, which is Noetherian. Then condition (1) of the lemma holds.\n\n\nFor condition (2), since any polynomial \\(x \\in A = k[x_i]_{i\\in\\mathbb{N}}\\) involves only a finite number of variables, and the ideals \\(\\mathfrak{p}_i\\) are defined by disjoint sets of variables. Thus, \\(x\\) can belong to only finitely many \\(\\mathfrak{p}_i\\). This means any nonzero element of \\(S^{-1}A\\) is contained in only a finite number of the maximal ideals \\(S^{-1}\\mathfrak{p}_i\\), satisfying condition (2) of the lemma.\n\n\nSince both conditions of the lemma are satisfied, we conclude that \\(S^{-1}A\\) is Noetherian.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nThe multiplicative subset generated by elements\nnot in a given family of ideals.\n-/\ndef compl_all {α R : Type} [CommRing R] (I : α → Ideal R) : Submonoid R :=\n  Submonoid.closure (⋃ (i : α), (I i : Set R))ᶜ\n\n/--\nThe ideal generated by a set of single\nvariables in a multivariate polynomial ring.\n-/\ndef ideal_x {α : Type} (R : Type) [CommRing R] (J : Set α) : Ideal (MvPolynomial α R) :=\n  Ideal.span ((MvPolynomial.X)'' J)\n\n/--\nLet \\( A := k[X_1, X_2, \\dots] \\).\nSet \\[\\mathfrak{p}_i := (X_{m_i+1}, \\dots, X_{m_{i+1}})\\] and\n\\( S := A - \\bigcup_{i \\geq 1} \\mathfrak{p}_i \\).\nThis is the ring  \\( S^{-1}A \\).\n-/\nabbrev SInvA (k : Type) [Field k] (m : ℕ → ℕ) : Type := (Localization (compl_all fun (n : ℕ) ↦ ideal_x k (Set.Ioc (m n) (m (n + 1)))))\n\n/--\nLet \\( k \\) be a field, \\( A := k[X_1, X_2, \\dots] \\) a polynomial ring, \\( m_1 < m_2 < \\cdots \\) positive integers\nwith \\( m_{i+1} - m_i > m_i - m_{i-1} \\) for \\( i > 1 \\).\nSet \\[\\mathfrak{p}_i := (X_{m_i+1}, \\dots, X_{m_{i+1}})\\] and \\( S := A - \\bigcup_{i \\geq 1} \\mathfrak{p}_i \\).\nShow that  \\( S^{-1}A \\) is noetherian with infinite krull dimension.\n-/\ntheorem isNoetherianRing_and_krullDim_eq_top (k : Type) [Field k] (m : ℕ → ℕ) (h : StrictMono m) (h_diff_mono : StrictMono (fun (i : ℕ) ↦ m (i + 1) - m i)) :\n    IsNoetherianRing (SInvA k m) ∧\n    ringKrullDim (SInvA k m) = ⊤ := by\n  sorry\n"
  },
  {
    "id": 42,
    "informal_statement": "\nLet \\(k\\) be any field. Suppose that \\(A = k[[x,y]]/(f)\\) and \\(B = k[[u,v]]/(g)\\), where \\(f = xy\\) and \\(g = uv + \\delta\\) with \\(\\delta \\in (u,v)^{3}\\). Show that \\(A\\) and \\(B\\) are isomorphic.\n",
    "informal_proof": "\nWe construct two series $u_n,v_n$ such that \n$$\n    u_{n+1}-u_n\\in (u,v)^{n+1},\n    v_{n+1}-v_n\\in (u,v)^{n+1},\n    u_{n+1}v_{n+1}-g \\in (u,v)^{n+3}.\n$$\nLet $u_1=u,v_1=v$, then $u_1v_1-(uv+\\delta)\\in (u,v)^3$. Suppose that we have $u_n,v_n$, write $u_{n+1}=u_n+A,v_{n+1}=v_n+B$, $A,B\\in(u,v)^{n+1}$. We need $u_{n+1}v_{n+1}-g=u_{n}v_{n}-g+u_nB+v_nA+AB \\in(u,v)^{n+3}$. It is sufficient to find $A,B$ such that $uA+vB-(u_nv_n-g)\\in (u,v)^{n+3}$. It is obviously such $A,B$ exist so we can construt $u_n,v_n$ inductively and get their limits $u',v'$ satisfying $u'v'=g$. \n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\(k\\) be any field. Suppose that \\(A = k[[x,y]]/(f)\\) and \\(B = k[[u,v]]/(g)\\),\nwhere \\(f = xy\\) and \\(g = uv + \\delta\\) with \\(\\delta \\in (u,v)^{3}\\). Show that \\(A\\) and \\(B\\) are isomorphic.\n-/\ntheorem nonEmpty_ringEquiv_of_sub_in_cube (k : Type) [Field k]\n    (g : MvPowerSeries (Fin 2) k) (hg : g - .X 0 * .X 1 ∈ (Ideal.span {MvPowerSeries.X 0, .X 1}) ^ 3) :\n    Nonempty (((MvPowerSeries (Fin 2) k) ⧸ Ideal.span {(.X 0 * .X 1 : (MvPowerSeries (Fin 2) k))}) ≃+*\n    ((MvPowerSeries (Fin 2) k) ⧸ Ideal.span {g})) := by\n  sorry\n"
  },
  {
    "id": 43,
    "informal_statement": "\nLet $A$ be a reduced Noetherian local ring, $\\mathrm{Char}\\ A = p$. Show that the absolute Frobenius $F_A\\colon A\\to A, a\\mapsto a^p$ is flat if and only if $A$ is regular.\n",
    "informal_proof": "\n\nIf $A$ is regular, its completion $\\widehat A \\cong k[[x_1,...,x_n]]$ by Cohen's structure theorem (where $k$ is the residue field of $A$). Flatness of $F_{\\hat A}$ can be checked directly. Then by faithfully flat descent along $A \\to \\hat A$, the map $F_A$ is also flat. \n\nConversely, assume $F_A$ is flat, then so are $F_A^e$ for all $e \\in \\mathbb{Z}_+$. This amounts to saying $A$ is flat over $A^{p^e}$. Let $x_1, \\dots, x_n$ be a minimal system of generators for $\\mathfrak{m}$. For each $e \\in \\mathbb{N}$, define $\\mathfrak{m}^{[p^e]} = \\mathfrak{m} \\cap A^{p^e}, \\quad \\mathfrak{q}_e = \\mathfrak{m}^{[p^e]} A$. Since $A$ is flat over $A^{p^e}$, we have $\\mathfrak{q}_e \\cong \\mathfrak{m}^{[p^e]} \\otimes_{A^{p^e}} A$.\n\nConsider the $R/\\mathfrak{q}_e$-module $\\mathfrak{q}_e / \\mathfrak{q}_e^2 \\cong \\left( \\mathfrak{m}^{[p^e]} / (\\mathfrak{m}^{[p^e]})^2 \\right) \\otimes_{A^{p^e}} A$. \nThe right-hand side is a free $A/\\mathfrak{q}_e$-module because $\\mathfrak{m}^{[p^e]} / (\\mathfrak{m}^{[p^e]})^2$ is free over $A^{p^e}/\\mathfrak{m}^{[p^e]}$. Thus $x_1^{p^e}, \\dots, x_n^{p^e}$ are independent elements in the sense of \\href{https://link.springer.com/article/10.1007/BF02391765}{Lech}. \n\nBy Lech's Lemma 3, all monomials $x_1^{\\alpha_1} \\cdots x_n^{\\alpha_n}$ with $1 \\leq \\alpha_i \\leq p^e$ are independent. Then by Lech's Lemma 4, \n\\[\n\\ell_A(A / \\mathfrak{q}_e) = \\ell_{\\widehat{A}}\\left( \\widehat{A} / (x_1^{p^e}, \\dots, x_n^{p^e}) \\right) = p^{e n}\n\\]\nfor all $e \\in \\mathbb{N}$.\n\nBy Cohen's structure theorem, we can write $\\widehat{A} = k[[X_1, \\dots, X_n]] / \\mathfrak{a}$. We have\n\\[\n\\ell_{k[[X_1,\\dots,X_n]]}\\left( k[[X_1,\\dots,X_n]] / (X_1^{p^e}, \\dots, X_n^{p^e}) \\right) = p^{e n}.\n\\]\nComparing the two formulas above, we must have $\\mathfrak{a} = 0$, so $\\widehat{A} \\cong k[[X_1, \\dots, X_n]]$. Thus $A$ is regular.\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing\n\n/-- A commutative local noetherian ring $R$ is regular if $\\dim m/m^2 = \\dim R$. -/\nclass IsRegularLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  reg : Module.finrank (ResidueField R) (CotangentSpace R) = ringKrullDim R\n\n/--\nLet $A$ be a reduced Noetherian local ring, $\\mathrm{Char}\\ A = p$.\nShow that the absolute Frobenius $F_A\\colon A\\to A, a\\mapsto a^p$ is flat if and only if $A$ is regular.-/\ntheorem IsRegularLocalRing.frobenius_flat {A : Type} [CommRing A] [IsNoetherianRing A]\n    [IsLocalRing A] [IsReduced A] (p : ℕ) [Fact p.Prime] [CharP A p] :\n    (frobenius A p).Flat ↔ IsRegularLocalRing A := by\n  sorry\n"
  },
  {
    "id": 44,
    "informal_statement": "\nLet \\( k \\) be a field, and set \\( A = k[X, Y, Z]/(X^2 - Y^2, Y^2 - Z^2, XY, YZ, ZX) \\). Show that \\( A \\) is not a global complete intersection.\n",
    "informal_proof": "\nWe will prove that the minimal number of generators of the ideal $I$, denoted $\\mu(I)$, is not equal to its height, $\\text{ht}(I)$.\n\n\\paragraph{Step 1: The Radical and Prime Ideals over $I$}\nLet $P$ be the maximal ideal $(X, Y, Z)$ in $R$. We first show that the radical of $I$ is $P$.\nWe can express powers of the variables in terms of the generators of $I$:\n\\begin{align*}\n    X^3 &= X(X^2 - Y^2) + Y(XY) \\\\\n    Y^3 &= Y(Y^2 - Z^2) + Z(YZ) \\\\\n    Z^3 &= Z(Y^2) - Z(Y^2-Z^2) = Y(YZ) - Z(Y^2-Z^2)\n\\end{align*}\nSince each term on the right-hand side of these equations is in $I$, it follows that $X^3, Y^3, Z^3 \\in I$. By the definition of the radical ideal, this implies that $X, Y, Z \\in \\sqrt{I}$. Therefore, the ideal they generate, $P=(X,Y,Z)$, is contained in $\\sqrt{I}$.\n\nConversely, every generator of $I$ is a homogeneous polynomial of degree 2, and thus has no constant term. This means every generator lies in $P$. Therefore, $I \\subseteq P$. Since $P$ is a prime ideal, taking radicals gives $\\sqrt{I} \\subseteq \\sqrt{P} = P$.\n\nCombining these two inclusions, we have shown that $\\sqrt{I} = P$.\nThis has a crucial consequence: if $\\mathfrak{q}$ is any prime ideal containing $I$, then it must also contain $\\sqrt{I} = P$. Since $P$ is a maximal ideal, the only such prime ideal is $P$ itself. Thus, $P$ is the unique prime ideal containing $I$.\n\n\\paragraph{Step 2: The Height of $I$}\nThe height of an ideal is the minimum of the heights of the prime ideals containing it. Since $P$ is the only prime ideal containing $I$, we have:\n$$ \\text{ht}(I) = \\text{ht}(P) = \\text{ht}(X,Y,Z) = 3 $$\n\n\\paragraph{Step 3: Proof by Contradiction}\nWe now proceed by contradiction. Assume that $R/I$ is a global complete intersection. This would mean that the ideal $I$ can be generated by a number of elements equal to its height.\n$$ \\mu(I) = \\text{ht}(I) = 3 $$\nClearly $I/PI$ is an $R/P$-vector space. Since $k\\cong R/P$, our assumption implies:\n$$ \\dim_k(I/PI) \\leq 3 $$\n\n\\paragraph{Step 4: A Vector Space Surjection}\nLet $M$ be the ideal of $R$ generated by all homogeneous polynomials of degree 3. That is, $M = P^3$.\nThe generators of $I$ are all homogeneous of degree 2, and the generators of $P$ are homogeneous of degree 1. Therefore, any generator of the ideal $PI$ is a product of a degree 1 and a degree 2 polynomial, resulting in a homogeneous polynomial of degree 3. This shows that $PI \\subseteq M$.\nSince $PI \\subseteq I$ by definition, we have the inclusion $PI \\subseteq I \\cap M$.\n\nThis inclusion gives rise to a natural surjective homomorphism of $k$-vector spaces:\n$$ \\phi: I/PI \\to I/(I \\cap M) $$\nThe surjectivity implies that the dimension of the codomain cannot be greater than the dimension of the domain:\n$$ \\dim_k(I/(I \\cap M)) \\le \\dim_k(I/PI) \\leq 3. $$\n\n\\paragraph{Step 5: Deriving the Contradiction}\nWe will now calculate the dimension of $I/(I \\cap M)$ directly.\nThe ideal $I$ is generated by five homogeneous polynomials of degree 2:\n$$ f_1 = X^2 - Y^2, \\quad f_2 = Y^2 - Z^2, \\quad f_3 = XY, \\quad f_4 = YZ, \\quad f_5 = ZX $$\nThe ideal $I$ is a graded ideal, $I = \\bigoplus_{d \\ge 2} I_d$, where $I_d$ is the vector space of homogeneous polynomials of degree $d$ in $I$.\nThe ideal $M = P^3$ consists of all polynomials whose terms are of degree 3 or higher. Thus, the intersection $I \\cap M$ consists of all elements of $I$ that are in $M$. For a graded ideal like $I$, this means $I \\cap M = \\bigoplus_{d \\ge 3} I_d$.\nThe quotient space is therefore:\n$$ I/(I \\cap M) = \\left( \\bigoplus_{d \\ge 2} I_d \\right) / \\left( \\bigoplus_{d \\ge 3} I_d \\right) \\cong I_2 $$\nSo, the dimension we need to compute is simply the dimension of the vector space of degree-2 polynomials in $I$.\nThis space, $I_2$, is spanned by the five generators $\\{f_1, f_2, f_3, f_4, f_5\\}$. These five polynomials are linearly independent over $k$, as they involve distinct basis monomials from the space of all degree-2 polynomials.\nTherefore, the dimension of this space is 5.\n$$ \\dim_k(I/(I \\cap M)) = \\dim_k(I_2) = 5 $$\n\n\\paragraph{Conclusion}\nOur assumption that $R/I$ is a complete intersection led us to the conclusion that $\\dim_k(I/(I \\cap M)) \\le 3$. However, a direct calculation shows that this dimension is exactly 5.\nThe statement $5 \\le 3$ is a clear contradiction.\nTherefore, our initial assumption must be false. We conclude that $\\mu(I) \\ne 3$. Since $\\text{ht}(I)=3$, the ring $R/I$ is not a global complete intersection.\n\n",
    "formal_statement": "import Mathlib\n\nopen MvPolynomial\n\n/-- Let $k$ be a field. Let $S$ be a finite type $k$-algebra. We say that $S$ is a\n  \\textit{global complete intersection over $k$} if there exists a presentation\n  $S = k[x_1, \\dots, x_n]/(f_1, \\dots, f_c)$ such that $\\dim(S) = n - c$. -/\nclass IsGlobalCompleteIntersection (k : Type) [Field k] (S : Type) [CommRing S] [Algebra k S] :\n    Prop extends Algebra.FiniteType k S where\n  isGlobalCompleteIntersection : ∃ n : ℕ, ∃ rs : List (MvPolynomial (Fin n) k),\n    Nonempty (S ≃ₐ[k] (MvPolynomial (Fin n) k) ⧸ Ideal.ofList rs) ∧ ringKrullDim S + rs.length = n\n\n/--\nLet \\( k \\) be a field, and set \\( A = k[X, Y, Z]/(X^2 - Y^2, Y^2 - Z^2, XY, YZ, ZX) \\).\nShow that \\( A \\) is not a global complete intersection. -/\ntheorem quot_x2_sub_y2_y2_sub_z2_xy_yz_zx_not_global_complete_intersection (k : Type) [Field k] :\n    ¬ IsGlobalCompleteIntersection k (MvPolynomial (Fin 3) k ⧸ Ideal.span\n    ({(X 0)^ 2 - (X 1)^2, (X 1)^2 - (X 2)^2, (X 0) * (X 1), (X 1) * (X 2), (X 2) * (X 0)} :\n    Set (MvPolynomial (Fin 3) k))) := by\n  sorry\n"
  },
  {
    "id": 45,
    "informal_statement": "\nLet $k$ be a field and $A = k[x_1, \\dots, x_r]$ the polynomial ring in $r$ variables. Let $M$ be a graded module over $A$, and let\n\\[\n0 \\to K \\to L_{r-1} \\to \\cdots \\to L_0 \\to M \\to 0\n\\]\nbe an exact sequence of graded homomorphisms of graded modules, such that $L_0, \\dots, L_{r-1}$ are free. Then $K$ is free. {Gradings of modules are by $\\mathbb{Z}_{\\geq 0}$.}\n",
    "informal_proof": "\n\nThis is the graded version of the Hibert syzygy theorem. \n\nBy dimension shifting of the Tor functor, we deduce from the exact sequence that $\\text{Tor}^A_1(K,k) = \\text{Tor}^A_{1+r}(M,k) = 0$ since $A$ has global dimension $r$. \n\nLet $I = (x_1,...,x_n)$ and consider the graded vector space $K/IK$ over $k = A/I$. Choose homogeneous elements $v_i$ of $K$ whose reduction modulo $I$ give a basis of the vector space $K/IK$. Let $F = A[x_i]$ be the graded free module generated by symbols $x_i$ with $\\deg x_i = \\deg v_i$, then we have an exact sequence\n\\[\n0 \\to L \\to F \\to K \\to 0\n\\]\nof graded modules, whose reduction modulo $I$ becomes\n\\[\n\\text{Tor}^A_1(K,k) \\to L/IL \\to F/IF \\to K/IK \\to 0.\n\\]\n\nSince $F/IK \\cong K/IK$ by construction and $\\text{Tor}^A_1(K,k)=0$, we deduce $L/IL = 0$. Since $L$ is nonpositively graded, we must have $L = 0$ by repeatively writing $x \\in L$ as $x = \\sum a_j x_j$ with $a_j \\in I, x_j \\in L$ (hence $\\deg x_j < \\deg x$), so that $K = F$ is free. \n\n",
    "formal_statement": "import Mathlib\n\n/--\nA linear map `f` between graded modules is a graded homomorphism if it respects the\ngrading structure.\n-/\ndef IsGradedHom {R M N ι : Type} [CommRing R] [AddCommGroup M] [AddCommGroup N]\n    [Module R M] [Module R N] (𝓜 : ι → Submodule R M) (𝒩 : ι → Submodule R N)\n    (f : M →ₗ[R] N) : Prop := ∀ (i : ι) (x : 𝓜 i), f x ∈ 𝒩 i\n\n/--\nLet $k$ be a field and $A = k[x_1, \\dots, x_r]$ the polynomial ring in $r$ variables. Let $M$ be a graded module over $A$, and let\n\\[\n0 \\to K \\to L_{r-1} \\to \\cdots \\to L_0 \\to M \\to 0\n\\]\nbe an exact sequence of graded homomorphisms of graded modules, such that $L_0, \\dots, L_{r-1}$ are free. Then $K$ is free. {Gradings of modules are by $\\mathbb{Z}_{\\geq 0}$.}\n-/\ntheorem free_of_free_resolution {k : Type} [Field k] {r : ℕ}\n    (C : ChainComplex (ModuleCat.{0} (MvPolynomial (Fin r) k)) ℕ)\n    (hC : ∀ (n : ℕ), n > (r + 1) → CategoryTheory.Limits.IsZero (C.X n))\n    (𝓜 : ∀ (n : ℕ), (ℕ → Submodule (MvPolynomial (Fin r) k) (C.X n)))\n    [hM : ∀ (n : ℕ), DirectSum.Decomposition (𝓜 n)]\n    [hM' : ∀ (n : ℕ), SetLike.GradedSMul (MvPolynomial.homogeneousSubmodule (Fin r) k) (𝓜 n)]\n    (h_exact : C.Acyclic)\n    (h_gr : ∀ (i j : ℕ), IsGradedHom (𝓜 i) (𝓜 j) (C.d i j).hom)\n    (h_free : ∀ (n : ℕ), 1 ≤ n ∧ n ≤ r → Module.Free (MvPolynomial (Fin r) k) (C.X n)) :\n    Module.Free (MvPolynomial (Fin r) k) (C.X (r + 1)) := by\n  sorry\n"
  },
  {
    "id": 46,
    "informal_statement": "\nLet \\(M\\) be an \\(R\\)-module. Then \\(M\\) is flat if and only if the following condition holds: if \\(P\\) is a finitely presented \\(R\\)-module and \\(f: P \\to M\\) a \\(R\\)-linear map, then there is a free finite \\(R\\)-module \\(F\\) and module maps \\(h: P \\to F\\) and \\(g: F \\to M\\) such that \\(f = g \\circ h\\).\n",
    "informal_proof": "\nWe prove a stronger version. Let \\(R\\) be a ring and let \\(M\\) be an \\(R\\)-module. The following are equivalent:\n\\begin{enumerate}\n    \\item \\(M\\) is flat.\n    \\item If \\(f: R^n \\to M\\) is a module map and \\(x \\in \\operatorname{Ker}(f)\\), then there exist module maps \\(h: R^n \\to R^m\\) and \\(g: R^m \\to M\\) such that \\(f = g \\circ h\\) and \\(x \\in \\operatorname{Ker}(h)\\).\n    \\item Suppose \\(f: R^n \\to M\\) is a module map, \\(N \\subset \\operatorname{Ker}(f)\\) any submodule, and \\(h: R^n \\to R^m\\) a map such that \\(N \\subset \\operatorname{Ker}(h)\\) and \\(f\\) factors through \\(h\\). Then given any \\(x \\in \\operatorname{Ker}(f)\\) we can find a map \\(h': R^n \\to R^{m'}\\) such that \\(N + Rx \\subset \\operatorname{Ker}(h')\\) and \\(f\\) factors through \\(h'\\).\n    \\item If \\(f: R^n \\to M\\) is a module map and \\(N \\subset \\operatorname{Ker}(f)\\) is a finitely generated submodule, then there are module maps \\(h: R^n \\to R^m\\) and \\(g: R^m \\to M\\) such that \\(f = g \\circ h\\) and \\(N \\subset \\operatorname{Ker}(h)\\).\n\\end{enumerate}\nThat (1) is equivalent to (2) is just a reformulation of the equational criterion for flatness, which says that $M$ is flat if and only if every relation in \\(M\\) is trivial. \nAssume \\(M\\) is flat and let \\(\\sum f_i x_i = 0\\) be a relation in \\(M\\). Let \\(I = (f_1, \\dots, f_n)\\), and let \\(K = \\operatorname{Ker}(R^n \\to I, (a_1, \\dots, a_n) \\mapsto \\sum_i a_i f_i)\\). So we have the short exact sequence \\(0 \\to K \\to R^n \\to I \\to 0\\). Then \\(\\sum f_i \\otimes x_i\\) is an element of \\(I \\otimes_R M\\) which maps to zero in \\(R \\otimes_R M = M\\). By flatness \\(\\sum f_i \\otimes x_i\\) is zero in \\(I \\otimes_R M\\). Thus there exists an element of \\(K \\otimes_R M\\) mapping to \\(\\sum e_i \\otimes x_i \\in R^n \\otimes_R M\\) where \\(e_i\\) is the i-th basis element of \\(R^n\\). Write this element as \\(\\sum k_j \\otimes y_j\\) and then write the image of \\(k_j\\) in \\(R^n\\) as \\(\\sum a_{ij} e_i\\) to get the result.\n\nAssume every relation is trivial, let \\(I\\) be a finitely generated ideal, and let \\(x = \\sum f_i \\otimes x_i\\) be an element of \\(I \\otimes_R M\\) mapping to zero in \\(R \\otimes_R M = M\\). This just means exactly that \\(\\sum f_i x_i = 0\\) is a relation in \\(M\\). And the fact that it is trivial implies easily that \\(x\\) is zero, because\n\\begin{align*}\nx &= \\sum_i f_i \\otimes x_i \\\\\n  &= \\sum_i f_i \\otimes \\left(\\sum_j a_{ij} y_j\\right) \\\\\n  &= \\sum_j \\left(\\sum_i f_i a_{ij}\\right) \\otimes y_j \\\\\n  &= 0\n\\end{align*}\n\nTo show (2) implies (3), let \\(g: R^m \\to M\\) be the map such that \\(f\\) factors as \\(f = g \\circ h\\). By (2) find \\(h'': R^m \\to R^{m'}\\) such that \\(h''\\) kills \\(h(x)\\) and \\(g: R^m \\to M\\) factors through \\(h''\\). Then taking \\(h' = h'' \\circ h\\) works. (3) implies (4) by induction on the number of generators of \\(N \\subset \\operatorname{Ker}(f)\\) in (4). Clearly (4) implies (2).\n\nThe result we want is just a reformulation of condition (1) equivalent to condition (4).\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\(M\\) be an \\(R\\)-module. Then \\(M\\) is flat if and only if the following condition holds:\nif \\(P\\) is a finitely presented \\(R\\)-module and \\(f: P \\to M\\) a \\(R\\)-linear map,\nthen there is a free finite \\(R\\)-module \\(F\\) and module maps \\(h: P \\to F\\) and \\(g: F \\to M\\) such that \\(f = g \\circ h\\).\n-/\ntheorem module_flat_iff (R : Type) [CommRing R] (M : Type) [AddCommGroup M] [Module R M] :\n    Module.Flat R M ↔\n    ∀ P : Type, ∀ (_ : AddCommGroup P), ∀ (_ : Module R P), ∀ f : P →ₗ[R] M, Module.FinitePresentation R P →\n      ∃ (F : Type) (_ : AddCommGroup F) (_ : Module R F), Module.Finite R F ∧ Module.Free R F ∧\n      ∃ h : P →ₗ[R] F, ∃ g : F →ₗ[R] M, f = g.comp h := by\n  sorry\n"
  },
  {
    "id": 47,
    "informal_statement": "\nShow that the ring \\(A = k[x,y]/(y^{2} - f(x))\\) is a Dedekind domain and the class group of the ring \\(A\\) is not trivial, where \\(k\\) is a field of characteristic not 2, \\(f(x) = (x - t_{1})\\ldots(x - t_{n})\\) with \\(t_{1},\\ldots,t_{n} \\in k\\) distinct and \\(n \\geq 3\\) is an odd integer.\n",
    "informal_proof": "\nThe ring $A = k[x,y]/(y^2 - f(x))$ is the coordinate ring of the affine curve defined by the equation $y^2 = f(x)$. Since $f(x)$ has distinct roots and $\\text{char}(k) \\neq 2$, the curve is non-singular. This implies that the ring $A$ is a Dedekind domain. For a Dedekind domain, the class group, denoted $\\mathrm{Cl}(A)$, is the group of fractional ideals modulo principal fractional ideals. The class group is trivial if and only if $A$ is a Principal Ideal Domain (PID).\n\nTo show that $\\mathrm{Cl}(A)$ is non-trivial, it suffices to exhibit a non-principal ideal. Let us consider the ideal $\\mathfrak{p}_i = (x - t_i, y)$ for any $i \\in \\{1, \\ldots, n\\}$. This is a maximal ideal in $A$ because the quotient $A/\\mathfrak{p}_i \\cong k$ is a field. The ideal $\\mathfrak{p}_i$ corresponds to the point $(t_i, 0)$ on the curve.\n\nLet us compute the square of this ideal, $\\mathfrak{p}_i^2$:\n\\[\n\\mathfrak{p}_i^2 = (x - t_i, y)(x - t_i, y) = ((x-t_i)^2, y(x-t_i), y^2).\n\\]\nIn the ring $A$, we have the relation $y^2 = f(x) = (x - t_i)\\prod_{j \\neq i}(x - t_j)$. Substituting this into the ideal generators, we get:\n\\[\n\\mathfrak{p}_i^2 = ((x-t_i)^2, y(x-t_i), (x - t_i)\\prod_{j \\neq i}(x - t_j)).\n\\]\nWe can see that $(x - t_i)$ is a common factor of all the generators. Since $\\prod_{j \\neq i}(x - t_j)$ and $(x-t_i)$ are coprime polynomials, the ideal simplifies to the principal ideal generated by $(x - t_i)$. Thus, $\\mathfrak{p}_i^2 = (x - t_i)$.\n\nIn the class group $\\mathrm{Cl}(A)$, the class of an ideal $\\mathfrak{a}$ is denoted by $[\\mathfrak{a}]$. The class of any principal ideal is the identity element. From $\\mathfrak{p}_i^2 = (x - t_i)$, we have $[\\mathfrak{p}_i]^2 = [\\mathfrak{p}_i^2] = [(x-t_i)] = 1$. This shows that the class $[\\mathfrak{p}_i]$ is an element of order at most 2 in the class group. If we can show that $\\mathfrak{p}_i$ is not a principal ideal, then $[\\mathfrak{p}_i]$ is a non-trivial element, and thus $\\mathrm{Cl}(A)$ is non-trivial.\n\nWe proceed by contradiction. Assume that $\\mathfrak{p}_i$ is a principal ideal, so $\\mathfrak{p}_i = (\\alpha)$ for some element $\\alpha \\in A$.\nAn element $\\alpha \\in A$ can be written in the form $\\alpha = a(x) + b(x)y$, where $a(x), b(x) \\in k[x]$.\nIf $\\mathfrak{p}_i = (\\alpha)$, then $\\mathfrak{p}_i^2 = (\\alpha^2)$. We have already shown that $\\mathfrak{p}_i^2 = (x - t_i)$, so it must be that $(\\alpha^2) = (x - t_i)$. This implies that $\\alpha^2 = c(x - t_i)$ for some unit $c \\in A^\\times$. The units in $A$ are the non-zero constants from the field $k$, so $c \\in k^\\times$.\n\nLet's compute $\\alpha^2$:\n\\[\n\\alpha^2 = (a(x) + b(x)y)^2 = a(x)^2 + 2a(x)b(x)y + b(x)^2 y^2.\n\\]\nSubstituting $y^2 = f(x)$, we get:\n\\[\n\\alpha^2 = a(x)^2 + b(x)^2 f(x) + 2a(x)b(x)y.\n\\]\nEquating our two expressions for $\\alpha^2$, we have:\n\\[\na(x)^2 + b(x)^2 f(x) + 2a(x)b(x)y = c(x - t_i).\n\\]\nSince $\\{1, y\\}$ is a basis for $A$ as a $k[x]$-module, we can equate the coefficients of $y$:\n\\begin{align}\n2a(x)b(x) &= 0 \\label{eq:1} \\\\\na(x)^2 + b(x)^2 f(x) &= c(x - t_i) \\label{eq:2}\n\\end{align}\nFrom \\eqref{eq:1}, since $\\text{char}(k) \\neq 2$, we must have either $a(x)=0$ or $b(x)=0$. We analyze these two cases.\n\n\\textbf{Case 1: $b(x) = 0$.}\nEquation \\eqref{eq:2} becomes $a(x)^2 = c(x - t_i)$.\nThe degree of the left side with respect to $x$ is $2 \\deg(a(x))$, which is an even integer. The degree of the right side is $1$. This is a contradiction, as an even number cannot equal 1.\n\n\\textbf{Case 2: $a(x) = 0$.}\nEquation \\eqref{eq:2} becomes $b(x)^2 f(x) = c(x - t_i)$.\nWe can write this as $b(x)^2 (x - t_i)\\prod_{j \\neq i}(x-t_j) = c(x - t_i)$. Since $A$ is an integral domain, we can cancel the term $(x-t_i)$ to get:\n\\[\nb(x)^2 \\prod_{j \\neq i}(x-t_j) = c.\n\\]\nLet us compare the degrees of the polynomials on both sides. The degree of the right side is $\\deg(c) = 0$. The degree of the left side is $2\\deg(b(x)) + (n-1)$.\nTherefore, we must have $2\\deg(b(x)) + (n-1) = 0$.\nSince $b(x)$ is a polynomial, $\\deg(b(x)) \\geq 0$. We are given that $n \\geq 3$ is an odd integer, so $n-1 \\geq 2$ is a positive even integer. Thus, $2\\deg(b(x)) + (n-1) > 0$. This leads to a contradiction.\n\nSince both cases lead to a contradiction, our initial assumption that $\\mathfrak{p}_i$ is a principal ideal must be false. Therefore, $\\mathfrak{p}_i$ is a non-principal ideal, and its class $[\\mathfrak{p}_i]$ is a non-trivial element in $\\mathrm{Cl}(A)$. Consequently, the class group $\\mathrm{Cl}(A)$ is non-trivial.\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nThe ring \\(A = k[x,y]/(y^{2} - f(x))\\),\nwhere \\(k\\) is a field and \\(f(x) = (x - t_{1})\\ldots(x - t_{n})\\).\n-/\nabbrev A {k : Type} [Field k] {n : ℕ} (t : (Fin n) → k) : Type := (MvPolynomial (Fin 2) k) ⧸ Ideal.span {(.X 1 ^ 2) - ∏ (m : Fin n), (.X 0 - .C (t m) : (MvPolynomial (Fin 2) k))}\n\n\n/--\nShow that the ring \\(A = k[x,y]/(y^{2} - f(x))\\) is a Dedekind domain and the class group of the ring \\(A\\) is not trivial,\nwhere \\(k\\) is a field of characteristic not 2, \\(f(x) = (x - t_{1})\\ldots(x - t_{n})\\)\nwith \\(t_{1},\\ldots,t_{n} \\in k\\) distinct and \\(n \\geq 3\\) is an odd integer.-/\ntheorem isEmpty_isomorphism_UFD_of_quotient (k : Type) [Field k] (h_char : ¬ CharP k 2)\n    (n : ℕ) (h_ge : n ≥ 3) (h_odd : Odd n) (t : (Fin n) → k) (h_inj : Function.Injective t) :\n    ∃ _ : IsDedekindDomain (A t), Nontrivial (ClassGroup (A t)) := by\n  sorry\n"
  },
  {
    "id": 48,
    "informal_statement": "\nA commutative ring \\( A \\) is \\textit{absolutely flat} if every \\( A \\)-module is flat. Prove that \\( A \\) is absolutely flat if and only if every principal ideal is idempotent.\n",
    "informal_proof": "\n``$\\implies$'': Let $I=(x)$ be a principal ideal, then $A/I$ is flat. Then $I\\otimes A/I\\to I\\cdot A/I=0$ is an isomorphism by the flatness of $I$. Moreover, tensoring $I$ to $0\\to I\\to A\\to A/I\\to 0$ implies that $I\\otimes A/I\\simeq I/I^2$. Combining the two aspects, we know that $I=I^2$.\\par\n``$\\Leftarrow$'': It suffices to show that $A/I$ is $A$-flat for any finitely generated ideal $I$: Indeed, if we know this, $Tor_1(A/I,M)$ is trivial for all $A$-modules $M$. Then $M$ are all $A$-flat.\\par\nWe claim that if every principal ideal is idempotent, then $A/I$ is flat for any finitely generated $I$. Choose a generator of $I$. By transitivity of flatness, it suffices to assume that $I=(x)$. For any $f:N\\hookrightarrow M$, if $x^2=ux$, and if $f(n)=xm$, $f(u^{-1}xn)=u^{-1}xf(n)=u^{-1}x^{2}m=xm=f(n)$. This implies the injectivity of $f/xf:N/xN\\to M/xM$, which shows the claim.\n",
    "formal_statement": "import Mathlib\n\n/--\nA commutative ring \\( A \\) is \\textit{absolutely flat} if every \\( A \\)-module is flat.\n-/\nclass IsAbsolutelyFlat (R : Type) [CommRing R] : Prop where\n  out ⦃P : Type⦄ [AddCommGroup P] [Module R P] : Module.Flat R P\n\n/--\nProve that \\( A \\) is absolutely flat if and only if every principal ideal is idempotent.\n-/\ntheorem isAbsolutelyFlat_iff_principal_ideal_idempotent (R : Type) [CommRing R] :\n    IsAbsolutelyFlat R ↔ (∀ I : Ideal R, I.IsPrincipal → I ^ 2 = I) := by\n  sorry\n"
  },
  {
    "id": 49,
    "informal_statement": "\nLet \\( A \\) be a commutative ring. Prove that every principal ideal of \\( A \\) is idempotent if and only if every finitely generated ideal is a direct summand of \\( A \\).\n",
    "informal_proof": "\nWe prove the two implications separately.\n\n\\noindent \\textbf{(2 \\( \\Rightarrow \\) 1):} Assume that every finitely generated ideal is a direct summand of \\( A \\). Let \\( (x) \\) be a principal ideal in \\( A \\). Since \\( (x) \\) is finitely generated (by the single element \\(x\\)), it is a direct summand by our assumption. This means there exists an ideal \\( J \\subseteq A \\) such that \\( A = (x) \\oplus J \\).\n\nA direct summand of a ring with unity is generated by an idempotent element. Therefore, there exists an idempotent \\( e \\in A \\) (i.e., \\( e^2 = e \\)) such that \\( (x) = (e) \\).\nSince \\( x \\in (e) \\), we can write \\( x = ae \\) for some \\( a \\in A \\).\nBecause \\( x \\) generates the ideal, we also have \\( e \\in (x) \\), which implies \\( e = bx \\) for some \\( b \\in A \\).\n\nNow we can write:\n\\[ x = ae = ae^2 = (ae)e = xe \\]\nSubstituting \\( e = bx \\), we get:\n\\[ x = x(bx) = bx^2 \\]\nSince \\( x \\) is a multiple of \\( x^2 \\), we have \\( x \\in (x^2) \\). This implies \\( (x) \\subseteq (x^2) \\). The reverse inclusion, \\( (x^2) \\subseteq (x) \\), is always true. Thus, \\( (x) = (x^2) \\), which shows that the principal ideal \\( (x) \\) is idempotent.\n\n\\vspace{1em}\n\n\\noindent \\textbf{(1 \\( \\Rightarrow \\) 2):} Assume that every principal ideal of \\( A \\) is idempotent. We will first show that this implies every principal ideal is a direct summand generated by an idempotent, and then extend this to all finitely generated ideals by induction.\n\n\\textit{Step 1: Every principal ideal is a direct summand.}\nLet \\( (x) \\) be a principal ideal. By hypothesis, \\( (x) = (x^2) \\). This implies \\( x \\in (x^2) \\), so there exists an element \\( a \\in A \\) such that \\( x = ax^2 \\).\nLet \\( e = ax \\). We show that \\( e \\) is idempotent:\n\\[ e^2 = (ax)^2 = a^2x^2 = a(ax^2) = ax = e \\]\nNext, we show that \\( (x) = (e) \\).\n\\begin{itemize}\n    \\item Since \\( e = ax \\), we have \\( e \\in (x) \\), which implies \\( (e) \\subseteq (x) \\).\n    \\item Since \\( x = ax^2 = (ax)x = ex \\), we have \\( x \\in (e) \\), which implies \\( (x) \\subseteq (e) \\).\n\\end{itemize}\nThus, \\( (x) = (e) \\). An ideal generated by an idempotent \\( e \\) is a direct summand of \\( A \\), because \\( A = (e) \\oplus (1-e) \\). Therefore, every principal ideal is a direct summand.\n\n\\textit{Step 2: Every finitely generated ideal is a direct summand.}\nWe proceed by induction on the number of generators. Let \\( I = (x_1, \\dots, x_n) \\).\n\n\\textit{Base Case (n=1):} As shown in Step 1, any principal ideal \\( (x_1) \\) is generated by an idempotent and is therefore a direct summand.\n\n\\textit{Inductive Hypothesis:} Assume that any ideal generated by \\( n-1 \\) elements is generated by a single idempotent element (and is thus a direct summand).\n\n\\textit{Inductive Step:} Let \\( I = (x_1, \\dots, x_n) \\). Let \\( J = (x_1, \\dots, x_{n-1}) \\). By the inductive hypothesis, there exists an idempotent \\( e \\in A \\) such that \\( J = (e) \\).\nFrom Step 1, we know that the principal ideal \\( (x_n) \\) is also generated by an idempotent; let's call it \\( f \\). So \\( (x_n) = (f) \\).\nThen \\( I = (J, x_n) = (e, f) \\).\n\nLet \\( g = e + f - ef \\). We claim \\( g \\) is an idempotent and \\( (g) = (e,f) \\).\nFirst, \\( g \\) is idempotent:\n\\begin{align*}\n    g^2 &= (e + f - ef)^2 = e^2 + f^2 + (ef)^2 + 2ef - 2e(ef) - 2f(ef) \\\\\n    &= e + f + e^2f^2 + 2ef - 2e^2f - 2ef^2 \\\\\n    &= e + f + ef + 2ef - 2ef - 2ef \\quad (\\text{since } e, f \\text{ are idempotent}) \\\\\n    &= e + f - ef = g\n\\end{align*}\nSecond, we show \\( (g) = (e,f) \\).\n\\begin{itemize}\n    \\item \\( eg = e(e+f-ef) = e^2 + ef - e^2f = e+ef-ef = e \\). Thus \\( e \\in (g) \\).\n    \\item \\( fg = f(e+f-ef) = fe + f^2 - f^2e = fe + f - fe = f \\). Thus \\( f \\in (g) \\).\n    \\item Since \\( e, f \\in (g) \\), the ideal they generate \\( (e,f) \\) must be contained in \\( (g) \\).\n    \\item Conversely, since \\( g = e+f-ef \\), \\( g \\) is a linear combination of elements in \\( (e,f) \\), so \\( g \\in (e,f) \\), which implies \\( (g) \\subseteq (e,f) \\).\n\\end{itemize}\nTherefore, \\( I = (e,f) = (g) \\), where \\( g \\) is idempotent. As established, any ideal generated by an idempotent is a direct summand of \\( A \\).\n\nBy the principle of induction, every finitely generated ideal of \\( A \\) is a direct summand.\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( A \\) be a commutative ring. Prove that every principal ideal of \\( A \\) is idempotent\nif and only if every finitely generated ideal is a direct summand of \\( A \\).\n-/\ntheorem principal_ideal_idempotent_iff_fg_ideal_is_direct_summand (A : Type) [CommRing A] :\n    (∀ I : Ideal A, I.IsPrincipal → I ^ 2 = I) ↔\n    (∀ I : Ideal A, I.FG → (∃ J : Ideal A, I ⊔ J = ⊤ ∧ I ⊓ J = ⊥ )) := by\n  sorry\n"
  },
  {
    "id": 50,
    "informal_statement": "\nLet \\((A, \\mathfrak{m}, K)\\) be a complete local ring containing a field, and suppose that \\(\\mathfrak{m}\\) is finitely generated over \\(A\\). Then \\(A\\) is Noetherian.\n",
    "informal_proof": "\nThis is the special case of the following proposition:\nLet \\(A\\) be a ring and \\(I\\) be an ideal of \\(A\\). If \\(A\\) is complete with respect to the \\(I\\)-adic filtration, \\(I\\) is finitely generated, and the quotient ring \\(A/I\\) is Noetherian, then \\(A\\) is Noetherian.\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\((A, \\mathfrak{m}, K)\\) be a complete local ring containing a field,\nand suppose that \\(\\mathfrak{m}\\) is finitely generated over \\(A\\). Then \\(A\\) is Noetherian.\n-/\ntheorem isNoetherianRing_of_isLocalRing_of_field_inj_of_adicComplete_of_maximalIdeal_finite\n    (R : Type) [CommRing R] [IsLocalRing R] [IsAdicComplete (IsLocalRing.maximalIdeal R) R]\n    (k : Type) [Field k] [Algebra k R] [NoZeroSMulDivisors k R]\n    (hfg : (IsLocalRing.maximalIdeal R).FG) : IsNoetherianRing R := by\n  sorry\n"
  },
  {
    "id": 51,
    "informal_statement": "\nA Noetherian topological ring in which the topology is defined by an ideal contained in the Jacobson radical is called a \\textit{Zariski ring}. Let \\( A \\) be a Noetherian ring, \\( \\mathfrak{a} \\) an ideal of \\( A \\), and \\( \\widehat{A} \\) the \\( \\mathfrak{a} \\)-adic completion of $A$. Prove that \\( \\widehat{A} \\) is faithfully flat over \\( A \\) if and only if \\( A \\) is a Zariski ring for the \\( \\mathfrak{a} \\)-topology.\n",
    "informal_proof": "\n$\\impliedby$: We need to show that for any finitely generated $A$-module $M$, $\\ker(M\\to\\widehat{M})=0$. By Krull's theorem $\\ker(M\\to\\widehat{M})=\\{x\\in M \\mid (1+a)x=0 \\text{ for some }a\\in\\mathfrak{a}\\}$. Since $\\mathfrak{a}\\subset J(A)$ the Jacobson radical, $1+a$ is a unit in $A$, and hence $x$ in the above set must be $0$.\n\n$\\implies$: We need to show that $\\mathfrak{a}\\subset J(A)$. Suppose not, then there is a maximal ideal $\\mathfrak{m}$ of $A$ such that $\\mathfrak{a}\\not\\subset\\mathfrak{m}$. Thus $\\mathfrak{a}+\\mathfrak{m}=A$ and $\\mathfrak{a}^n+\\mathfrak{m}=A$ for any $n\\ge1$. Consider the $A$-module $A/\\mathfrak{m}=:k$, which is a field. The $\\mathfrak{a}$-adic completion $\\widehat{k} = \\widehat{A} \\otimes_A A/\\mathfrak{m} = (\\varprojlim A/\\mathfrak{a}^n) \\otimes_A A/\\mathfrak{m} = \\varprojlim (A/\\mathfrak{a}^n \\otimes_A A/\\mathfrak{m}) = \\varprojlim A/(\\mathfrak{a}^n + \\mathfrak{m}) = \\varprojlim 0 = 0.$ This contradicts that $\\widehat{A}$ is faithfully flat over $A$.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nA Noetherian topological ring in which the topology is defined by an ideal contained in the Jacobson radical is called a \\textit{Zariski ring}.\nLet \\( A \\) be a Noetherian ring, \\( \\mathfrak{a} \\) an ideal of \\( A \\), and \\( \\widehat{A} \\) the \\( \\mathfrak{a} \\)-adic completion of $A$.\nProve that \\( \\widehat{A} \\) is faithfully flat over \\( A \\) if and only if \\( A \\) is a Zariski ring for the \\( \\mathfrak{a} \\)-topology.\n-/\ntheorem adicCompletion_faithfullyFlat_iff (A : Type) [CommRing A] [IsNoetherianRing A]\n    (I : Ideal A) : Module.FaithfullyFlat A (AdicCompletion I A) ↔ I ≤ Ring.jacobson A := by\n  sorry\n"
  },
  {
    "id": 52,
    "informal_statement": "\nLet $R$ be a ring, \\( \\mathfrak{m} \\) is an ideal in the Jacobson radical of \\( R \\), and \\( G_{1}, G_{2} \\in R[x] \\) are polynomials such that $G_1$ is monic. If $G_i \\mod \\mathfrak{m}$ gnerate the unit ideal of $R/\\mathfrak{m}[x]$, then \\( G_{1}, G_{2} \\) together generate the unit ideal of \\( R[x] \\).\n",
    "informal_proof": "\nSince $g_1, g_2$ generate the unit ideal in $S[x]$, there exist $f_1, f_2\\in S[x]$ such that $f_1g_1+f_2g_2=1$. Lift the coefficients of $f_1, f_2$ to $R$ to get $F_1, F_2\\in R[x]$ such that $F_1G_1+F_2G_2=1+\\mathfrak{m}R[x]$. Setting \n$I$ to be the ideal in $R[x]$ generated by $G_1, G_2$, this equation means that $I+\\mathfrak{m}R[x]=R[x]$, and modulo $I$ yields $\\mathfrak{m}(R[x]/I)\\cong(\\mathfrak{m}R[x]+I)/I=R[x]/I$.\n\n% Consider $M=R[x]/I$. Since $G_1$ is a monic polynomial, $R[x]/(G_1)$ is a finitely generated $R$-module and so is $M$. Since $\\mathfrak{m}\\subset J(R)$, $\\mathfrak{m}R[x]\\subset J(R[x])$, and hence $\\mathfrak{m}M\\subset J(M)$. \nBy Nakayama's lemma, $R[x]/I=0$\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $R$ be a ring, \\( \\mathfrak{m} \\) is an ideal in the Jacobson radical of \\( R \\),\nand \\( G_{1}, G_{2} \\in R[x] \\) are polynomials such that $G_1$ is monic.\nIf $G_i \\mod \\mathfrak{m}$ gnerate the unit ideal of $R/\\mathfrak{m}[x]$,\nthen \\( G_{1}, G_{2} \\) together generate the unit ideal of \\( R[x] \\).\n-/\ntheorem generate_unit_ideal_of_quotient (R : Type) [CommRing R] (m : Ideal R)\n    (h_le_jac : m ≤ Ring.jacobson R) (G₁ G₂ : Polynomial R) (h_monic : G₁.Monic)\n    (h_gen : Ideal.span {G₁.map (Ideal.Quotient.mk m), G₂.map (Ideal.Quotient.mk m)} = ⊤) :\n    Ideal.span {G₁, G₂} = ⊤ := by\n  sorry\n"
  },
  {
    "id": 53,
    "informal_statement": "\nLet \\( k \\) be a field, and set \\( A = k[X, Y, Z]/(X^2 - Y^2, Y^2 - Z^2, XY, YZ, ZX) \\). Show that \\( A \\) is Gorenstein.\n",
    "informal_proof": "\n(Sketch) Let \\( R = k[X, Y, Z] \\) be the polynomial ring in three variables over a field \\( k \\), with its standard grading \\( R = \\bigoplus_{d=0}^\\infty R_d \\). Let \\( I \\) be the ideal defined by\n\\[ I = (X^2 - Y^2, Y^2 - Z^2, XY, YZ, ZX). \\]\nThe ring in question is \\( A = R/I \\). Since the generators of \\( I \\) are all homogeneous polynomials of degree 2, \\( I \\) is a homogeneous ideal. Consequently, \\( A \\) inherits the grading from \\( R \\), so \\( A = \\bigoplus_{d=0}^\\infty A_d \\) where \\( A_d = R_d/I_d \\), and \\( I_d = I \\cap R_d \\).\n\nLet \\( x, y, z \\) be the images of \\( X, Y, Z \\) in \\( A \\), respectively. The relations in \\( A \\) are given by:\n\\begin{enumerate}\n    \\item \\( x^2 = y^2 = z^2 \\)\n    \\item \\( xy = yz = zx = 0 \\)\n\\end{enumerate}\n\nLet's determine the graded components of \\( A \\).\n\\begin{itemize}\n    \\item For \\(d=0\\), \\( A_0 = k \\).\n    \\item For \\(d=1\\), \\( A_1 \\) is the \\(k\\)-vector space spanned by \\( \\{x, y, z\\} \\). These are linearly independent, so \\( \\dim_k(A_1) = 3 \\).\n    \\item For \\(d=2\\), \\( A_2 \\) is spanned by the images of degree-2 monomials. Due to the relations, \\( xy = yz = zx = 0 \\) and \\( x^2=y^2=z^2 \\). Let \\( \\omega = x^2 \\). Then \\( A_2 \\) is spanned by \\( \\omega \\). Assuming char(\\(k\\)) \\(\\neq 2\\) is not necessary, but we must check \\( \\omega \\neq 0 \\). If \\( X^2 \\in I \\), then \\( X^2 = p(X,Y,Z)(X^2-Y^2) + q(X,Y,Z)(Y^2-Z^2) + \\dots \\). This is not possible for degree reasons unless the polynomials are constants, which would imply \\(X^2=0\\), a contradiction. Thus, \\( \\omega \\neq 0 \\) and \\( \\dim_k(A_2) = 1 \\).\n    \\item For \\(d=3\\), any monomial of degree 3, e.g., \\( x^3 \\), is zero in \\(A\\). For instance, \\( x^3 = x \\cdot x^2 = x \\cdot y^2 \\). Since \\(XY \\in I\\), we have \\(XY^2 = Y(XY) \\in I\\), which implies \\(xy^2=0\\) in \\(A\\). Therefore \\(x^3=0\\). Similarly, all monomials of degree 3 are zero.\n    \\item Thus, \\( A_d = 0 \\) for all \\( d \\ge 3 \\).\n\\end{itemize}\nThe ring is \\( A = A_0 \\oplus A_1 \\oplus A_2 \\), which is a finite-dimensional, local, graded \\(k\\)-algebra. Such a ring is also an Artinian ring. The highest non-vanishing graded component is \\( A_2 \\), which is the socle of \\(A\\).\n\nA standard result in commutative algebra states that a standard graded Artinian \\( k \\)-algebra \\( A = \\bigoplus_{d=0}^s A_d \\) is Gorenstein if and only if its socle (the last non-zero component \\( A_s \\)) is one-dimensional, i.e., \\( \\dim_k(A_s) = 1 \\), and the multiplication map \\( \\mu: A_i \\times A_{s-i} \\to A_s \\) is a perfect pairing for all \\( 0 \\le i \\le s \\).\n\nIn our case, the socle degree is \\( s=2 \\). We have already established that \\( \\dim_k(A_2) = 1 \\), satisfying the first condition. We must check that the pairing\n\\[ \\mu: A_1 \\times A_1 \\to A_2 \\]\ngiven by multiplication in the ring is a perfect pairing (i.e., non-degenerate).\n\nLet \\( \\{x, y, z\\} \\) be the basis for \\( A_1 \\), and let \\( \\{\\omega\\} \\) be the basis for \\( A_2 \\), where \\( \\omega = x^2 \\). The pairing is a symmetric bilinear form. We can represent this form by its Gram matrix \\( M \\) with respect to the basis \\( \\{x, y, z\\} \\). The entries \\( M_{ij} \\) are the products of the basis vectors.\n\\[\nM_{11} = x \\cdot x = x^2 = \\omega \\\\\nM_{22} = y \\cdot y = y^2 = \\omega \\\\\nM_{33} = z \\cdot z = z^2 = \\omega\n\\]\nand for \\( i \\neq j \\),\n\\[\nM_{12} = x \\cdot y = 0 \\\\\nM_{13} = x \\cdot z = 0 \\\\\nM_{23} = y \\cdot z = 0\n\\]\nIdentifying \\( \\omega \\) with \\( 1 \\in k \\) (as we are interested in the coefficients), the matrix of the bilinear form is the \\( 3 \\times 3 \\) identity matrix:\n\\[ M = \\begin{pmatrix} 1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & 1 \\end{pmatrix}. \\]\nThe determinant of this matrix is 1, which is non-zero in any field \\( k \\). Therefore, the matrix is invertible, and the bilinear form is non-degenerate. This means the pairing \\( A_1 \\times A_1 \\to A_2 \\) is perfect. The other pairings, \\(A_0 \\times A_2 \\to A_2\\) and \\(A_2 \\times A_0 \\to A_2\\), are trivially perfect.\n\nSince the conditions for a graded Artinian algebra to be Gorenstein are satisfied, we conclude that \\( A \\) is a Gorenstein ring.\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing ModuleCat CategoryTheory MvPolynomial\n\ninstance (R : Type) [CommRing R] : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives.{0} (ModuleCat.{0} R)\n\n/-- A Noetherian local ring $R$ is a Gorenstein ring if $\\mathrm{inj}.\\dim_R R < +\\infty$. -/\nclass IsGorensteinLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  injDim_le_infity :\n    ∃ n : ℕ, ∀ i : ℕ, n ≤ i →\n    Subsingleton (Abelian.Ext.{0} (of.{0} R (ResidueField R)) (of.{0} R R) i)\n\n/-- A Noetherian ring is a Gorenstein ring if its localization at every maximal ideal is a\n  Gorenstein local ring. -/\nclass IsGorensteinRing (R : Type) [CommRing R] : Prop extends IsNoetherianRing R where\n  localization_maximal_isGorensteinLocalRing :\n    ∀ m : Ideal R, (_ : m.IsMaximal) → IsGorensteinLocalRing (Localization.AtPrime m)\n\n/--\nLet \\( k \\) be a field, and set \\( A = k[X, Y, Z]/(X^2 - Y^2, Y^2 - Z^2, XY, YZ, ZX) \\).\nShow that \\( A \\) is Gorenstein.-/\ntheorem isGorensteinRing_quot_x2_sub_y2_y2_sub_z2_xy_yz_zx (k : Type) [Field k] :\n    IsGorensteinRing <| MvPolynomial (Fin 3) k ⧸ Ideal.span ({(X 0)^ 2 - (X 1)^2, (X 1)^2 - (X 2)^2,\n    (X 0) * (X 1), (X 1) * (X 2), (X 2) * (X 0)} : Set (MvPolynomial (Fin 3) k)) := by\n  sorry\n"
  },
  {
    "id": 54,
    "informal_statement": "\nLet \\( A \\) be a ring, $\\mathrm{Char}\\ A = 0$. Suppose that \\( x \\in A \\) and \\( D \\in \\operatorname{Der}(A) \\) are such that \\( Dx = 1 \\) and \\( \\bigcap_{n=1}^{\\infty} x^n A = (0) \\). Show that \\( x \\) is a non-zero-divisor of \\( A \\).\n",
    "informal_proof": "\nLet $a\\in A$ with $xa=0$. Applying $D$ we get $0=D(xa)=Dx\\cdot a+x\\cdot Da=a+x\\cdot Da$, so $a=x\\cdot(-Da)$. Letting $a_1=-Da$, we prove by induction that $a=x^na_n$ for some $a_n\\in A$. First note that since $Dx=1$, by induction $D(x^n)=nx^{n-1}$. We compute $$0=D(xa)=D(x^{n+1}a_n)=(n+1)x^na_n+x^{n+1}\\cdot Da_n.$$ Since $A\\supset\\mathbb{Q}$, $n+1$ is invertible in $A$, and thus $a=x^na_n=x^{n+1}(-Da_n/(n+1))$. Therefore we conclude that $a\\in\\cap^{\\infty}_{n=1}x^nA$ and hence $a=0$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( A \\) be a ring, $\\mathrm{Char}\\ A = 0$.\nSuppose that \\( x \\in A \\) and \\( D \\in \\operatorname{Der}(A) \\) are such that \\( Dx = 1 \\) and \\( \\bigcap_{n=1}^{\\infty} x^n A = (0) \\).\nShow that \\( x \\) is a non-zero-divisor of \\( A \\).\n-/\ntheorem not_zero_divisor_of_hausdorff_of_der_eq_one (A : Type) [CommRing A] [CharZero A]\n    (x : A) (D : Derivation ℤ A A) (h_dx : D x = 1) (h_hausdorff : IsHausdorff (Ideal.span {x}) A) :\n    x ∈ nonZeroDivisors A := by\n  sorry\n"
  },
  {
    "id": 55,
    "informal_statement": "\nA module \\( M \\) over a ring \\( R \\) is \\textit{stably free} if there exists a free finitely generated module \\( F \\) over \\( R \\) such that \n\\[\nM \\oplus F\n\\]\nis a free module.\nProve that if $M$ is stably free and not finitely generated then $M$ is free.\n",
    "informal_proof": "\n(Thm A.1 of \\url{https://kconrad.math.uconn.edu/blurbs/linmultialg/stablyfree.pdf})\n\nLet $F := M \\oplus R^k$ be free. We want to show $M$ is free.\nProjection from $F$ onto $M$ is a surjective linear map, so $M$ not being finitely generated implies $F$ is not finitely generated. Let $\\{e_i\\}_{i \\in I}$ be a basis of $F$, so the index set $I$ is infinite.\nProjection from $F$ onto $R^k$ is a surjective linear map $f: F \\to R^k$ with kernel $M$. The standard basis of $R^k$ is in the image of the span of finitely many $e_i$'s, say the submodule $F' := Re_1+\\dots+Re_\\ell$ has $f(F') = R^k$. For each $\\mathbf{v} \\in F$, $f(\\mathbf{v}) = f(\\mathbf{v}')$ for some $\\mathbf{v}' \\in F'$. Then $\\mathbf{v} - \\mathbf{v}' \\in \\ker f = M$, so $F = F' + M$. The module $F'$ is finite free and $F'/(M \\cap F') \\cong R^k$.\nSince $R^k$ is free (and thus a projective module), there is an isomorphism $F' \\cong N \\oplus R^k$ where $N = M \\cap F'$. Since $F' + M = F$, $F/F' \\cong M/N$ and $F/F' = \\bigoplus_{i>\\ell} Re_i$ is free with infinite rank, so we can write $F/F' \\cong R^k \\oplus F''$ for some free $F''$. Therefore $M/N$ is free, so\n$$\nM \\cong N \\oplus (M/N) \\cong N \\oplus (F/F') \\cong N \\oplus R^k \\oplus F'' \\cong F' \\oplus F'',\n$$\nwhich is free.\n",
    "formal_statement": "import Mathlib\n\n/--\nA module \\( M \\) over a ring \\( R \\) is \\textit{stably free} if there exists a free finitely generated module \\( F \\) over \\( R \\) such that\n\\[\nM \\oplus F\n\\]\nis a free module.\n-/\ndef IsStablyFree (R : Type) (M : Type) [CommRing R] [AddCommGroup M] [Module R M] : Prop :=\n    ∃ (N : Type) (_ : AddCommGroup N) (_ : Module R N),\n    Module.Finite R N ∧ Module.Free R N ∧ Module.Free R (M × N)\n\n/--\nProve that if $M$ is stably free and not finitely generated then $M$ is free.\n-/\ntheorem stablyFree_iff_free_of_not_fg (R : Type) (M : Type) [CommRing R] [AddCommGroup M]\n    [Module R M] (h : ¬ Module.Finite R M) : Module.Free R M ↔ IsStablyFree R M := by\n  sorry\n"
  },
  {
    "id": 56,
    "informal_statement": "\nLet \\( R \\to S \\) be a faithfully flat ring map. Let \\( M \\) be an \\( R \\)-module. If the \\( S \\)-module \\( S \\otimes_{R} M \\) is projective, then \\( M \\) is projective.\n",
    "informal_proof": "\n\\href{https://stacks.math.columbia.edu/tag/05A9}{Stacks project, Theorem 05A9}.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( R \\to S \\) be a faithfully flat ring map. Let \\( M \\) be an \\( R \\)-module.\nIf the \\( S \\)-module \\( S \\otimes_{R} M \\) is projective, then \\( M \\) is projective.\n-/\ntheorem projective_of_faithfullyFlat_base_change (R S M : Type) [CommRing R] [CommRing S]\n    [Algebra R S] [Module.FaithfullyFlat R S] [AddCommGroup M] [Module R M]\n    [Module.Projective S (TensorProduct R S M)] : Module.Projective R M := by\n  sorry\n"
  },
  {
    "id": 57,
    "informal_statement": "\nLet \\( A \\) be a domain and \\( K \\) its field of fractions. \\( x \\in K \\) is called almost integral if there exists an element \\( r\\in A, r \\ne 0 \\) such that \\( rx^n \\in A \\) for all \\( n \\ge 0 \\). \\( A \\) is called \\textit{completely integrally closed} if every almost integral element of \\( K \\) is contained in \\( A \\). Show that if \\( A \\) is completely integrally closed, so is \\( A[X] \\).\n",
    "informal_proof": "\n\nThe field of fractions of $A[X]$ is $K(X)$. Suppose that $A$ is completely integrally closed, and let $f(X)=a(X)/b(X)$ be an almost integral element in $K(X)$, with $a(X),b(X)\\in K[X]$ (since $K[X]$ is a PID, we may assume that $(a,b)=(1)$). Then there exists $c(X)\\in A[X]\\setminus \\{0\\}$ such that $c(X)f^n(X)\\in A[X]$ for every $n\\ge 0$. Hence $b(X)$ must be a unit, so we may assume that $b(X)=1$. It remains to show that $a(X)\\in A[X]$. Indeed, if\n\\[a(X)=a_mx^m+a_{m-1}x^{m-1}+\\ldots+a_1x+a_0,\\]\nthen computing the coefficient of the highest term of $c(X)f^n(X)$ shows that $a_m$ is almost integral over $A$; hence it belongs to $A$ by assumption. Since the sum of two almost integral elements is again almost integral, we may replace $a(X)$ by $a(X)-a_mx^m$ and proceed by induction to show $a(X)\\in A[X]$, as desired.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( A \\) be a domain and \\( K \\) its field of fractions.\n\\( x \\in K \\) is called almost integral if there exists an element \\( r\\in A, r \\ne 0 \\) such that \\( rx^n \\in A \\) for all \\( n \\ge 0 \\).\n-/\ndef IsAlmostIntegral {A : Type} [CommRing A] [IsDomain A] (x : FractionRing A) : Prop :=\n  ∃ r : A, r ≠ 0 ∧ ∀ n : ℕ, ∃ y : A, r • (x ^ n) = algebraMap A (FractionRing A) y\n\n/--\n\\( A \\) is called \\textit{completely integrally closed} if every almost integral element of \\( K \\) is contained in \\( A \\).\n-/\ndef IsCompletelyIntegrallyClosed (A : Type) [CommRing A] [IsDomain A] : Prop :=\n  ∀ x : FractionRing A, IsAlmostIntegral x → ∃ y : A, x = algebraMap A (FractionRing A) y\n\n/--\nLet \\( A \\) be a domain. Show that if \\( A \\) is completely integrally closed, so is \\( A[X] \\). -/\ntheorem completely_integrally_closed_polynomial_ring {A : Type} [CommRing A] [IsDomain A]\n    (h : IsCompletelyIntegrallyClosed A) : IsCompletelyIntegrallyClosed (Polynomial A) := by\n  sorry\n"
  },
  {
    "id": 58,
    "informal_statement": "\nSuppose that $(R, \\mathfrak{P})$ is a local Noetherian ring, and let $(S, \\mathfrak{Q})$ be a local Noetherian $R$-algebra such that $\\mathfrak{P}S \\subseteq \\mathfrak{Q}$. If $M$ is a finitely generated $S$-module, show that $M$ is flat as an $R$-module if $M / \\mathfrak{P}^n M$ is flat as an $R / \\mathfrak{P}^n$-module for every $n$.\n",
    "informal_proof": "\n\n\\href{https://stacks.math.columbia.edu/tag/0523}{Stacks project, Lemma 0523}.\n\n",
    "formal_statement": "import Mathlib\n\nopen TensorProduct\n\n/--\nSuppose that $(R, \\mathfrak{P})$ is a local Noetherian ring,\nand let $(S, \\mathfrak{Q})$ be a local Noetherian $R$-algebra such that $\\mathfrak{P}S \\subseteq \\mathfrak{Q}$.\nIf $M$ is a finitely generated $S$-module, show that $M$ is flat as an $R$-module\nif $M / \\mathfrak{P}^n M$ is flat as an $R / \\mathfrak{P}^n$-module for every $n$.-/\ntheorem flat_of_flat_over_quotient (R S : Type) [CommRing R] [CommRing S]\n    [IsLocalRing R] [IsLocalRing S] [IsNoetherianRing R] [IsNoetherianRing S] [Algebra R S]\n    (h_map : Ideal.map (algebraMap R S) (IsLocalRing.maximalIdeal R) ≤ IsLocalRing.maximalIdeal S)\n    (M : Type) [AddCommGroup M] [Module S M] [Module R M] [IsScalarTower R S M] [Module.Finite S M]\n    (h_flat_quotient : ∀ (n : ℕ), Module.Flat (R ⧸ (IsLocalRing.maximalIdeal R) ^ n) ((R ⧸ (IsLocalRing.maximalIdeal R) ^ n) ⊗[R] M)) :\n    Module.Flat R M := by\n  sorry\n"
  },
  {
    "id": 59,
    "informal_statement": "\nLet \\( k \\) be a field, \\( X \\) and \\( Y \\) indeterminates, and suppose that \\( \\alpha \\) is a positive irrational number. Show the map \\( v: k[X, Y] \\rightarrow \\mathbb{R} \\cup \\{\\infty\\} \\) defined by\n\\[\nv\\left(\\sum c_{n,m} X^n Y^m\\right) = \\min\\{n + m\\alpha \\mid c_{n,m} \\neq 0\\}\n\\]\ndetermines a valuation of \\( k(X, Y) \\) with value group \\( \\mathbb{Z} + \\mathbb{Z}\\alpha \\).\n",
    "informal_proof": "\n\nWe verify the multiplicative property: directly let $f=\\sum c_{n,m}X^nY^m$ and let $g=\\sum d_{n,m}X^nY^m$. Let $v(f)=p+q\\alpha$ and $v(g)=r+s\\alpha$. Then $c_{p,q},d_{r,s}\\neq 0$. \n\nWe claim that the coefficient of $X^{p+r}Y^{q+s}$ in $fg$ is exactly $c_{p,q}d_{r,s}$. If $p'+r'=p+r$ and $q'+s'=q+s$, then\n\\[(p'+q'\\alpha)+(r'+s'\\alpha)=(p+q\\alpha)+(r+s\\alpha).\\]\nSuppose that neither $c_{p',q'}$ nor $d_{r',s'}$ are zero (so $c_{p',q'}d_{r',s'}$ contributes to the coefficient of $X^{p+r}Y^{q+s}$ in $fg$). Then $p'+q'\\alpha\\ge p+q\\alpha$ and $r'+s'\\alpha\\ge r+s\\alpha$, so the above equality forces\n\\[p'+q'\\alpha=p+q\\alpha,\\ r'+s'\\alpha=r+s\\alpha.\\]\nSince $\\alpha\\notin\\mathbb{Q}$, we get $p'=p,q'=q,r'=r,s'=s$. This verifies our claim. Moreover, a similar argument shows that the coefficient of $X^tY^u$ in $fg$ is $0$ if $t+u\\alpha<(p+q\\alpha)+(r+s\\alpha)$. Therefore, we get\n\\begin{align*}\nv(fg)=(p+q\\alpha)+(r+s\\alpha)=v(f)v(g),\n\\end{align*}\nas desired.\n\nThe verification of all other properties are trivial.\n\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( k \\) be a field, \\( X \\) and \\( Y \\) indeterminates, and suppose that \\( \\alpha \\) is a positive irrational number.\nShow the map \\( v: k[X, Y] \\rightarrow \\mathbb{R} \\cup \\{\\infty\\} \\) defined by\n\\[\nv\\left(\\sum c_{n,m} X^n Y^m\\right) = \\min\\{n + m\\alpha \\mid c_{n,m} \\neq 0\\}\n\\]\ndetermines a valuation of \\( k(X, Y) \\) with value group \\( \\mathbb{Z} + \\mathbb{Z}\\alpha \\).\n-/\ntheorem exists_unique_valuation_eq (α : ℝ) (h_pos : α > 0) (h_irr : Irrational α)\n    (k : Type) [Field k] : ∃! (v : AddValuation (FractionRing (MvPolynomial (Fin 2) k)) (WithTop ℝ)),\n    ∀ (f : MvPolynomial (Fin 2) k), v (algebraMap _ _ f) = Finset.inf (Finset.image (fun s ↦ ((s 0 + α * s 1) : WithTop ℝ)) f.support) id := by\n  sorry\n"
  },
  {
    "id": 60,
    "informal_statement": "\nLet $R$ be a Noetherian domain, and suppose that for every maximal ideal $P$ of $R$ the ring $R_P$ is factorial. Let $I \\subset R$ be an ideal. Prove that $I$ is an invertible module iff $I$ has pure codimension $1$.\n    (We say that an ideal $I$ in a ring $R$ has pure codimension $1$ if every associated prime ideal of $I$ has codimension $1$. We include the case when $I$ has no associated primes at all---that is, when $I = R$.)\n",
    "informal_proof": "\nWe handle the trivial case first: if $I=R$, then $I$ is invertible. The set of associated primes of $R/R = \\{0\\}$ is empty, so the condition of having pure codimension $1$ is vacuously satisfied. We now assume $I$ is a proper ideal.\n\n\\paragraph{($\\Rightarrow$)} Assume that $I$ is an invertible ideal.\nSince $R$ is a Noetherian domain, $I$ is finitely generated. A finitely generated ideal $I$ in a domain $R$ is invertible if and only if its localization $I_P$ is a principal ideal in $R_P$ for every maximal ideal $P$ of $R$.\nLet $Q$ be an associated prime ideal of $I$. Then $Q \\subseteq P$ for some maximal ideal $P$. By the properties of localization, $Q_P$ is an associated prime of the $R_P$-module $(R/I)_P \\cong R_P/I_P$.\nSince $I$ is invertible, $I_P$ is a non-zero principal ideal in the UFD $R_P$. Let $I_P = (a)$ for some non-unit $a \\in R_P$. In a UFD, the associated primes of a principal ideal $(a)$ are the prime ideals generated by the irreducible factors of $a$. Any prime ideal generated by an irreducible element in a UFD has height $1$.\nThus, $Q_P$ is a prime ideal of height $1$ in $R_P$.\nThe height of a prime ideal $Q$ is preserved upon localization at a prime $P$ containing it; that is, $\\text{ht}(Q) = \\text{ht}(Q_P)$.\nTherefore, $\\text{ht}(Q) = 1$. Since this holds for every associated prime $Q$ of $I$, the ideal $I$ has pure codimension $1$.\n\n\\paragraph{($\\Leftarrow$)} Assume that $I$ has pure codimension $1$.\nTo show that $I$ is invertible, we must show that $I_P$ is a principal ideal for every maximal ideal $P$. Let $P$ be an arbitrary maximal ideal of $R$.\nThe associated primes of the $R_P$-module $R_P/I_P$ are the localizations $Q_P$ of the associated primes $Q$ of $R/I$ such that $Q \\subseteq P$.\nBy our hypothesis, every such $Q$ has height $1$. Therefore, every associated prime of $I_P$ in $R_P$ has height $1$.\nBy assumption, $R_P$ is a UFD. Let $I_P = \\mathfrak{q}_1 \\cap \\dots \\cap \\mathfrak{q}_n$ be a minimal primary decomposition of $I_P$ in $R_P$. The associated primes of $I_P$ are $\\mathfrak{p}_j = \\sqrt{\\mathfrak{q}_j}$ for $j=1, \\dots, n$. We know that each $\\mathfrak{p}_j$ has height $1$.\nIn a UFD, any prime ideal of height $1$ is principal. So, for each $j$, $\\mathfrak{p}_j = (p_j)$ for some irreducible element $p_j \\in R_P$.\nFurthermore, in a UFD, any $(p_j)$-primary ideal must be of the form $(p_j^{e_j})$ for some integer $e_j \\ge 1$. Thus, each primary component $\\mathfrak{q}_j$ of $I_P$ is a principal ideal.\nThe ideal $I_P$ is the intersection of these principal ideals:\n$$ I_P = (p_1^{e_1}) \\cap \\dots \\cap (p_n^{e_n}) $$\nSince the prime ideals $\\mathfrak{p}_j = (p_j)$ are distinct, the elements $p_j$ are non-associate irreducibles. In a UFD, the intersection of such ideals is the principal ideal generated by the product of the generators:\n$$ I_P = (p_1^{e_1} p_2^{e_2} \\cdots p_n^{e_n}) $$\nThis shows that $I_P$ is a principal ideal. Since this holds for every maximal ideal $P$, and $I$ is finitely generated (as $R$ is Noetherian), the ideal $I$ is invertible.\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nFor a Noetherian domain \\( R \\), we say that an ideal \\( I \\subset R \\) is invertible if\nit is it not the zero ideal and there exists an ideal \\( N \\) such that \\( N \\cdot I \\) is principal\nand \\( N \\) is not the zero ideal.\n-/\ndef Ideal.Invertible {R : Type} [CommRing R] [IsDomain R] (I : Ideal R) : Prop :=\n    I ≠ ⊥ ∧ ∃ (N : Ideal R), (N * I).IsPrincipal ∧ N ≠ ⊥\n\n/--\nLet $R$ be a Noetherian domain, and suppose that for every maximal ideal $P$ of $R$ the ring $R_P$ is factorial.\nLet $I \\subset R$ be an ideal. Prove that $I$ is an invertible module iff $I$ has pure codimension $1$.\n(We say that an ideal $I$ in a ring $R$ has pure codimension $1$ if every associated prime ideal of $I$ has codimension $1$. We include the case when $I$ has no associated primes at all---that is, when $I = R$.)\n-/\ntheorem invertible_iff_codimension_one (R : Type) [CommRing R] [IsDomain R] [IsNoetherianRing R]\n    (h_ufd : ∀ (p : Ideal R), (h : p.IsMaximal) → UniqueFactorizationMonoid (Localization.AtPrime p))\n    (I : Ideal R) : I.Invertible ↔ ∀ (p : associatedPrimes R I), ringKrullDim (R ⧸ p.1) = 1 := by\n  sorry\n"
  },
  {
    "id": 61,
    "informal_statement": "\nLet \\( R \\to S \\) be a ring map. Let \\( I \\subset R \\) be an ideal. Assume\n\\begin{enumerate}\n    \\item \\( I^{2} = 0 \\),\n    \\item \\( R \\to S \\) is flat, and\n    \\item \\( R/I \\to S/IS \\) is formally smooth.\n\\end{enumerate}\nShow \\( R \\to S \\) is formally smooth.\n",
    "informal_proof": "\nhttps://stacks.math.columbia.edu/tag/031L\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( R \\to S \\) be a ring map. Let \\( I \\subset R \\) be an ideal. Assume\n\\begin{enumerate}\n    \\item \\( I^{2} = 0 \\),\n    \\item \\( R \\to S \\) is flat, and\n    \\item \\( R/I \\to S/IS \\) is formally smooth.\n\\end{enumerate}\nShow \\( R \\to S \\) is formally smooth.\n-/\ntheorem formallySmooth_of_formallySmooth_quotient (R S : Type) [CommRing R] [CommRing S]\n    [Algebra R S] [Module.Flat R S] (I : Ideal R) (h : I ^ 2 = 0)\n    [Algebra.FormallySmooth (R ⧸ I) (S ⧸ (I.map (algebraMap R S)))] :\n    Algebra.FormallySmooth R S := by\n  sorry\n"
  },
  {
    "id": 62,
    "informal_statement": "\nLet \\( \\varphi: R \\to S \\) be a smooth ring map. Let \\( \\sigma: S \\to R \\) be a left inverse to \\( \\varphi \\). Set \\( I = \\operatorname{Ker}(\\sigma) \\). If \\( I / I^{2} \\) is free, show \\( S^{\\wedge} \\cong R[[t_{1}, \\ldots, t_{d}]] \\) as \\( R \\)-algebras, where \\( S^{\\wedge} \\) is the \\( I \\)-adic completion of \\( S \\).\n",
    "informal_proof": "\nhttps://stacks.math.columbia.edu/tag/05D4\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( \\varphi: R \\to S \\) be a smooth ring map. Let \\( \\sigma: S \\to R \\) be a left inverse to \\( \\varphi \\).\nSet \\( I = \\operatorname{Ker}(\\sigma) \\). If \\( I / I^{2} \\) is free,\nshow \\( S^{\\wedge} \\cong R[[t_{1}, \\ldots, t_{d}]] \\) as \\( R \\)-algebras,\nwhere \\( S^{\\wedge} \\) is the \\( I \\)-adic completion of \\( S \\).\n-/\ntheorem adicCompletion_equiv_of_smooth (R S : Type) [CommRing R] [CommRing S]\n    [Algebra R S] [Algebra.Smooth R S] (σ : S →+* R)\n    (h : Function.LeftInverse σ (algebraMap R S)) (hf : Module.Free R σ.ker.Cotangent) :\n    ∃ d : ℕ, Nonempty (AdicCompletion (RingHom.ker σ) S ≃ₐ[R] MvPowerSeries (Fin d) R) := by\n  sorry\n"
  },
  {
    "id": 63,
    "informal_statement": "\nLet \\( R \\to S \\) be a formally unramified ring map. Show there exists a surjection of \\( R \\)-algebras \\( S' \\to S \\) whose kernel is an ideal of square zero with the following universal property:\nGiven any commutative diagram\n\\[\n\\begin{tikzcd}\nS \\arrow[r, \"a\"] & A/I \\\\\nR \\arrow[u] \\arrow[r, \"b\"] & A \\arrow[u]\n\\end{tikzcd}\n\\]\nwhere \\( I \\subset A \\) is an ideal of square zero, there is a unique \\( R \\)-algebra map \\( \\alpha': S' \\to A \\) such that \\( S' \\to A \\to A/I \\) is equal to \\( S' \\to S \\to A/I \\).\n",
    "informal_proof": "\n\\url{http://math.uchicago.edu/~amathew/chetale.pdf} Lemma 1.15\n",
    "formal_statement": "import Mathlib\n\n/--\nThe universal property:\nGiven any commutative diagram\n\\[\n\\begin{tikzcd}\nS \\arrow[r, \"a\"] & A/I \\\\\nR \\arrow[u] \\arrow[r, \"b\"] & A \\arrow[u]\n\\end{tikzcd}\n\\]\nwhere \\( I \\subset A \\) is an ideal of square zero, there is a unique \\( R \\)-algebra map \\( \\alpha': S' \\to A \\) such that \\( S' \\to A \\to A/I \\) is equal to \\( S' \\to S \\to A/I \\).\n-/\ndef UniversalProperty.liftOfSqZeroIdeal {R S S' : Type} [CommRing R] [CommRing S] [CommRing S']\n    [Algebra R S] [Algebra R S'] (f : S' →ₐ[R] S) :=\n  ∀ (A : Type) [CommRing A] [Algebra R A] (I : Ideal A) (g : S →ₐ[R] A⧸I),\n  I^2 = 0 → (g.toRingHom.comp (algebraMap R S) = (Ideal.Quotient.mk I).comp (algebraMap R A)) →\n  ∃! (g' : S' →ₐ[R] A), (Ideal.Quotient.mk I).comp g'.toRingHom  = g.comp f\n\n/--\nLet \\( R \\to S \\) be a formally unramified ring map. Show there exists a surjection of \\( R \\)-algebras \\( S' \\to S \\) whose kernel is an ideal of square zero with the following universal property:\nGiven any commutative diagram\n\\[\n\\begin{tikzcd}\nS \\arrow[r, \"a\"] & A/I \\\\\nR \\arrow[u] \\arrow[r, \"b\"] & A \\arrow[u]\n\\end{tikzcd}\n\\]\nwhere \\( I \\subset A \\) is an ideal of square zero, there is a unique \\( R \\)-algebra map \\( \\alpha': S' \\to A \\) such that \\( S' \\to A \\to A/I \\) is equal to \\( S' \\to S \\to A/I \\).\n-/\ntheorem surjection_of_formally_unramified (R S : Type) [CommRing R] [CommRing S]\n    [Algebra R S] [Algebra.FormallyUnramified R S] :\n    ∃ (S' : Type) (_ : CommRing S') (_ : Algebra R S') (f : S' →ₐ[R] S), (RingHom.ker f) ^ 2 = 0 ∧ UniversalProperty.liftOfSqZeroIdeal f := by\n  sorry\n"
  },
  {
    "id": 64,
    "informal_statement": "\nProve that the homogeneous coordinate ring of a smooth rational quartic in three-space\n    \\[\n    R=k[s^4, s^3t, st^3, t^4] \\subset k[s,t]\n    \\]\n    is not Cohen-Macaulay.\n",
    "informal_proof": "\nCM is equivalent to the property that every system of parameters of R is a regular sequence.\n\n$s^4,t^4$\nform a system of parameter but not a regular sequence.\n\n",
    "formal_statement": "import Mathlib\n\nsection\n\nopen CategoryTheory Abelian\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nvariable (R)\n\nclass IsCohenMacaulayLocalRing : Prop extends IsLocalRing R where\n  depth_eq_dim : ringKrullDim R = IsLocalRing.depth (ModuleCat.of R R)\n\nclass IsCohenMacaulayRing : Prop where\n  CM_localize : ∀ p : Ideal R, ∀ (_ : p.IsPrime), IsCohenMacaulayLocalRing (Localization.AtPrime p)\n\nend\n\nopen MvPolynomial\n\n/--\nProve that the homogeneous coordinate ring of a smooth rational quartic in three-space\n\\[\nR=k[s^4, s^3t, st^3, t^4] \\subset k[s,t]\n\\]\nis not Cohen-Macaulay.\n-/\ntheorem homogeneous_coordinate_ring_not_isCohenMacaulayRing (k : Type) [Field k] :\n    ¬ IsCohenMacaulayRing (Algebra.adjoin k ({(X 0) ^ 4, (X 0) ^ 3 * X 1,\n      X 0 * (X 1) ^ 3, (X 1) ^ 4} : Set (MvPolynomial (Fin 2) k))) := by\n  sorry\n"
  },
  {
    "id": 65,
    "informal_statement": "\nIf \\( A \\) is a Neotherian Gorenstein ring, then so is the polynomial ring \\( A[X] \\).\n",
    "informal_proof": "\nIt's sufficient to prove that for any prime ideal $\\mathfrak{q}$ of $A[X]$, the injective dimension $inj.dim_{A[X]_{\\mathfrak{q}}}(A[X]_{\\mathfrak{q}})$ is finite. It follows from $inj.dim_{A_{\\mathfrak{p}}}(A_\\mathfrak{p})$ is finite, where the prime ideal $\\mathfrak{p}=\\mathfrak{q}\\cap A$, and the fact that \n$$\n    inj.dim_{A[X]_{\\mathfrak{q}}}(A[X]_{\\mathfrak{q}})\\leq inj.dim{A_{\\mathfrak{p}}[X]}(A_\\mathfrak{p}[X]) \\leq\n    inj.dim{A_\\mathfrak{p}}(A_\\mathfrak{p})+1.\n$$\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing ModuleCat CategoryTheory Polynomial\n\ninstance (R : Type) [CommRing R] : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives.{0} (ModuleCat.{0} R)\n\n/-- A Noetherian local ring $R$ is a Gorenstein ring if $\\mathrm{inj}.\\dim_R R < +\\infty$. -/\nclass IsGorensteinLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  injDim_le_infity :\n    ∃ n : ℕ, ∀ i : ℕ, n ≤ i →\n    Subsingleton (Abelian.Ext.{0} (of.{0} R (ResidueField R)) (of.{0} R R) i)\n\n/-- A Noetherian ring is a Gorenstein ring if its localization at every maximal ideal is a\n  Gorenstein local ring. -/\nclass IsGorensteinRing (R : Type) [CommRing R] : Prop extends IsNoetherianRing R where\n  localization_maximal_isGorensteinLocalRing :\n    ∀ m : Ideal R, (_ : m.IsMaximal) → IsGorensteinLocalRing (Localization.AtPrime m)\n\n/--\nIf \\( A \\) is a Neotherian Gorenstein ring, then so is the polynomial ring \\( A[X] \\).\n-/\ntheorem Polynomial.isGorensteinRing {R : Type} [CommRing R] [IsGorensteinRing R] :\n    IsGorensteinRing R[X] := by\n  sorry\n"
  },
  {
    "id": 66,
    "informal_statement": "\nShow that if an ideal \\( I \\) in a Noetherian ring \\( R \\) can be generated by a regular sequence, then it can be generated by a set of elements that is a regular sequence in any order.\n",
    "informal_proof": "\n\\noindent\\textbf{Step 1:} Show that if $x_1, \\dots, x_r$ is a regular sequence and $x_r$ is a nonzerodivisor modulo $x_1, \\dots, x_i$ for each $i=0, \\dots, r-1$, then $x_r, x_1, \\dots, x_{r-1}$ is a regular sequence. (To do this you might factor out $x_1$ and use induction, treating the $r=2$ case separately.)\n\n\\noindent\\textbf{Step 2:} Show that if $x_1, \\dots, x_{r-1}$ is a regular sequence in any order and $x_r$ is a nonzerodivisor modulo every subset of $\\{x_1, \\dots, x_{r-1}\\}$ then $x_1, \\dots, x_r$ is a regular sequence in any order.\n\n\\noindent\\textbf{Step 3:} Use prime avoidance in the form given in Exercise 3.19b to show that if $x_1, \\dots, x_r$ is a regular sequence, then there is an element $j \\in (x_1, \\dots, x_{r-1})$ such that $x_r + j$ is a nonzerodivisor modulo every subset of $\\{x_1, \\dots, x_{r-1}\\}$.\n\n\\noindent\\textbf{Step 4:} Complete the proof by induction on $r$.\n",
    "formal_statement": "import Mathlib\n\nopen RingTheory\n\n/-- Show that if an ideal $I$ in a Noetherian ring $R$ can be generated by a regular sequence,\nthen it can be generated by a set of elements that is a regular sequence in any order. -/\ntheorem exists_eq_ofList_and_isRegular_of_perm {R : Type} [CommRing R] [IsNoetherianRing R] (I : Ideal R) (rs : List R)\n    (gen : I = Ideal.ofList rs) (h₂ : Sequence.IsRegular R rs) : ∃ rs' : List R,\n    I = Ideal.ofList rs' ∧ (∀ l : List R, (l.Perm rs') → Sequence.IsRegular R l) := by\n  sorry\n"
  },
  {
    "id": 67,
    "informal_statement": "\nLet $A$ be the ring $k[[x_1, \\dots, x_n]]$, where $k$ is a field, $n \\in \\mathbb{N}$, $n \\ne 0$. Show that\nthere is \\textbf{no} isomorphism \\[\nA \\otimes_k A \\cong k[[x_1, \\dots, x_n, y_1, \\dots, y_n]].\n\\]\n",
    "informal_proof": "\n只需证明 $A \\otimes_k A$ 不是局部环. 注意 $k[[x_i]] \\otimes_k k[[y_i]] / (x_1 \\otimes 1, 1 \\otimes y_1) \\cong k$, 故 $(x_1 \\otimes 1, 1 \\otimes y_1)$ 是一个极大理想. 只需证明 $ 1 - x_1 \\otimes y_1 $ 是不可逆的. 考虑嵌入\n$$ k[[x_i]] \\otimes_k k[[y_i]] \\hookrightarrow k[[x_i, y_i]], $$\n则 $ 1 - x_1 \\otimes y_1 $ 在 $k[[x_i, y_i]]$ 中的像的逆是 $\\sum_{i = 0} x_1^iy_1^i $. 只需证明其不在上述嵌入的像中. 事实上, $k[[x_1, x_n]]$ 线性同构于以 $\\mathbb{N} \\times \\mathbb{N}$ 为指标的矩阵的空间, $\\sum_{i = 0} x_1^iy_1^i $ 对应的是对角线全是 1 的矩阵, 其秩是无穷, 而上述嵌入的像对应的矩阵的秩总是有限的, 故 $\\sum_{i = 0} x_1^iy_1^i $ 不在像中.\n%事实上, 需要做 completed tensor product, i.e. $$A \\widehat{\\otimes}_k A \\cong k[[x_1, \\dots, x_n, y_1, \\dots, y_n]].$$ 见 https://mathoverflow.net/questions/374696/completed-tensor-product-and-power-series-rings.\n",
    "formal_statement": "import Mathlib\n\nopen scoped TensorProduct\n\n/--\nLet $A$ be the ring $k[[x_1, \\dots, x_n]]$, where $k$ is a field, $n \\in \\mathbb{N}$, $n \\ne 0$.\nShow that there is \\textbf{no} isomorphism\n\\[\nA \\otimes_k A \\cong k[[x_1, \\dots, x_n, y_1, \\dots, y_n]].\n\\]\n-/\ntheorem isEmpty_mvPowerSeries_tensor_mvPowerSeries_algEquiv\n    {k : Type} [Field k] (n : ℕ) (hn : n ≠ 0) :\n    IsEmpty ((MvPowerSeries (Fin n) k) ⊗[k] (MvPowerSeries (Fin n) k) ≃ₐ[k]\n    (MvPowerSeries (Fin (n + n)) k)) := by\n  sorry\n"
  },
  {
    "id": 68,
    "informal_statement": "\n    Let $A$ be a Noetherian local ring with maximal ideal $\\mathfrak{m}$. For any $f\\in \\mathfrak{m}$ such that $f$ is not nilpotent, $A_f$ is Jacobson.\n",
    "informal_proof": "\n    Suppose inverse that $A_{f}$ is not Jacobson, by\n    \\href{https://stacks.math.columbia.edu/tag/034J}{Stacks, Tag 034J}, there exist a non-maximal ideal $\\mathfrak p$ of $A_{f}$, an element $x\\in A$ such that the following holds.\n    \\begin{enumerate}\n        \\item The element $x$ is not in $\\mathfrak p$.\n        \\item The intersection $V(\\mathfrak{p})\\cap D_x=\\{\\mathfrak{p}\\}$ in $\\mathrm{Spec} (A_f)$.\n        \\item $\\left(A_f/\\mathfrak{p}\\right)_x$ is a field.\n    \\end{enumerate}\n    As $\\left(A_f/\\mathfrak{p}\\right)_x=\\left(A/\\mathfrak{p} \\cap A\\right)_{fx}$ is a field, we deduce that $\\dim A/\\mathfrak{p} \\cap A$ is not larger than $1$. Hence, $\\mathfrak{m}$ is the only prime that contains $\\mathfrak{p} \\cap A$. This contradicts the assumption that $\\mathfrak{p}$ is not maximal in $A_f$.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $A$ be a Noetherian local ring with maximal ideal $\\mathfrak{m}$.\nFor any $f\\in \\mathfrak{m}$ such that $f$ is not nilpotent, $A_f$ is Jacobson.\n-/\ntheorem localization_jacobson_of_one_lt_ringKrullDim (R : Type) [CommRing R] [IsLocalRing R]\n    [IsNoetherianRing R] (f : R) (hf : f ∈ IsLocalRing.maximalIdeal R) (ne0 : ¬ IsNilpotent f) :\n    IsJacobsonRing (Localization.Away f) := by\n  sorry\n"
  },
  {
    "id": 69,
    "informal_statement": "\nIf \\( R \\) is a regular local ring with maximal ideal \\( \\mathfrak{m} \\) and \\( P \\in \\operatorname{Spec}(R[x]) \\) is a prime ideal with \\( \\mathfrak{m} = P \\cap R \\), then \\( R[x]_P \\) is regular.\n",
    "informal_proof": "\n\nSince $R$ is regular, $R[x]$ is regular. Thus $R[x]_P$ is regular.\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing Polynomial\n\n/-- A commutative local noetherian ring $R$ is regular if $\\dim m/m^2 = \\dim R$. -/\nclass IsRegularLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  reg : Module.finrank (ResidueField R) (CotangentSpace R) = ringKrullDim R\n\n/--\nLet \\( A \\) be a Noetherian ring.\nIf \\( R \\) is a regular local ring with maximal ideal \\( \\mathfrak{m} \\) and \\( P \\in \\operatorname{Spec}(R[x]) \\)\nis a prime ideal with \\( \\mathfrak{m} = P \\cap R \\), then \\( R[x]_P \\) is regular.\n-/\ntheorem IsRegularLocalRing.regularAtPrime {R : Type} [CommRing R] [IsRegularLocalRing R]\n    (P : Ideal R[X]) [P.IsPrime] [P.LiesOver (maximalIdeal R)] :\n    IsRegularLocalRing (Localization.AtPrime P) := by\n  sorry\n"
  },
  {
    "id": 70,
    "informal_statement": "\nAll rings considered are noetherian. Show that if \\( R \\) is an integral domain contained in the local ring \\( (S, Q) \\), then there is a minimal prime of \\( S \\) contracting to \\( 0 \\) in \\( R \\).\n",
    "informal_proof": "\nLet $P_1, P_2, \\dots, P_n$ be the minimal prime ideals of the ring $S$. Since $S$ is a Noetherian ring, the set of its minimal prime ideals is finite.\n\nThe intersection of all minimal prime ideals in a Noetherian ring is the nilradical of the ring. That is:\n\\[ \\mathrm{Nil}(S) = \\bigcap_{i=1}^{n} P_i \\]\nwhere $\\mathrm{Nil}(S) = \\{s \\in S \\mid s^k = 0 \\text{ for some } k \\in \\mathbb{Z}^+\\}$.\n\nWe will proceed by contradiction. Assume that no minimal prime of $S$ contracts to the zero ideal $(0)$ in $R$. This means that for every minimal prime ideal $P_i$ of $S$, the intersection with $R$ is a non-zero ideal:\n\\[ P_i \\cap R \\neq (0) \\quad \\text{for all } i = 1, 2, \\dots, n \\]\n\nSince $P_i \\cap R$ is a non-zero ideal of the domain $R$, for each $i \\in \\{1, \\dots, n\\}$, we can choose a non-zero element $x_i \\in P_i \\cap R$.\n\nNow, consider the product of these elements:\n\\[ x = x_1 x_2 \\cdots x_n \\]\n\nLet's analyze the properties of this element $x$.\n\\begin{enumerate}\n    \\item Since each $x_i$ is an element of the integral domain $R$ and each $x_i$ is non-zero, their product $x$ must also be a non-zero element of $R$. That is, $x \\in R$ and $x \\neq 0$.\n\n    \\item For each $i \\in \\{1, \\dots, n\\}$, the element $x_i$ is in the ideal $P_i$. Therefore, the product $x = x_1 x_2 \\cdots x_n$ is an element of each ideal $P_i$. This means that $x$ lies in the intersection of all minimal prime ideals of $S$.\n    \\[ x \\in \\bigcap_{i=1}^{n} P_i = \\mathrm{Nil}(S) \\]\n\\end{enumerate}\n\nBy definition of the nilradical, if $x \\in \\mathrm{Nil}(S)$, then $x$ is a nilpotent element. This means there exists a positive integer $k$ such that $x^k = 0$ in the ring $S$.\n\nHowever, we also know that $x$ is an element of the subring $R$. Since $R$ is an integral domain, it has no non-zero nilpotent elements. If $x \\in R$ and $x^k = 0$, it must be that $x = 0$.\n\nThis leads to a contradiction. We concluded that $x \\neq 0$ because it is a product of non-zero elements in an integral domain, but we also concluded that $x=0$ because it is a nilpotent element in that same domain.\n\nThe contradiction arises from our initial assumption that $P_i \\cap R \\neq (0)$ for all $i$. Therefore, this assumption must be false.\n\nWe conclude that there must exist at least one minimal prime ideal $P_j$ of $S$ such that $P_j \\cap R = (0)$.\n",
    "formal_statement": "import Mathlib\n\n/--\nAll rings considered are noetherian.\nShow that if \\( R \\) is an integral domain contained in the local ring \\( (S, Q) \\),\nthen there is a minimal prime of \\( S \\) contracting to \\( 0 \\) in \\( R \\).\n-/\ntheorem exists_minimalPrime_map_zero (R S : Type) [CommRing R] [IsDomain R] [IsNoetherianRing R]\n    [CommRing S] [IsNoetherianRing S] [IsLocalRing S] [Algebra R S] [NoZeroSMulDivisors R S] :\n    ∃ (p : minimalPrimes S), Ideal.comap (algebraMap R S) p.1 = ⊥ := by\n  sorry\n"
  },
  {
    "id": 71,
    "informal_statement": "\nLet \\( G \\) be a finite group acting as automorphisms of an algebra \\( R \\) over a field of characteristic \\( 0 \\). Show that if \\( R \\) is Cohen-Macaulay, then the ring of invariants \\( R^G \\) is Cohen-Macaulay.\n",
    "informal_proof": "\nIt is a direct consequence of Corollary 6.4.6 of the book \\textit{Cohen-Macaulay rings} by Winfried Bruns and Jürgen Herzog.\n\n",
    "formal_statement": "import Mathlib\n\nsection\n\nvariable (A B : Type) [CommRing A] [CommRing B] [Algebra A B]\nvariable (G : Type) [Monoid G] [MulSemiringAction G B] [SMulCommClass G A B]\n\n/-- The set of fixed points under a group action, as a subring. -/\ndef FixedPoints.subring : Subring B where\n  __ := FixedPoints.addSubgroup G B\n  __ := FixedPoints.submonoid G B\n\n/-- The set of fixed points under a group action, as a subalgebra. -/\ndef FixedPoints.subalgebra : Subalgebra A B where\n  __ := FixedPoints.addSubgroup G B\n  __ := FixedPoints.submonoid G B\n  algebraMap_mem' r := by simp\n\nend\n\nsection\n\nopen CategoryTheory Abelian\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nvariable (R)\n\nclass IsCohenMacaulayLocalRing : Prop extends IsLocalRing R where\n  depth_eq_dim : ringKrullDim R = IsLocalRing.depth (ModuleCat.of R R)\n\nclass IsCohenMacaulayRing : Prop where\n  CM_localize : ∀ p : Ideal R, ∀ (_ : p.IsPrime), IsCohenMacaulayLocalRing (Localization.AtPrime p)\n\nend\n\n/--\nLet \\( G \\) be a finite group acting as automorphisms of an algebra \\( R \\) over a field of characteristic \\( 0 \\).\nShow that if \\( R \\) is Cohen-Macaulay, then the ring of invariants \\( R^G \\) is Cohen-Macaulay.\n-/\ntheorem fixedPoints_isCohenMacaulayRing {R : Type} [CommRing R] (k : Type) [Field k]\n    [CharZero k] [Algebra k R] [IsNoetherianRing R] [IsCohenMacaulayRing R]\n    (G : Subgroup (R ≃ₐ[k] R)) [Finite G] :\n    IsCohenMacaulayRing (FixedPoints.subalgebra k R G) := by\n  sorry\n"
  },
  {
    "id": 72,
    "informal_statement": "\nLet \\( R \\) be a Noetherian ring. Let \\( M \\) be a Cohen-Macaulay module over \\( R \\). Then \\( M \\otimes_R R[x_1, \\dots, x_n] \\) is a Cohen-Macaulay module over \\( R[x_1, \\dots, x_n] \\).\n",
    "informal_proof": "\nBy induction on the number of variables, it suffices to prove this for \\( M[x] = M \\otimes_R R[x] \\) over \\( R[x] \\). Let \\( \\mathfrak{m} \\subset R[x] \\) be a maximal ideal, and let \\( \\mathfrak{p} = R \\cap \\mathfrak{m} \\). Let \\( f_1, \\dots, f_d \\) be a \\( M_\\mathfrak{p} \\)-regular sequence in the maximal ideal of \\( R_\\mathfrak{p} \\) of length \\( d = \\dim(\\text{Supp}(M_\\mathfrak{p})) \\). Note that since \\( R[x] \\) is flat over \\( R \\), the localization \\( R[x]_\\mathfrak{m} \\) is flat over \\( R_\\mathfrak{p} \\). Hence, the sequence \\( f_1, \\dots, f_d \\) is a \\( M[x]_\\mathfrak{m} \\)-regular sequence of length \\( d \\) in \\( R[x]_\\mathfrak{m} \\). The quotient\n\\[\nQ = M[x]_\\mathfrak{m} / (f_1, \\dots, f_d)M[x]_\\mathfrak{m} = M_\\mathfrak{p} / (f_1, \\dots, f_d)M_\\mathfrak{p} \\otimes_{R_\\mathfrak{p}} R[x]_\\mathfrak{m}\n\\]\nhas support equal to the primes lying over \\( \\mathfrak{p} \\) because \\( R_\\mathfrak{p} \\to R[x]_\\mathfrak{m} \\) is flat and the support of \\( M_\\mathfrak{p} / (f_1, \\dots, f_d)M_\\mathfrak{p} \\) is equal to \\( \\{ \\mathfrak{p} \\} \\). Hence the dimension is 1.\n\nTo finish the proof it suffices to find an \\( f \\in \\mathfrak{m} \\) which is a nonzerodivisor on \\( Q \\). Since \\( \\mathfrak{m} \\) is a maximal ideal, the field extension \\( \\kappa(\\mathfrak{m}) / \\kappa(\\mathfrak{p}) \\) is finite. Hence we can find \\( f \\in \\mathfrak{m} \\) which viewed as a polynomial in \\( x \\) has leading coefficient not in \\( \\mathfrak{p} \\). Such an \\( f \\) acts as a nonzerodivisor on\n\\[\nM_\\mathfrak{p} / (f_1, \\dots, f_d)M_\\mathfrak{p} \\otimes_R R[x] = \\bigoplus_{n \\geq 0} M_\\mathfrak{p} / (f_1, \\dots, f_d)M_\\mathfrak{p} \\cdot x^n\n\\]\nand hence acts as a nonzerodivisor on \\( Q \\).\n\n",
    "formal_statement": "import Mathlib\n\n/-- The krull dimension of module, defined as `krullDim` of its support. -/\nnoncomputable def Module.supportDim (R : Type) [CommRing R] (M : Type) [AddCommGroup M]\n    [Module R M] : WithBot ℕ∞ :=\n  Order.krullDim (Module.support R M)\n\nsection\n\nopen CategoryTheory Abelian\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nclass ModuleCat.IsCohenMacaulay [IsLocalRing R] (M : ModuleCat.{0} R) : Prop where\n  depth_eq_dim : Subsingleton M ∨ Module.supportDim R M = IsLocalRing.depth M\n\nvariable (R)\n\nclass Module.IsCohenMacaulay (M : Type) [AddCommGroup M] [Module R M] : Prop where\n  depth_eq_dim : ∀ p : Ideal R, ∀ (_ : p.IsPrime), (ModuleCat.of (Localization.AtPrime p)\n    (LocalizedModule.AtPrime p M)).IsCohenMacaulay\n\nend\n\nopen TensorProduct\n\n/--\nLet \\( R \\) be a Noetherian ring. Let \\( M \\) be a Cohen-Macaulay module over \\( R \\).\nThen \\( M \\otimes_R R[x_1, \\dots, x_n] \\) is a Cohen-Macaulay module over \\( R[x_1, \\dots, x_n] \\).\n-/\ntheorem isCohenMacaulay_extendScalars_over_mvPolynomial_of_isCohenMacaulay\n    (R : Type) [CommRing R] (M : Type) [AddCommGroup M] [Module R M]\n    [IsNoetherianRing R] [Module.IsCohenMacaulay R M] (n : ℕ) :\n    Module.IsCohenMacaulay (MvPolynomial (Fin n) R) ((MvPolynomial (Fin n) R) ⊗[R] M) := by\n  sorry\n"
  },
  {
    "id": 73,
    "informal_statement": "\nIf $I$ is an homogeneous ideal of $k[x_0, \\dots, x_n]$, \\( R = k[x_0, \\dots, x_n]/I \\), then \\( R \\) is Cohen-Macaulay if and only if \\( R_P \\) is Cohen-Macaulay, where \\( P = (x_0, \\dots, x_n) \\).\n",
    "informal_proof": "\nThis is a special case of [J.Matijevic, Three Local Conditions on a graded rings, Theorem 1.1]. It proves that, if $A$ is a finitely generated graded module over a Noetherian graded ring $R$, such that $A_{\\mathfrak{m}}$ is a Cohen-Macaulay module over $R_\\mathfrak{m}$, then $A_\\mathfrak{p}$ is a Cohen-Macaulay module over $R_\\mathfrak{p}$.\\par\nWe first show that for each graded maximal ideal $\\mathfrak{M}$ of $R[X]$, $A[X]_\\mathfrak{M}$ is a Cohen-Macaulay $R[X]_\\mathfrak{M}$-module.It is clear that the $R[X]$ module $A[X]$ is finitely generated. Let $\\mathfrak{M}$ be a maximal graded ideal of $R[X]$. $\\mathfrak{M} \\cap R = \\mathfrak{Q}$ is a graded prime ideal of $R$. Now $A_\\mathfrak{Q}$ is a Cohen Macaulay $R_\\mathfrak{Q}$ module and $A[X]_\\mathfrak{M}$ is a localization of $A_\\mathfrak{Q}[X]$. Hence we show that the $R_\\mathfrak{Q}[X]_P$ module $A_\\mathfrak{Q}[X]_P$ is Cohen Macaulay, where $\\mathfrak{P}=\\mathfrak{M}_\\mathfrak{Q}$. Let $u_1, \\dots, u_r$ be a maximal R-sequence in the maximal ideal of $R_\\mathfrak{Q}$ on $A_\\mathfrak{Q}$. After reducing modulo the ideal generated by this R-sequence, we are in the case where $B$ is a Cohen Macaulay $T$ module, $T$ a local ring, with maximal ideal $\\mathfrak{m}$, and $\\operatorname{depth}_\\mathfrak{m}B=0 = \\dim B$. Now if $\\mathfrak{N}$ is a maximal ideal of $T[X]$ which contains the annihilator of $B[X]$, then $\\mathfrak{N}=(\\mathfrak{m},f)$ where $f$ is a monic polynomial in $X$. Since it is monic $f$ cannot be a zero divisor on $B[X]$. Hence $\\operatorname{depth}_{\\mathfrak{N}_\\mathfrak{N}} B[X]_\\mathfrak{N} = 1 = \\dim B[X]_\\mathfrak{N}$ and $B[X]_\\mathfrak{N}$ is a Cohen Macaulay $T[X]_\\mathfrak{N}$ module for each maximal ideal $\\mathfrak{N}$ of $T[X]$.Now suppose $U=R[X_1, \\dots, X_n]$. We shall denote $A[X_1, \\dots, X_n]$ by $A[U]$. We will translate the problem to such a ring $U$ in order to find an $R$-sequence on $A[U]$ with the right properties. The following proposition shows how to choose the ring $U$ and the appropriate $R$-sequence.\\par\nLet $I$ be a graded ideal of $R$ with $\\operatorname{depth}_IA = k$, $A$ a finitely generated $R$ module. There exists a polynomial extension $U$ of $R$ such that $\\operatorname{depth}_{IU}A[U]= k$ and there exist $k$ homogeneous elements in $IU$ forming a maximal $R$-sequence on $A[U]$.\\par\nIndeed, choose homogeneous elements $u_1, \\dots, u_r$ in $I$ forming an R-sequence on $A$. Let $J$ be the ideal generated by these elements. If $I \\subset \\mathfrak{Z}(A/JA)$ then $r=k$ and we take $U=R$. If $I \\not\\subset \\mathfrak{Z}(A/JA)$, assume there exists no homogeneous element in $I$ that is not a zero divisor on $A/JA$. Let $f=f_{-m} + \\dots + f_n$ be an element of $I$ not in $\\mathfrak{Z}(A/JA)$. Pass to $R[X]$, $\\deg X=+1$. Now $f^* = f_{-m}X^{m+n} + \\dots + f_0X^n + \\dots + f_n$ is a homogeneous element of $IR[X]$ and $f^* \\notin \\mathfrak{Z}(A[X]/JA[X])$. Otherwise one could find a nonzero $v \\in A/JA$ such that $vf_i=0$ for each $-m \\le i \\le n$. Hence $u_1, \\dots, u_r, f^*$ are homogeneous elements in $IR[X]$ forming an $R$-sequence. If we have not obtained a maximal $R$-sequence at this point, repeat the above procedure. We are assured of finding a maximal R-sequence of homogeneous elements in some finite polynomial extension of $R$, since for any such extension $U$, $\\operatorname{depth}_{IU}A[U] = \\operatorname{depth}_IA = k$.\\par\nAccording to (401), we can assume that $\\mathfrak{p}$ is graded. Pass to a polynomial extension $U$ of $R$ such that there exist homogeneous elements $u_1, \\dots, u_k$ forming a maximal R-sequence in $QU$ on $A[U]$. Let $J$ be the ideal of $U$ generated by the $u_i$. Now $QU$ is an associated prime ideal of the graded module $A[U]/JA[U]$. Hence there exists a homogeneous element $v \\in A[U]$, $v \\notin JA[U]$ such that $vQU \\subset JA[U]$. Let $K = \\{r \\in U \\mid rv \\in JA[U]\\}$. $K$ is a proper graded ideal of $U$. There exists a maximal graded ideal $M$ of $U$ such that $M \\supset K$. Since $M \\supset K \\supset QU \\supset IU = \\text{ann}_U A[U]$, we have that $A[U]_M \\neq 0$. Hence $v_M \\notin JA[U]_M$ and $v_M QU_M \\subset JA[U]_M$. So $\\operatorname{depth}_{QU_M}A[U]_M \\le k$. But $\\operatorname{depth}_{QU_M}A[U]_M \\ge k$ is always true. Now $A[U]_M$ is a Cohen Macaulay $U_M$ module. Hence $k = \\operatorname{depth}_{QU}A[U] = \\operatorname{depth}_{QU_M}A[U]_M = \\text{rank } QU_M/IU_M = \\text{rank } Q/I$. \n",
    "formal_statement": "import Mathlib\n\nsection\n\nopen CategoryTheory Abelian\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nvariable (R)\n\nclass IsCohenMacaulayLocalRing : Prop extends IsLocalRing R where\n  depth_eq_dim : ringKrullDim R = IsLocalRing.depth (ModuleCat.of R R)\n\nclass IsCohenMacaulayRing : Prop where\n  CM_localize : ∀ p : Ideal R, ∀ (_ : p.IsPrime), IsCohenMacaulayLocalRing (Localization.AtPrime p)\n\nend\n\nattribute [local instance] MvPolynomial.gradedAlgebra\n\n/--\nIf $I$ is an homogeneous ideal of $k[x_0, \\dots, x_n]$, \\( R = k[x_0, \\dots, x_n]/I \\),\nthen \\( R \\) is Cohen-Macaulay if and only if \\( R_P \\) is Cohen-Macaulay, where \\( P = (x_0, \\dots, x_n) \\).\n-/\ntheorem mvPolynomial_quotient_isCohenMacaulayRing_iff (k : Type) [Field k] (n : ℕ)\n    (R : Type) [CommRing R] (f : (MvPolynomial (Fin n) k) →+* R) (surj : Function.Surjective f)\n    (homo : (RingHom.ker f).IsHomogeneous (MvPolynomial.homogeneousSubmodule (Fin n) k))\n    (le : RingHom.ker f ≤ RingHom.ker MvPolynomial.constantCoeff) :\n    IsCohenMacaulayRing R ↔\n    IsCohenMacaulayRing (Localization.AtPrime ((RingHom.ker MvPolynomial.constantCoeff).map f)\n      (hp := Ideal.map_isPrime_of_surjective surj le (H := RingHom.ker_isPrime _))) := by\n  sorry\n"
  },
  {
    "id": 74,
    "informal_statement": "\nLet $R$ be a regular local ring and let $x_1, \\dots, x_c$ be a regular sequence in $R$. Let $y \\in R$, $y \\notin (x_1, \\dots, x_c)$, and set $J := ((x_1, \\dots, x_c) : y)$. Prove that $R/J$ is Gorenstein.\n",
    "informal_proof": "\nThe proof proceeds by first establishing that the ring in question, $R/J$, is Cohen-Macaulay, and then showing that its canonical module is isomorphic to itself, which is the definition of a Gorenstein ring.\n\n\\paragraph{Step 1: Setup and Preliminary Reductions}\nLet $A$ be the quotient ring $R/I$. Since $R$ is a regular local ring and $I = (x_1, \\dots, x_c)$ is generated by a regular sequence, the ring $A$ is a complete intersection. A fundamental theorem states that any complete intersection ring is Gorenstein. Thus, $A$ is a Gorenstein local ring.\n\nThe ideal $J = (I:y)$ is the annihilator in $R$ of the element $y+I$ in the $R$-module $R/I$. Let $\\bar{y}$ denote the image of $y$ in $A$. Then the ideal $J/I \\subset A$ is precisely the annihilator of $\\bar{y}$ in $A$. Let's denote this annihilator by $\\mathfrak{a} := \\text{ann}_A(\\bar{y})$. The ring we want to study is $R/J$, which is isomorphic to $(R/I)/(J/I) = A/\\mathfrak{a}$.\n\n\\paragraph{Step 2: The Cohen-Macaulay Property}\nConsider the following short exact sequence of $A$-modules, where the first map is the natural inclusion and the second is induced by multiplication by $\\bar{y}$:\n$$ 0 \\to \\mathfrak{a} \\to A \\to (\\bar{y})A \\to 0 $$\nwhere $(\\bar{y})A$ is the principal ideal generated by $\\bar{y}$ in $A$.\nSince $A$ is a Cohen-Macaulay ring, it follows from the depth lemma applied to this sequence that the quotient ring $A/\\mathfrak{a}$ is Cohen-Macaulay if and only if the ideal $(\\bar{y})A$ is a (maximal) Cohen-Macaulay $A$-module.\n\nNow consider the sequence:\n$$ 0 \\to (\\bar{y})A \\to A \\to A/(\\bar{y})A \\to 0 $$\nSince $A$ is Cohen-Macaulay and $\\bar{y} \\ne 0$, the dimension of the ideal $(\\bar{y})A$ as an $A$-module is equal to the dimension of $A$. The ring $A/(\\bar{y})A$ has dimension one less than $A$. Applying the depth lemma again shows that the module $(\\bar{y})A$ has maximal possible depth, and is therefore a maximal Cohen-Macaulay module.\nConsequently, the ring $A/\\mathfrak{a} \\cong R/J$ is Cohen-Macaulay.\n\n\\paragraph{Step 3: The Canonical Module and the Gorenstein Property}\nA Cohen-Macaulay local ring $S$ is Gorenstein if and only if its canonical module, $\\omega_S$, is isomorphic to $S$ itself. We will compute the canonical module of $S = A/\\mathfrak{a}$.\n\nLet $d = \\dim(A)$ and $k = \\dim(A/\\mathfrak{a})$. A standard formula from duality theory relates the canonical module of a quotient ring to that of the ambient ring. Since $A$ is Gorenstein, its canonical module $\\omega_A$ is isomorphic to $A$. The formula gives:\n$$ \\omega_{A/\\mathfrak{a}} \\cong \\text{Ext}_A^{\\text{ht}(\\mathfrak{a})}(A/\\mathfrak{a}, \\omega_A) \\cong \\text{Ext}_A^{\\text{ht}(\\mathfrak{a})}(A/\\mathfrak{a}, A) $$\nA fundamental result in the theory of Gorenstein rings provides an isomorphism:\n$$ \\text{Ext}_A^i(M, A) \\cong \\text{Tor}_{d-i}^A(M, \\omega_A^{DD}) $$\nMore directly, for the quotient by an ideal, a key result of liaison theory states that the canonical module of $A/\\mathfrak{a}$ is isomorphic to the dual of the ideal that defines the linked quotient. Specifically, for our ring $A/\\mathfrak{a}$, where $\\mathfrak{a} = \\text{ann}_A(\\bar{y})$:\n$$ \\omega_{A/\\mathfrak{a}} \\cong \\text{Hom}_A(A/(\\bar{y})A, A) $$\nThe module on the right is, by definition, the annihilator of the ideal $(\\bar{y})A$ in $A$:\n$$ \\text{Hom}_A(A/(\\bar{y})A, A) \\cong \\text{ann}_A((\\bar{y})A) = \\mathfrak{a} $$\nThis seems to lead to $\\omega_{A/\\mathfrak{a}} \\cong \\mathfrak{a}$, which is not what we want.\n\nLet's use the correct duality isomorphism from linkage theory. The canonical module of $A/\\text{ann}_A(\\bar{y})$ is isomorphic to the ideal $(\\bar{y})A$ itself.\n$$ \\omega_{A/\\text{ann}_A(\\bar{y})} \\cong (\\bar{y})A $$\nThis is a standard result in the theory. Now we must relate this module back to our ring.\nThere is a natural isomorphism of $A$-modules:\n$$ (\\bar{y})A \\cong A/\\text{ann}_A(\\bar{y}) $$\nThe map is given by $a\\bar{y} \\mapsto a + \\text{ann}_A(\\bar{y})$. This is well-defined and an isomorphism by the first isomorphism theorem applied to the map $A \\to (\\bar{y})A$ given by multiplication by $\\bar{y}$.\n\nCombining these two isomorphisms, we have:\n$$ \\omega_{A/\\mathfrak{a}} \\cong (\\bar{y})A \\cong A/\\mathfrak{a} $$\nSo, $\\omega_{R/J} \\cong R/J$ as $R/J$-modules.\nSince $R/J$ is a Cohen-Macaulay ring whose canonical module is isomorphic to itself, it is, by definition, a Gorenstein ring.\n\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing ModuleCat CategoryTheory\n\ninstance (R : Type) [CommRing R] : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives.{0} (ModuleCat.{0} R)\n\n/-- A commutative local noetherian ring $R$ is regular if $\\dim m/m^2 = \\dim R$. -/\nclass IsRegularLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  reg : Module.finrank (ResidueField R) (CotangentSpace R) = ringKrullDim R\n\n/-- A Noetherian local ring $R$ is a Gorenstein ring if $\\mathrm{inj}.\\dim_R R < +\\infty$. -/\nclass IsGorensteinLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  injDim_le_infity :\n    ∃ n : ℕ, ∀ i : ℕ, n ≤ i →\n    Subsingleton (Abelian.Ext.{0} (of.{0} R (ResidueField R)) (of.{0} R R) i)\n\n/-- A Noetherian ring is a Gorenstein ring if its localization at every maximal ideal is a\n  Gorenstein local ring. -/\nclass IsGorensteinRing (R : Type) [CommRing R] : Prop extends IsNoetherianRing R where\n  localization_maximal_isGorensteinLocalRing :\n    ∀ m : Ideal R, (_ : m.IsMaximal) → IsGorensteinLocalRing (Localization.AtPrime m)\nvariable {R : Type} [CommRing R]\n\n/--\nLet $R$ be a regular local ring and let $x_1, \\dots, x_c$ be a regular sequence in $R$.\nLet $y \\in R$, $y \\notin (x_1, \\dots, x_c)$, and set $J := ((x_1, \\dots, x_c) : y)$. Prove that $R/J$ is Gorenstein.\n-/\ntheorem IsRegularLocalRing.gorensteinAtRegularSequence {R : Type} [CommRing R]\n    [IsRegularLocalRing R] {rs : List R} (reg : RingTheory.Sequence.IsRegular R rs) (y : R)\n    (h : y ∉ Ideal.ofList rs) : IsGorensteinRing (R ⧸ (Ideal.ofList rs / Ideal.span {y})) := by\n  sorry\n"
  },
  {
    "id": 75,
    "informal_statement": "\nLet $A$ be a graded Noetherian ring, with $A_0$ a field and $A$ generated by $A_1$.\nShow that $A$ is Cohen-Macaulay if and only if for all homogeneously prime $\\mathfrak{p}$,\n$(A_{\\mathfrak{p}})_0$ is Cohen-Macaulay.\n",
    "informal_proof": "\n    Call a graded noetherian ring $R$ \\emph{graded CM} if for any graded prime $\\frak p$, $R_{\\frak{p}}$ is CM.\n\n    We prove step by step.\n\n    Step 1: Assume $R$ be a $\\mathbb{Z}$-graded noetherian ring such that there exists an invertible element $f\\in R_1$. Then $R$ is CM iff $R$ is graded CM.\n\n    Only need prove the `only if' part. Indeed, $R\\cong R_0[X^{\\pm 1}]$ (graded isomorphism). Then for any prime $\\mathfrak{p}_0\\subset R_0$, $\\mathcal{P}=\\mathfrak{p}_0R$ is a graded prime. Hence, $R_{\\mathcal P}$ is CM. As $R_{\\mathcal P}$ is a localization of $R_{0,\\mathfrak{p}_0}[X^{\\pm1}]$, it is easy to see that\n    \\[depth(R_{0,\\mathfrak{p}_0})=depth(R_{\\cal P})=dim(R_{\\cal P})=depth(R_{0,\\mathfrak{p}_0}).\\]\n    Hence $R_0$ is CM and so is $R_0[X^{\\pm 1}]$.\n\n    Step 2: Now we prove the problem.\n\n    Use the assumption, we see that $R_{\\geq 1}$ is a CM-prime. Other primes all lies in some $Spec(R_{f})$ for some $f\\in R_1$ and can be deduced from the above argument.\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing ModuleCat CategoryTheory\n\nsection\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nvariable (R)\n\nclass IsCohenMacaulayLocalRing : Prop extends IsLocalRing R where\n  depth_eq_dim : ringKrullDim R = IsLocalRing.depth (ModuleCat.of R R)\n\nclass IsCohenMacaulayRing : Prop where\n  CM_localize : ∀ p : Ideal R, ∀ (_ : p.IsPrime), IsCohenMacaulayLocalRing (Localization.AtPrime p)\n\nend\n\n/--\nLet $A$ be a graded Noetherian ring, with $A_0$ a field and $A$ generated by $A_1$.\nShow that $A$ is Cohen-Macaulay if and only if for all homogeneously prime $\\mathfrak{p}$,\n$(A_{\\mathfrak{p}})_0$ is Cohen-Macaulay.\n-/\ntheorem gradedAlgebra_isCohenMacaulay_iff_homogeneously_localize {A : Type} [CommRing A] [IsNoetherianRing A]\n    (𝒜 : ℕ → Submodule ℤ A) [GradedAlgebra 𝒜] (h : IsField (𝒜 0)) (h1 : Algebra.adjoin (𝒜 0) (𝒜 1) = (⊤ : Subalgebra (𝒜 0) A)) : IsCohenMacaulayRing A ↔\n    ∀ p : Ideal A, (_ : p.IsPrime) → p.IsHomogeneous 𝒜 →\n    IsCohenMacaulayLocalRing (HomogeneousLocalization.AtPrime 𝒜 p) := by\n  sorry\n"
  },
  {
    "id": 76,
    "informal_statement": "\nLet $A$ be a Noetherian UFD of dimension $d \\leq 3$. Prove that $A$ is catenary.\n",
    "informal_proof": "\nThis result appears as Proposition II.3 in:\n\\begin{itemize}\n    \\item Hamet Seydi, \\emph{Anneaux henséliens et conditions de chaînes. III}, Bull. Soc. Math. France 98 (1970), 329–336. Numdam: \\texttt{BSMF\\_1970\\_\\_98\\_\\_329\\_0}. DOI: \\texttt{10.24033/bsmf.1706}. MR: 276222.\n\\end{itemize}\nNamely, Seydi proves that \"every (Noetherian) UFD of dimension three is catenary.\" The Noetherian assumption is necessary due to a counterexample of Fujita.\n\n\n\\textbf{Claim:} Let $A$ be a Noetherian UFD of dimension at most three. Then $A$ is catenary.\n\nLet $A$ be a Noetherian UFD of dimension at most three.\nThe property of being catenary can be checked after localizing at every maximal ideal, so it suffices to consider the case when $A$ is local.\n\nWe recall Ratliff's criterion [Matsumura, Theorem 31.4], which states that a Noetherian local domain $B$ is catenary if and only if\n$$ \\mathrm{ht}(p) + \\dim(B/p) = \\dim(B) $$\nfor every prime ideal $p \\subseteq B$.\n\nWe also recall that Noetherian domains of dimension $\\leq 2$ are catenary [Matsumura, Corollary 2 to Theorem 31.7]. Therefore, it suffices to consider the case when $\\dim(A) = 3$.\n\nConsider a prime ideal $p \\subseteq A$.\n\\begin{itemize}\n    \\item If $\\mathrm{ht}(p) = 0$, then $p = 0$, in which case the criterion trivially holds for $A$.\n    \\item Otherwise, suppose that $\\mathrm{ht}(p) \\geq 1$. Then, there exists a prime ideal $q \\subseteq p$ such that $\\mathrm{ht}(q) = 1$ and such that $\\mathrm{ht}(p \\cdot A/q) + 1 = \\mathrm{ht}(p)$.\n\\end{itemize}\nSince $A$ is a local UFD, the ideal $q$ is principal. This implies $\\dim(A/q) = 2$.\nSince $A/q$ is a Noetherian domain of dimension 2, by Ratliff's criterion applied to $A/q$, we have:\n$$ \\mathrm{ht}(p \\cdot A/q) + \\dim(A/p) = \\dim(A/q) = 2 $$\nGiven that $\\mathrm{ht}(p \\cdot A/q) + 1 = \\mathrm{ht}(p)$, we add 1 to both sides of the equation above:\n$$ (\\mathrm{ht}(p \\cdot A/q) + 1) + \\dim(A/p) = \\dim(A/q) + 1 $$\nSubstituting the equivalent terms, we obtain:\n$$ \\mathrm{ht}(p) + \\dim(A/p) = 2 + 1 = 3 $$\nSince $\\dim(A) = 3$, this shows that $\\mathrm{ht}(p) + \\dim(A/p) = \\dim(A)$ for all prime ideals $p \\subseteq A$.\nThus, by Ratliff's criterion, $A$ is catenary.\n\n",
    "formal_statement": "import Mathlib\n\nopen List\n\n/-- A ring $R$ is said to be \\textit{catenary} if for any pair of prime ideals $\\mathfrak{p} \\subset\n  \\mathfrak{q}$, there exists an integer bounding the lengths of all finite chains of prime ideals\n  $\\mathfrak{p} = \\mathfrak{p}_0 \\subset \\mathfrak{p}_1 \\subset \\dots \\subset \\mathfrak{p}_e =\n  \\mathfrak{q}$ and all maximal such chains have the same length. -/\ndef IsCatenary (R : Type) [CommRing R] : Prop :=\n  ∀ p q : PrimeSpectrum R, p ≤ q →\n  ∃ n : ℕ, ∀ (l : LTSeries (PrimeSpectrum R)), l.head = p → l.last = q →\n  (∀ l' : LTSeries (PrimeSpectrum R), l'.head = p → l'.last = q → l.toList <+ l'.toList → l' = l) →\n  l.toList.length = n\n\n/--\nLet $A$ be a Noetherian UFD of dimension $d \\leq 3$. Prove that $A$ is catenary.\n-/\ntheorem IsCatenary.of_noetherian_ufd_of_dim_le_three {A : Type} [CommRing A] [IsNoetherianRing A]\n    [IsDomain A] [UniqueFactorizationMonoid A] (h : ringKrullDim A ≤ 3) : IsCatenary A := by\n  sorry\n"
  },
  {
    "id": 77,
    "informal_statement": "\nLet $A$ be a Noetherian ring, $P \\subset Q$ prime ideals such that $\\operatorname{ht} P = h$, $\\operatorname{ht} Q/P = d$, where $d > 1$. Prove that there exist infinitely many intermediate primes $P'$, $P \\subset P' \\subset Q$ such that $\\operatorname{ht} P' = h + 1$ and $\\operatorname{ht} Q/P' = d - 1$.\n",
    "informal_proof": "\n1. \\textbf{Localization}: We may assume $(A,Q)$ is local since heights localize.\n\n2. \\textbf{Construction}: For $x \\in Q \\setminus P$ not in minimal primes of $A/P$:\n\\begin{itemize}\n\\item In $A/P$, $(x)$ has height 1 by Krull [Matsumura1989，Thm 12.3]\n\\item There exists a prime $P'$ minimal over $P+(x)$ satisfy $\\operatorname{ht} P' = h+1$ (going-down), and\n\\item $\\operatorname{ht} Q/P' = d-1$ by dimension formula [Matsumura1989，Thm 15.1] (take \\(P'\\) be the prime ideal lives in the longest prime ideal chain between \\(P\\) and \\(Q\\) and containing \\(x\\). \\(\\mathrm{dim} A_Q/x = d - 1\\) so such \\(P'\\) can be found.\n\\end{itemize}\n\n3. \\textbf{Infinitely many}: Distinct $x_i$ yield distinct $P_i'$ by prime avoidance [Matsumura1989，Thm 2.2]. More precisely，consider the quotient ring $A/P$ which is a domain since $P$ is prime. Let $\\overline{Q} = Q/P$ with $\\operatorname{ht} \\overline{Q} = d > 1$. There are finitely many minimal primes in $A/P$ (since $A$ is Noetherian). Choose an infinite family $\\{x_i\\}_{i=1}^\\infty \\subset \\overline{Q} \\setminus \\{0\\}$ where:\n   \\begin{itemize}\n   \\item Each $x_i$ is not in any minimal prime of $A/P$\n   \\item $x_i \\notin (x_1,\\ldots,x_{i-1})$ for $i > 1$ (avoidance of previous ideals)\n   \\end{itemize}\n   This is possible by prime avoidance [Eisenbud1995,Theorem 3.61]. Then for  each $x_i$:\n   \\begin{itemize}\n   \\item $(x_i)$ has height exactly 1 in $A/P$ by Krull's PIT [Matsumura1989, Theorem 10.2]\n   \\item The primes $\\overline{P_i}$ minimal over $(x_i)$ satisfy $\\operatorname{ht} \\overline{P_i} = 1$\n   \\item For each $\\overline{P_i} \\subset A/P$, let $P'_i$ be its preimage in $A$.  Then $\\operatorname{ht} P'_i = h + 1$ (since $\\operatorname{ht} P = h$ and $\\operatorname{ht} \\overline{P_i} = 1$), $\\operatorname{ht} Q/P'_i = d - 1$ (by dimension formula [Matsumura1989, Theorem 15.1])\n   \\end{itemize}\n   Note that the $P'_i$ are distinct because:\n   \\[\n   x_i \\in P'_j \\iff i = j\n   \\]\n   by construction. This gives an infinite family as claimed. For any finite subset $\\{P'_1,\\ldots,P'_n\\}$, we can always find $x_{n+1} \\in Q \\setminus \\bigcup_{i=1}^n P'_i$ by prime avoidance, yielding a new prime $P'_{n+1}$.\n\n\n[Matsumura1989] Matsumura, H. (1989). \\emph{Commutative Ring Theory}. Cambridge.\n[Kaplansky1974] Kaplansky, I. (1974). \\emph{Commutative Rings}. Chicago.\n\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $A$ be a Noetherian ring, $P \\subset Q$ prime ideals such that\n$\\operatorname{ht} P = h$, $\\operatorname{ht} Q/P = d$, where $d > 1$.\nProve that there exist infinitely many intermediate primes $P'$, $P \\subset P' \\subset Q$\nsuch that $\\operatorname{ht} P' = h + 1$ and $\\operatorname{ht} Q/P' = d - 1$.\n-/\ntheorem infinite_intermediate_primes (R : Type) [CommRing R] (P Q : Ideal R) (le : P ≤ Q)\n    [P.IsPrime] [Q.IsPrime] (h d : ℕ) (lt : 1 < d) (ht1 : P.height = h)\n    (ht2 : (Q.map (Ideal.Quotient.mk P)).height = d) :\n    {P' : Ideal R | P ≤ P' ∧ P' ≤ Q ∧ P'.IsPrime ∧ P'.height = h + 1 ∧\n      (Q.map (Ideal.Quotient.mk P')).height = d - 1}.Infinite := by\n  sorry\n"
  },
  {
    "id": 78,
    "informal_statement": "\nLet $A$ be a local Cohen–Macaulay (CM) ring that is a quotient of a regular local ring. If $A$ is a UFD, then $A$ is Gorenstein.\n",
    "informal_proof": "\nSince $A$ is Cohen--Macaulay and a quotient of a regular local ring $R$, it admits a canonical module $\\omega_A$ [BrunsHerzog1998, Theorem 3.3.6]. The canonical module is a rank-1 reflexive module over $A$ [Matsumura1989, Theorem 18.8], [BrunsHerzog1998, Proposition 3.3.11].\n\nWhen $A$ is a UFD, every rank-1 reflexive module is principal, this follows because reflexive ideals in UFDs are principal [Matsumura1989, Theorem 11.5], and consequently $\\omega_A \\cong A$. By definition, a Cohen--Macaulay ring is Gorenstein precisely when its canonical module is free of rank 1 [BrunsHerzog1998, Definition 3.1.18], which completes the proof.\n\n[BrunsHerzog1998] Bruns, W., Herzog, J. (1998). \\emph{Cohen--Macaulay Rings}. Cambridge University Press, 2nd edition.\n\n[Matsumura1989] Matsumura, H. (1989). \\emph{Commutative Ring Theory}. Cambridge University Press.\n\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing ModuleCat CategoryTheory\n\nsection\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nvariable (R)\n\nclass IsCohenMacaulayLocalRing : Prop extends IsLocalRing R where\n  depth_eq_dim : ringKrullDim R = IsLocalRing.depth (ModuleCat.of R R)\n\nclass IsCohenMacaulayRing : Prop where\n  CM_localize : ∀ p : Ideal R, ∀ (_ : p.IsPrime), IsCohenMacaulayLocalRing (Localization.AtPrime p)\n\nend\n\n/-- A commutative local noetherian ring $R$ is regular if $\\dim m/m^2 = \\dim R$. -/\nclass IsRegularLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  reg : Module.finrank (ResidueField R) (CotangentSpace R) = ringKrullDim R\n\n/-- A Noetherian local ring $R$ is a Gorenstein ring if $\\mathrm{inj}.\\dim_R R < +\\infty$. -/\nclass IsGorensteinLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  injDim_le_infity :\n    ∃ n : ℕ, ∀ i : ℕ, n ≤ i →\n    Subsingleton (Abelian.Ext.{0} (of.{0} R (ResidueField R)) (of.{0} R R) i)\n\n/-- A Noetherian ring is a Gorenstein ring if its localization at every maximal ideal is a\n  Gorenstein local ring. -/\nclass IsGorensteinRing (R : Type) [CommRing R] : Prop extends IsNoetherianRing R where\n  localization_maximal_isGorensteinLocalRing :\n    ∀ m : Ideal R, (_ : m.IsMaximal) → IsGorensteinLocalRing (Localization.AtPrime m)\n\n/--\nLet $A$ be a local Cohen–Macaulay (CM) ring that is a quotient of a regular local ring.\nIf $A$ is a UFD, then $A$ is Gorenstein.\n-/\ntheorem IsCohenMacaulayLocalRing.isGorensteinRing_of_ufd {A B : Type} [CommRing A]\n    [IsCohenMacaulayLocalRing A] [IsDomain A] [UniqueFactorizationMonoid A] [CommRing B]\n    [IsRegularLocalRing B] {f : B →+* A} (hf : Function.Surjective f) :\n    IsGorensteinRing A := by\n  sorry\n"
  },
  {
    "id": 79,
    "informal_statement": "\nLet $B$ be a regular local ring and $I \\subset B$ an ideal such that $B/I$ is Gorenstein but not a complete intersection. Show that $I$ cannot have height $0$ or $1$.\n",
    "informal_proof": "\n    Any noetherian local ring is an integral domain, hence $0$ is the only height $0$ ideal. Hence, $ht(I)>0$, or $B/I$ is regular (so is l.c.i).\n\n    If $ht(I)=1$, as $B/I$ is Gorenstein, $B/I$ is CM and $I$ is unmixed by the unmixed theorem. This proves that $I$ is principal by the primary decomposition.\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing ModuleCat CategoryTheory\n\ninstance (R : Type) [CommRing R] : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives.{0} (ModuleCat.{0} R)\n\n/-- A commutative local noetherian ring $R$ is regular if $\\dim m/m^2 = \\dim R$. -/\nclass IsRegularLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  reg : Module.finrank (ResidueField R) (CotangentSpace R) = ringKrullDim R\n\n/-- A Noetherian local ring $R$ is a Gorenstein ring if $\\mathrm{inj}.\\dim_R R < +\\infty$. -/\nclass IsGorensteinLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  injDim_le_infity :\n    ∃ n : ℕ, ∀ i : ℕ, n ≤ i →\n    Subsingleton (Abelian.Ext.{0} (of.{0} R (ResidueField R)) (of.{0} R R) i)\n\n/-- A Noetherian ring is a Gorenstein ring if its localization at every maximal ideal is a\n  Gorenstein local ring. -/\nclass IsGorensteinRing (R : Type) [CommRing R] : Prop extends IsNoetherianRing R where\n  localization_maximal_isGorensteinLocalRing :\n    ∀ m : Ideal R, (_ : m.IsMaximal) → IsGorensteinLocalRing (Localization.AtPrime m)\n\n/-- A Noetherian local ring $A$ is a local complete intersection if every surjection of local rings\n  $R \\to \\widehat{A}$ with $R$ a regular local ring, the kernel of $R \\to \\hat{A}$ is generated by a\n  regular sequence. -/\n@[stacks 09Q3]\nclass IsLocalCompleteIntersectionRing (A : Type) [CommRing A] : Prop extends\n    IsLocalRing A, IsNoetherianRing A where\n  out (R : Type) [CommRing R] [IsRegularLocalRing R]\n    (f : R →+* (AdicCompletion (maximalIdeal A) A)) (_ : IsLocalHom f) (_ : Function.Surjective f) :\n      ∃ (rs : List R), RingTheory.Sequence.IsRegular R rs ∧ RingHom.ker f = Ideal.ofList rs\n\n/--\nLet $B$ be a regular local ring and $I \\subset B$ an ideal such that\n$B/I$ is Gorenstein but not a local complete intersection.\nShow that $I$ cannot have height $0$ or $1$.\n-/\ntheorem IsLocalRing.not_isCompleteIntersection.height_not_zero_and_not_one (B : Type) [CommRing B]\n    [IsRegularLocalRing B] (I : Ideal B) [IsGorensteinRing (B ⧸ I)]\n    (hc : ¬ IsLocalCompleteIntersectionRing (B ⧸ I)) : I.height ≠ 0 ∧ I.height ≠ 1 := by\n  sorry\n"
  },
  {
    "id": 80,
    "informal_statement": "\nConsider the ideal \\( I \\subset k[x_1, \\dots, x_6] \\) generated by the following polynomials:\n\\[\n\\begin{aligned}\nf_1 &= x_2x_4 + x_3x_6, \\\\\nf_2 &= x_3x_5 + x_1x_6, \\\\\nf_3 &= x_1x_2 - x_2x_5 + x_3x_5 - x_5x_6, \\\\\nf_4 &= x_2x_3 + x_2x_4 + x_2x_6 + x_6^2, \\\\\nf_5 &= x_3^2 + x_3x_4 + x_3x_6 - x_4x_6, \\\\\nf_6 &= x_1x_3 + x_1x_4 + x_4x_5 + x_1x_6.\n\\end{aligned}\n\\]\nProve that \\( R/I \\) is Cohen–Macaulay of dimension \\( 3 \\).\n",
    "informal_proof": "\nExercise 5.6.12 in Aron Simis, Commutative Algebra\n\nHint: $\\{x_1-x_2, x_2+x_4+x_5, x_6\\}$ is a regular sequence mod $I$.\n",
    "formal_statement": "import Mathlib\n\nsection\n\nopen CategoryTheory Abelian\n\nvariable {R : Type} [CommRing R]\n\ninstance : CategoryTheory.HasExt.{0} (ModuleCat.{0} R) :=\n  CategoryTheory.hasExt_of_enoughProjectives (ModuleCat R)\n\nnoncomputable def moduleDepth (N M : ModuleCat.{0} R) : ℕ∞ :=\n  sSup {n : ℕ∞ | ∀ i : ℕ, i < n → Subsingleton (CategoryTheory.Abelian.Ext.{0} N M i)}\n\nnoncomputable def Ideal.depth (I : Ideal R) (M : ModuleCat.{0} R) : ℕ∞ :=\n  moduleDepth (ModuleCat.of R (R ⧸ I)) M\n\nnoncomputable def IsLocalRing.depth [IsLocalRing R] (M : ModuleCat.{0} R) : ℕ∞ :=\n  (IsLocalRing.maximalIdeal R).depth M\n\nvariable (R)\n\nclass IsCohenMacaulayLocalRing : Prop extends IsLocalRing R where\n  depth_eq_dim : ringKrullDim R = IsLocalRing.depth (ModuleCat.of R R)\n\nclass IsCohenMacaulayRing : Prop where\n  CM_localize : ∀ p : Ideal R, ∀ (_ : p.IsPrime), IsCohenMacaulayLocalRing (Localization.AtPrime p)\n\nend\n\nopen MvPolynomial\n\nabbrev target_ring_aux (k : Type) [Field k] :=\n    (MvPolynomial (Fin 6) k) ⧸ Ideal.span ({\n    X 1 * X 3 + X 2 * X 5, X 2 * X 4 + X 0 * X 5, X 0 * X 1 - X 1 * X 4 + X 2 * X 4 - X 4 * X 5,\n    X 1 * X 2 + X 1 * X 3 + X 1 * X 5 + (X 5)^2, (X 2)^2 + X 2 * X 3 + X 2 * X 5 - X 3 * X 5,\n    X 0 * X 2 + X 0 * X 3 + X 3 * X 4 + X 0 * X 5} : Set (MvPolynomial (Fin 6) k))\n\n/--\nConsider the ideal \\( I \\subset k[x_1, \\dots, x_6] \\) generated by the following polynomials:\n\\[\n\\begin{aligned}\nf_1 &= x_2x_4 + x_3x_6, \\\\\nf_2 &= x_3x_5 + x_1x_6, \\\\\nf_3 &= x_1x_2 - x_2x_5 + x_3x_5 - x_5x_6, \\\\\nf_4 &= x_2x_3 + x_2x_4 + x_2x_6 + x_6^2, \\\\\nf_5 &= x_3^2 + x_3x_4 + x_3x_6 - x_4x_6, \\\\\nf_6 &= x_1x_3 + x_1x_4 + x_4x_5 + x_1x_6.\n\\end{aligned}\n\\]\nProve that \\( R/I \\) is Cohen–Macaulay of dimension \\( 3 \\).\n-/\ntheorem isCohenMacaulayRing_of_dimension_three (k : Type) [Field k] :\n    IsCohenMacaulayRing (target_ring_aux k) ∧ (ringKrullDim (target_ring_aux k) = 3) := by\n  sorry\n"
  },
  {
    "id": 81,
    "informal_statement": "\nLet \\( A \\) be a local Noetherian ring, \\( I \\subset A \\) an ideal. Show that\n\\( I \\) is generated by a regular sequence if and only if \\( I/I^2 \\) is free over \\( A/I \\) and\n\\( \\operatorname{pd}_A I < \\infty \\).\n",
    "informal_proof": "\n\n\\textbf{Theorem.} \nLet $(A,\\mathfrak{m})$ be a local Noetherian ring and $I \\subset A$ a proper ideal. The following conditions are equivalent:\n\\begin{enumerate}\n\\item $I$ is generated by a regular sequence\n\\item \\begin{enumerate}\n\\item $I/I^2$ is a free $A/I$-module, and\n\\item $\\operatorname{pd}_A I < \\infty$ (I has finite projective dimension over $A$)\n\\end{enumerate}\n\\end{enumerate}\n\n\n\\noindent\\textbf{(1 $\\Rightarrow$ 2):} Assume $I = (x_1,\\ldots,x_r)$ where $x_1,\\ldots,x_r$ is a regular sequence.\n\n\\begin{enumerate}[label=(\\alph*)]\n\\item The conormal module $I/I^2$ is free over $A/I$:\n\\begin{itemize}\n\\item The Koszul complex $K_\\bullet(\\underline{x})$ gives the exact sequence\n$$0 \\to I/I^2 \\to \\bigoplus_{i=1}^r A/I \\cdot e_i \\to \\mathfrak{m}/\\mathfrak{m}^2 \\to \\cdots$$\n\\item The images $\\bar{x}_1,\\ldots,\\bar{x}_r$ form a basis for $I/I^2$ over $A/I$ [Matsumura1989, Theorem 16.1]\n\\end{itemize}\n\n\\item Finite projective dimension:\n\\begin{itemize}\n\\item The Koszul resolution shows $\\operatorname{pd}_A A/I = r$\n\\item From $0 \\to I \\to A \\to A/I \\to 0$ we get $\\operatorname{pd}_A I \\leq r-1 < \\infty$\n\\end{itemize}\n\\end{enumerate}\n\n\\noindent\\textbf{(2 $\\Rightarrow$ 1):} Assume (a) $I/I^2$ is free over $A/I$ and (b) $\\operatorname{pd}_A I < \\infty$.\n\n\\begin{enumerate}\n\\item Let $I = (x_1,\\ldots,x_r)$ where $\\{\\bar{x}_i\\}$ form an $A/I$-basis for $I/I^2$ [Matsumura1989, Corollary 27.10]{}\n\n\\item From the short exact sequence $0 \\to I \\to A \\to A/I \\to 0$ and (b), we get $\\operatorname{pd}_A A/I < \\infty$\n\n\\item Apply the Auslander-Buchsbaum formula:\n$$\\operatorname{depth} A = \\operatorname{depth} A/I + \\operatorname{pd}_A A/I$$\nSince $\\operatorname{depth} A/I \\leq \\dim A/I \\leq \\operatorname{depth} A$, equality holds and $A/I$ is Cohen-Macaulay\n\n\\item The Ferrand-Vasconcelos criterion [Ferrand1972, Theorem 1.1] now implies $x_1,\\ldots,x_r$ is a regular sequence\n\\end{enumerate}\n\\item [Ferrand-Vasconcelos Criterion]:\nIf $I$ is an ideal in a local ring $(A,\\mathfrak{m})$ such that:\n\\begin{itemize}\n\\item $I/I^2$ is free over $A/I$\n\\item $A/I$ is Cohen-Macaulay\n\\end{itemize}\nthen $I$ is generated by a regular sequence.\n\n[Matsumura1989]\nMatsumura, H. (1989). \\emph{Commutative Ring Theory}. Cambridge University Press.\n\n[Ferrand1972]\nFerrand, D. (1972). Suite régulière et intersection complète. \\emph{C.R. Acad. Sci. Paris}, 274:163--165.\n\n[BrunsHerzog1998]\nBruns, W., Herzog, J. (1998). \\emph{Cohen-Macaulay Rings}. Cambridge University Press.\n\n\n",
    "formal_statement": "import Mathlib\n\n/--\nLet \\( A \\) be a local Noetherian ring, \\( I \\subset A \\) an ideal. Show that\n\\( I \\) is generated by a regular sequence if and only if \\( I/I^2 \\) is free over \\( A/I \\) and\n\\( \\operatorname{pd}_A I < \\infty \\).\n-/\ntheorem generated_by_regular_sequence_iff (R : Type) [CommRing R] [IsLocalRing R]\n    [IsNoetherianRing R] (I : Ideal R) (netop : I ≠ ⊤) :\n    ∃ (rs : List R), (RingTheory.Sequence.IsRegular R rs) ∧ Ideal.ofList rs = I ↔\n    Module.Free (R ⧸ I) I.Cotangent ∧\n    (∃ n, CategoryTheory.HasProjectiveDimensionLE (ModuleCat.of R I) n) := by\n  sorry\n"
  },
  {
    "id": 82,
    "informal_statement": "\nLet \\( A \\) be a Noetherian complete local ring of dimension \\( d \\), of mixed characteristic (i.e., $\\mathrm{Char} A = 0$ and $\\mathrm{Char} A / \\mathfrak{m}$), and let \\( p = \\text{char}(A/\\mathfrak{m}) \\). Assume that \\( \\text{ht}(p \\cdot A) = 1 \\). Prove that \\( A \\) is a finitely generated module over a subring \\( B \\subset A \\) such that\n\\[\nB \\cong C[[x_1, \\dots, x_{d-1}]],\n\\]\nwhere \\( C \\) is a discrete valuation ring (DVR).\n",
    "informal_proof": "\nWe proceed in four steps:\n\n\\textbf{Step 1: Existence of coefficient ring $C$}\\\\\nBy Cohen's Structure Theorem for complete local rings of mixed characteristic [Matsumura1989, Theorem 29.4], \nsince $\\text{ht}(pA) = 1$, there exists a subring $C \\subset A$ such that:\n\\begin{itemize}\n\\item $C$ is a complete DVR with uniformizer $p$\n\\item The residue field $C/(p)$ is isomorphic to $A/\\mathfrak{m}$\n\\item $A$ contains a field of representatives of $A/\\mathfrak{m}$\n\\end{itemize}\n\n\\textbf{Step 2: Construction of $B$}\\\\\nChoose elements $x_1,\\dots,x_{d-1} \\in \\mathfrak{m}$ whose images form a system of parameters in $A/(p)$. \nDefine the subring:\n\\[ B := C[[x_1,\\dots,x_{d-1}]] \\subset A \\]\nThis is well-defined since $A$ is complete.\n\n\\textbf{Step 3: Finiteness of $A$ over $B$}\\\\\nWe verify the finiteness conditions:\n\\begin{enumerate}\n\\item The elements $p,x_1,\\dots,x_{d-1}$ form a system of parameters for $A$ since:\n\\begin{itemize}\n\\item $\\dim A/(p) = d-1$ (as $\\text{ht}(p) = 1$)\n\\item The images $\\bar{x}_1,\\dots,\\bar{x}_{d-1}$ are parameters in $A/(p)$\n\\end{itemize}\n\\item The extension $B \\hookrightarrow A$ is finite because:\n\\begin{itemize}\n\\item $A$ is complete with respect to its maximal ideal\n\\item $A$ is finitely generated as a $B$-module (by the Cohen Structure Theorem)\n\\end{itemize}\n\\end{enumerate}\n\n\\textbf{Step 4: Verification of $B$'s structure}\\\\\nWe confirm that $B$ has the required form:\n\\begin{itemize}\n\\item $C$ is a DVR by construction (from Step 1)\n\\item $B \\cong C[[x_1,\\dots,x_{d-1}]]$ is regular because:\n\\begin{itemize}\n\\item $C$ is regular (being a DVR)\n\\item The power series extension preserves regularity [Matsumura1989, Theorem 19.5]\n\\end{itemize}\n\\item $\\dim B = \\dim C + (d-1) = 1 + (d-1) = d$ matches $\\dim A$\n\\end{itemize}\n\n[Matsumura1989]\nMatsumura, H. (1989). \\emph{Commutative Ring Theory}. Cambridge University Press.\n\n[BrunsHerzog1998]\nBruns, W., Herzog, J. (1998). \\emph{Cohen-Macaulay Rings}. Cambridge University Press.\n\n\n\n\n\n\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing\n\n/--\nLet \\( A \\) be a complete local ring of dimension \\( d \\), of mixed characteristic\n(i.e., $\\mathrm{Char} A = 0$ and $\\mathrm{Char} A / \\mathfrak{m}$), and let \\( p = \\text{char}(A/\\mathfrak{m}) \\).\nAssume that \\( \\text{ht}(p \\cdot A) = 1 \\).\nProve that \\( A \\) is a finitely generated module over a subring \\( B \\subset A \\) such that\n\\[\nB \\cong C[[x_1, \\dots, x_{d-1}]],\n\\]\nwhere \\( C \\) is a discrete valuation ring (DVR). -/\ntheorem subring_iso_mvPowerSeries_over_DVR (d : ℕ) (A : Type) [CommRing A] [IsLocalRing A]\n    [IsAdicComplete (maximalIdeal A) A] (dim : ringKrullDim A = d) (p : ℕ) [Fact p.Prime]\n    [CharZero A] [CharP (ResidueField A) p] (ht : (Ideal.span {(p : A)}).height = 1) :\n    ∃ B : Subring A, Module.Finite B A ∧\n    ∃ (C : Type) (_ : CommRing C) (_ : IsDomain C), IsDiscreteValuationRing C ∧\n    Nonempty (B ≃+* MvPowerSeries (Fin (d - 1)) C) := by\n  sorry\n"
  },
  {
    "id": 83,
    "informal_statement": "\nLet \\( f \\colon A \\to B \\) be a flat local homomorphism of Noetherian rings, having maximal ideals \\( \\mathfrak{M}_A \\) and \\( \\mathfrak{M}_B \\) respectively. Prove that if \\( A \\) and \\( B/\\mathfrak{M}_A B \\) are regular, then \\( B \\) is regular.\n",
    "informal_proof": "\n1. \\textbf{Dimension formula}: By flatness,\n\\[ \\dim B = \\dim A + \\dim B/\\mathfrak{M}_A B \\]\n[Matsumura1989, Thm 15.1].\n\n2. \\textbf{Tangent spaces}:\nLet $k = A/\\mathfrak{m}_A$ be the residue field. We analyze the Zariski cotangent spaces:\n\n\\begin{enumerate}\n\\item For the base ring $A$:\n\\begin{itemize}\n\\item Since $A$ is regular, we have the equality\n\\[ \\dim_k \\mathfrak{M}_A/\\mathfrak{M}_A^2 = \\dim A \\]\nThis follows from the definition of regularity via the minimal number of generators of $\\mathfrak{M}_A$ [Matsumura1989, Theorem 14.2].\n\\end{itemize}\n\n\\item For the fiber ring $\\overline{B} = B/\\mathfrak{M}_A B$:\n\\begin{itemize}\n\\item By the second hypothesis, $\\overline{B}$ is regular with maximal ideal $\\mathfrak{M}_{\\overline{B}} = \\mathfrak{M}_B/\\mathfrak{M}_A B$\n\\item Thus we have\n\\[ \\dim_{\\overline{B}/\\mathfrak{M}_{\\overline{B}}} \\mathfrak{M}_{\\overline{B}}/\\mathfrak{M}_{\\overline{B}}^2 = \\dim \\overline{B} \\]\n\\end{itemize}\n\n\\item For the target ring $B$:\n\\begin{itemize}\n\\item From the exact sequence of $k$-vector spaces\n\\[ 0 \\to \\mathfrak{M}_A B/\\mathfrak{M}_A \\mathfrak{M}_B \\to \\mathfrak{M}_B/\\mathfrak{M}_B^2 \\to \\mathfrak{M}_B/(\\mathfrak{M}_A B + \\mathfrak{M}_B^2) \\to 0 \\]\nwe obtain the dimension decomposition\n\\[ \\dim_k \\mathfrak{M}_B/\\mathfrak{M}_B^2 = \\dim_k (\\mathfrak{M}_A B/\\mathfrak{M}_A \\mathfrak{M}_B) + \\dim_k (\\mathfrak{M}_B/(\\mathfrak{M}_A B + \\mathfrak{M}_B^2)) \\]\n\n\\item Using flatness, we identify:\n\\begin{align*}\n\\mathfrak{M}_A B/\\mathfrak{M}_A \\mathfrak{M}_B &\\cong \\mathfrak{M}_A/\\mathfrak{m}_A^2 \\otimes_A B/\\mathfrak{M}_B \\\\\n&\\cong \\mathfrak{M}_A/\\mathfrak{M}_A^2 \\otimes_A k \\\\\n&\\cong \\mathfrak{M}_A/\\mathfrak{M}_A^2\n\\end{align*}\nThus $\\dim_k (\\mathfrak{M}_A B/\\mathfrak{M}_A \\mathfrak{m}_B) = \\dim_k \\mathfrak{M}_A/\\mathfrak{M}_A^2 = \\dim A$.\n\n\\item For the second term:\n\\[ \\mathfrak{M}_B/(\\mathfrak{M}_A B + \\mathfrak{M}_B^2) \\cong \\mathfrak{M}_{\\overline{B}}/\\mathfrak{M}_{\\overline{B}}^2 \\]\ngiving $\\dim_k (\\mathfrak{M}_B/(\\mathfrak{M}_A B + \\mathfrak{m}_B^2)) = \\dim_{\\overline{B}/\\mathfrak{M}_{\\overline{B}}} \\mathfrak{m}_{\\overline{B}}/\\mathfrak{M}_{\\overline{B}}^2 = \\dim \\overline{B}$.\n\\end{itemize}\n\\end{enumerate}\n\nCombining these, we obtain the key equality:\n\\[ \\dim_k \\mathfrak{M}_B/\\mathfrak{M}_B^2 = \\dim A + \\dim \\overline{B} = \\dim B \\]\nwhere the last equality follows from the dimension formula for flat extensions [Matsumura1989, Theorem 15.1]. This proves $B$ is regular.\n\n\n\n[Matsumura1989] Matsumura, H. (1989). \\emph{Commutative Ring Theory}. Cambridge.\n\n\n",
    "formal_statement": "import Mathlib\n\nopen IsLocalRing\n\n/-- A commutative local noetherian ring $R$ is regular if $\\dim m/m^2 = \\dim R$. -/\nclass IsRegularLocalRing (R : Type) [CommRing R] : Prop extends\n    IsLocalRing R, IsNoetherianRing R where\n  reg : Module.finrank (ResidueField R) (CotangentSpace R) = ringKrullDim R\n\n/--\nLet \\( f \\colon A \\to B \\) be a flat local homomorphism of Noetherian rings,\nhaving maximal ideals \\( \\mathfrak{M}_A \\) and \\( \\mathfrak{M}_B \\) respectively.\nProve that if \\( A \\) and \\( B/\\mathfrak{M}_A B \\) are regular, then \\( B \\) is regular.\n-/\ntheorem IsRegularLocalRing.flat_local_of_regular {A B : Type} [CommRing A] [CommRing B]\n    [IsRegularLocalRing A] [IsNoetherianRing B] [IsLocalRing B] {f : A →+* B} (hfl : IsLocalHom f)\n    (hff : f.Flat) [IsRegularLocalRing (B ⧸ (maximalIdeal A).map f)] : IsRegularLocalRing B := by\n  sorry\n"
  },
  {
    "id": 84,
    "informal_statement": "\nFor a projective module \\(M\\) over a commutative ring \\(R\\), there exists a free \\(R\\)-module \\(N\\), such that \\(M \\oplus N\\) is free.\n",
    "informal_proof": "\n\\href{https://stacks.math.columbia.edu/tag/0GVG}{StacksProject, tag 0GVG}\n",
    "formal_statement": "import Mathlib\n\n/--\nFor a projective module \\(M\\) over a commutative ring \\(R\\),\nthere exists a free \\(R\\)-module \\(N\\), such that \\(M \\oplus N\\) is free.\n-/\ntheorem exists_directSum_free_free_of_projective (R M : Type) [CommRing R] [AddCommGroup M]\n    [Module R M] [Module.Projective R M] : ∃ (N : Type) (_ : AddCommGroup N) (_ : Module R N),\n    Module.Free R N ∧ Module.Free R (N × M) := by\n  sorry\n"
  },
  {
    "id": 85,
    "informal_statement": "\nThere exists a transfinite Euclidean domain such that it cannot be given a Euclidean norm taking value in \\(\\mathbb{N}\\).\n",
    "informal_proof": "\nA direct consequence of theorem 1.2 in this paper \\href{https://arxiv.org/abs/1703.02631}{Transfinitely valued Euclidean domains have arbitrary indecomposable order type}.\n",
    "formal_statement": "import Mathlib\n\n/--\nDefinition of a Euclidean norm taking value in \\(\\mathbb{N}\\).\n-/\nclass EuclideanNormNat (R : Type) [CommRing R] extends Nontrivial R where\n  quotient : R → R → R\n  quotient_zero : ∀ a, quotient a 0 = 0\n  remainder : R → R → R\n  quotient_mul_add_remainder_eq : ∀ a b, b * quotient a b + remainder a b = a\n  norm : R → ℕ\n  remainder_lt : ∀ (a) {b}, b ≠ 0 → norm (remainder a b) < norm b\n  mul_left_not_lt : ∀ (a) {b}, b ≠ 0 → ¬ norm (a * b) < norm a\n\n/--\nThere exists a transfinite Euclidean domain such that it cannot be given a Euclidean norm taking value in \\(\\mathbb{N}\\).-/\ntheorem exist_euclideanDomain_not_norm_nat :\n    ∃ (R : Type) (_ : EuclideanDomain R), IsEmpty (EuclideanNormNat R) := by\n  sorry\n"
  },
  {
    "id": 86,
    "informal_statement": "\nFor a commutative ring \\( A \\), \\( dim A[x, y] + dim A \\le 2 * dim A[x]\\). \n",
    "informal_proof": "\n    See Arnold, Jimmy T., and Robert Gilmer. “The Dimension Sequence of a Commutative Ring.” American Journal of Mathematics, vol. 96, no. 3, 1974, pp. 385–408. JSTOR, https://doi.org/10.2307/2373549. Accessed 19 June 2025. \\url{https://www.jstor.org/stable/2373549?seq=1}\n",
    "formal_statement": "import Mathlib\n\n/--\nFor a commutative ring \\( A \\), \\( dim A[x, y] + dim A \\le 2 * dim A[x]\\).\n-/\ntheorem dimension_convex (A : Type) [CommRing A] :\n    ringKrullDim (MvPolynomial A (Fin 2)) + ringKrullDim A ≤ 2 * ringKrullDim (Polynomial A) := by\n  sorry\n"
  },
  {
    "id": 87,
    "informal_statement": "\nThere exists two commutative rings \\(R, S\\), such that \\(R[x]\\) is isomorphic to \\(S[x]\\) but \\(R\\) is not isomorphic to \\(S\\).\n",
    "informal_proof": "\nSee the paper \\href{https://www.ams.org/journals/proc/1972-034-01/S0002-9939-1972-0294325-3/S0002-9939-1972-0294325-3.pdf}{Nonuniqueness of coefficient rings in a polynomial ring} by M. HÖCHSTER. The paper's abstract is: An example is given of commutative rings $B, C$ with $1$ such that $B\\not\\cong C$ but $B[t]\\cong C[t]$, where $t$ is an indeterminate.\n",
    "formal_statement": "import Mathlib\n\n/--\nThere exists two commutative rings \\(R, S\\), such that \\(R[x]\\) is isomorphic to \\(S[x]\\) but \\(R\\) is not isomorphic to \\(S\\).\n-/\ntheorem exists_polynomial_ringEquiv_isEmpty_ringEquiv :\n    ∃ (R S : Type) (_ : CommRing R) (_ : CommRing S),\n    Nonempty ((Polynomial R) ≃+* (Polynomial S)) ∧ IsEmpty (R ≃+* S) := by\n  sorry\n"
  },
  {
    "id": 88,
    "informal_statement": "\n$\\mathbb{C}[x, y, z] / (x^2 + y^3 + z^7)$ is a UFD.\n",
    "informal_proof": "\n\nLet \\( A = K[X,Y,Z]/(X^2 + Y^3 + Z^7) \\) and denote by \\( x, y, z \\) the residue classes of \\( X, Y, Z \\) modulo \\( (X^2 + Y^3 + Z^7) \\). \n\nWe have that \n\\[ A/zA \\simeq K[X,Y]/(X^2 + Y^3) \\]\nis an integral domain, so \\( z \\in A \\) is a prime element.\n\nNow consider the localization \\( A[z^{-1}] \\). We have \n\\[ A[z^{-1}] = K[x, y, z][z^{-1}]. \\]\nFurthermore, if we set \\( x' = x/z^3 \\) and \\( y' = y/z^2 \\), then \n\\[ z = -(x'^2 + y'^3). \\]\nThis shows that \n\\[ A[z^{-1}] = K[x', y'][z^{-1}], \\]\nand this is a unique factorization domain (UFD) since \\( x' \\) and \\( y' \\) are algebraically independent over \\( K \\). \n\nBy Nagata's criterion for factoriality, since \\( z \\) is a prime element and \\( A[z^{-1}] \\) is a UFD, it follows that \\( A \\) itself is a UFD.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nThe ring $R = \\mathbb{C}[x, y, z] / (x^2 + y^3 + z^7)$.\n-/\nabbrev R : Type := (MvPolynomial (Fin 3) ℂ) ⧸ Ideal.span {(.X 0 ^ 2 + .X 1 ^ 3 + .X 2 ^ 7 : MvPolynomial (Fin 3) ℂ)}\n\n/--\n$\\mathbb{C}[x, y, z] / (x^2 + y^3 + z^7)$ is a UFD.\n-/\ntheorem quotient_not_UFD :\n    ∃ (h : IsDomain R),\n    (UniqueFactorizationMonoid R) := by\n  sorry\n"
  },
  {
    "id": 89,
    "informal_statement": "\n    Prove that if $\\#G = 336$ then $G$ is not simple.\n",
    "informal_proof": "\n    We show that $|G|=p^3-p$ is a simple group. By Sylow's theorem, there's a $p$-Sylow subgroup of order $p$, and the number of $p$-Sylow subgroup is exactly $p+1$, We denote them as $X_0, \\cdots, X_p$. Let $G$ acts on $X=\\{X_0, \\cdots, X_p\\}$ by conjugation, giving a homomorphism\n\t$$\n\t\\phi \\colon G\\to S_{p+1}.\n\t$$\n\tSince $\\ker \\phi \\lhd G$ and $\\phi$ is non-trivial (because $G$ is of course not commutative), $\\phi$ therefore is an embedding.\n\t\n\tThen we consider $M = N_G(X_p)$, we have\n\t$$\n\t\\#(N_{G}(X_p)) = \\#(\\text{Stab}_G(X_p)) = \\dfrac{\\#(G)}{\\#(\\text{Orb}_G(X_p))} = \\dfrac{\\#(G)}{\\#(X)} = p^2-p.\n\t$$\n\tFor an arbitary elememt $a\\in X_p$, $\\phi(a)$ acts on $X$ having a fixed point $X_p$. So it's a cyclic permutation of $X_0,\\cdots,X_{p-1}$. WLOG $\\phi(a)X_i=X_{i+1},\\ \\phi(a)X_{p-1}=X_0$, then for every $g\\in M$, if $\\phi(g)X_i=X_{\\sigma i}$, then\n\t$$\n\tgag^{-1}=a^k\\Rightarrow \\sigma(i+1) = \\sigma i + k \\Rightarrow \\sigma k=ak+b(a\\neq0).\n\t$$\n\tHowever, the number of the pairs $(a,b)$ is exactly $p^2-p$, since $\\phi$ is an embedding, it's also a bijective mapping. Set $\\lambda$ as a primitive root mod $p$, then there exist an element $h\\in M$ such that $\\phi(h)X_i = X_{\\lambda i}$. then $\\phi(h)$ is the cyclic permutation of $X_1,\\cdots,X_{p-1}$, and is therefore a odd permutation. However, $[G,G] \\lhd G \\Rightarrow [G,G] = G$ (because $G$ is of course not commutative). So $\\phi(h) \\in [G,G]$ is an even permutation, which led to contradiction.\n",
    "formal_statement": "import Mathlib\n\n/--\nProve that if $\\#G = 336$ then $G$ is not simple.\n-/\ntheorem not_isSimpleGroup_of_card_eq_336 (G : Type) [Group G]\n    [Finite G] (h_card : Nat.card G = 336) : ¬ IsSimpleGroup G := by\n  sorry\n"
  },
  {
    "id": 90,
    "informal_statement": "\nGiven a field $k$, there exists some $n > 0$, there exists some subfield $K \\subseteq k(x_1, \\cdots ,x_n) $, such that $K \\cap k [X_1, \\cdots, x_n]$ is not a finitely generated $k$-algebra.  \n\n    \n",
    "informal_proof": "\n\\url{https://www.jstor.org/stable/2372927?seq=1}\n",
    "formal_statement": "import Mathlib\n\n/--\nGiven a field $k$, there exists some $n > 0$, there exists some subfield $K \\subseteq k(x_1, \\cdots ,x_n) $,\nsuch that $K \\cap k [X_1, \\cdots, x_n]$ is not a finitely generated $k$-algebra.\n-/\ntheorem not_finiteType_inf_algebraMap_range (k : Type) [Field k] :\n    ∃ (n : ℕ) (K : IntermediateField k (FractionRing (MvPolynomial (Fin n) k))),\n    ¬ Algebra.FiniteType k (K.toSubalgebra ⊓ (Algebra.algHom k (MvPolynomial (Fin n) k)\n    (FractionRing (MvPolynomial (Fin n) k))).range :\n    Subalgebra k (FractionRing (MvPolynomial (Fin n) k))) := by\n  sorry\n"
  },
  {
    "id": 91,
    "informal_statement": "\nLet $ k $ be a field, $ A := k[x, y]/(xy(x + y - 1)) $, then $ \\mathrm{Pic}\\ A \\cong k^{\\times} $.\n",
    "informal_proof": "\n先证明引理: 设 $ X $ 是既约概型且只有有限个不可约分支, $ C, D $ 是 $ X $ 的闭子概型, $ E := C \\cap D $. 记 $ C, D $ 对应的理想层分别为 $ \\mathcal{J}_C, \\mathcal{J}_D $, 则 $ E $ 对应的理想层为 $ \\mathcal{J}_C + \\mathcal{J}_D $. 若 $ C \\cup D = X $, 则有如下正合列\n\t\\begin{center}\n\t\t\\begin{tikzcd}\n\t\t\t\\mathcal{O}(C)^{\\times} \\times \\mathcal{O}(D)^{\\times} \\arrow[rrr, \"{(a, b) \\, \\mapsto \\, a|_E(b|_E)^{-1}}\"] &  &  & \\mathcal{O}(E)^{\\times} \\arrow[r] & \\mathrm{Pic}\\ X \\arrow[r] & \\mathrm{Pic}\\ C \\times \\mathrm{Pic}\\ D \\arrow[r] & \\mathrm{Pic}\\ E.\n\t\t\\end{tikzcd}\n\t\\end{center}\n引理的证明: 设 $ \\pi_C : C \\to X, \\pi_D : D \\to X, \\pi_E : E \\to X $ 是闭浸入, 则有 $ X $ 上的层的复形\n\t\\begin{center}\n\t\t\\begin{tikzcd}\n\t\t\t1 \\arrow[r] &  \\mathcal{O}_X^{\\times} \\arrow[rr, \"{a \\, \\mapsto \\, (a, a)}\"] &  & (\\pi_C)_*\\mathcal{O}_C^{\\times} \\times (\\pi_D)_*\\mathcal{O}_D^{\\times} \\arrow[rrr, \"{(a, b) \\, \\mapsto \\, a|_E(b|_E)^{-1}}\"] &  &  & (\\pi_E)_*\\mathcal{O}_E^{\\times} \\arrow[r] & 1.\n\t\t\\end{tikzcd}\n\t\\end{center}\n\t这是一个正合列, 因为在每个茎 (stalk) 上 $ 1 \\to A^{\\times} \\to (A / I_C)^{\\times} \\times (A / I_D)^{\\times} \\to \\left(A / (I_C + I_D)\\right)^{\\times} \\to 1 $ 是正合列, 其中 $ A := \\mathcal{O}_{X, x} $ 是局部环, $ I_C := \\mathcal{J}_{C, x}, I_D := \\mathcal{J}_{D, x} $ 是 $ A $ 的理想且 $ I_C \\cap I_D = 0 $.\n\t故可以导出长正合列\n\t\\begin{center}\n\t\t\\begin{tikzcd}\n\t\t\t1 \\arrow[r] &  \\mathcal{O}(X)^{\\times} \\arrow[r] & \\mathcal{O}(C)^{\\times} \\times \\mathcal{O}(D)^{\\times} \\arrow[r] & \\mathcal{O}(E)^{\\times} \\arrow[r] & {} \\\\ & H^1(X, \\mathcal{O}_X^{\\times}) \\arrow[r] & H^1(X, (\\pi_C)_*\\mathcal{O}_C^{\\times} \\times (\\pi_D)_*\\mathcal{O}_D^{\\times}) \\arrow[r] & H^1(X, (\\pi_E)_*\\mathcal{O}_E^{\\times}) \\arrow[r] & \\cdots\n\t\t\\end{tikzcd}\n\t\\end{center}\n\t由 \\href{https://stacks.math.columbia.edu/tag/09NU}{Stacks project, Lemma 09NU} 和闭浸入的推出不改变上同调知 $ H^1(X, \\mathcal{O}_X^{\\times}) \\cong \\mathrm{Pic}\\ X $, $ H^1(X, (\\pi_C)_*\\mathcal{O}_C^{\\times} \\times (\\pi_D)_*\\mathcal{O}_D^{\\times}) \\cong H^1(X, \\mathcal{O}_C^{\\times}) \\times H^1(D, \\mathcal{O}_D^{\\times}) \\cong \\mathrm{Pic}\\ C \\times \\mathrm{Pic}\\ D $, $ H^1(X, (\\pi_E)_*\\mathcal{O}_E^{\\times}) \\cong H^1(E, \\mathcal{O}_E^{\\times}) \\cong \\mathrm{Pic}\\ E $. 代入上式即得所需的正合列.\n\n回到原题, 令 $X := \\mathrm{Spec}\\, A$. 如图, 令 $ L_1 : x = 0, L_2 : y = 0, L_3 : x + y = 1 $, 则 $ X = L_1 \\cup L_2 \\cup L_3 $. \n\t\\begin{center}\n\t\t\\begin{tikzpicture}\n\t\t\t\\draw[thick] (0,-1) -- (0,2) node[above] {$L_1: x=0$};\n\t\t\t\\draw[thick] (-1,0) -- (2,0) node[right] {$L_2: y=0$};\n\t\t\t\\draw[thick] (-0.7, 1.7) -- (1.7, -0.7) node[right] {$L_3: x+y=1$};\n\t\t\\end{tikzpicture}\n\t\\end{center}\n\t注意 $ L_i \\cong \\mathbb{A}^1_k $, 故 $ \\mathrm{Pic}\\ L_i = 0 $, $ i = 1, 2, 3 $. \n\t\n\t记 $ Y := \\mathrm{Spec}\\, k[x, y]/(xy) = L_1 \\cup L_2 $. 由引理知存在正合列\n\t\\begin{center}\n\t\t\\begin{tikzcd}\n\t\t\t\\mathcal{O}(L_1)^{\\times} \\times \\mathcal{O}(L_2)^{\\times} \\arrow[rrr, \"{(a, b) \\, \\mapsto \\, a|_E(b|_E)^{-1}}\"] &  &  & \\mathcal{O}(L_1 \\cap L_2)^{\\times} \\arrow[r] & \\mathrm{Pic}\\ Y \\arrow[r] & \\mathrm{Pic}\\ L_1 \\times \\mathrm{Pic}\\ L_2 = 0.\n\t\t\\end{tikzcd}\n\t\\end{center}\n\t注意 $ \\mathcal{O}(L_1)^{\\times} \\cong k[y]^{\\times} \\cong k^{\\times}, \\mathcal{O}(L_2)^{\\times} \\cong k[x]^{\\times} \\cong k^{\\times}, \\mathcal{O}(L_1 \\cap L_2)^{\\times} \\cong k^{\\times} $, $ k^{\\times} \\times k^{\\times} \\to k^{\\times}, (a, b) \\mapsto ab^{-1} $ 是满射, 故 $ \\mathrm{Pic}\\ Y = 0 $.\n\t\n\t又由引理知存在正合列\n\t\\begin{center}\n\t\t\\begin{tikzcd}\n\t\t\t\\mathcal{O}(Y)^{\\times} \\times \\mathcal{O}(L_3)^{\\times} \\arrow[rrr, \"{(a, b) \\, \\mapsto \\, a|_E(b|_E)^{-1}}\"] &  &  & \\mathcal{O}(Y \\cap L_3)^{\\times} \\arrow[r] & \\mathrm{Pic}\\ X \\arrow[r] & \\mathrm{Pic}\\ Y \\times \\mathrm{Pic}\\ L_3 = 0.\n\t\t\\end{tikzcd}\n\t\\end{center}\n\t同上有 $ \\mathcal{O}(Y)^{\\times} \\cong \\mathcal{O}(L_3) \\cong k^{\\times}, \\mathcal{O}(Y \\cap L_3)^{\\times} \\cong k^{\\times} \\times k^{\\times} $, 则 $ \\varphi : \\mathcal{O}(Y)^{\\times} \\times \\mathcal{O}(L_3)^{\\times} \\to \\mathcal{O}(Y \\cap L_3)^{\\times} $ 形如 $ (a, b) \\mapsto (ab^{-1}, ab^{-1}) $, 故 $ \\mathrm{Pic}\\ X \\cong \\mathrm{Coker}(\\varphi) \\cong k^{\\times} $.\n",
    "formal_statement": "import Mathlib\n\nopen CategoryTheory MvPolynomial\n\n/-- The Picard group of a commutative ring R consists of the invertible R-modules,\n  up to isomorphism. -/\nabbrev CommRing.Pic (R : Type) [CommRing R] : Type 1 := (Skeleton <| ModuleCat.{0} R)ˣ\n\n/--\nLet $ k $ be a field, $ A := k[x, y]/(xy(x + y - 1)) $, then $ \\mathrm{Pic}\\ A \\cong k^{\\times} $.\n-/\ntheorem pic_three_lines {k : Type} [Field k] : Nonempty <|\n    CommRing.Pic (MvPolynomial (Fin 2) k ⧸ Ideal.span ({(X 0) * (X 1) * (X 0 + X 1 - 1)} :\n    Set (MvPolynomial (Fin 2) k))) ≃* kˣ := by\n  sorry\n"
  },
  {
    "id": 92,
    "informal_statement": "\nLet $A$ be a commutative ring with identity, $\\dim A = 1$.\nThen all possible sequences for \\(a_n = dim A[x_1, \\ldots, x_n] ( n \\in \\mathbb{N})\\) are exactly the sequences of the form: \\(a_n = 2n+1\\) if \\(n \\le k\\) else \\(a_n = n + k + 1\\), for some \\(k \\in \\mathbb{N} \\cup \\{+\\infty\\}\\).\n",
    "informal_proof": "\n    For the proof, one can apply 604, and for the construction, one can refer to:\n    \n    E. Bastida and R. Gilner, \"Overrings and divisorial ideals of rings of the form D+M,\" Michigan Journal of Math., 20 (1973), pp.79-95\n    \n    \\url{https://scispace.com/pdf/overrings-and-divisorial-ideals-of-rings-of-the-form-d-m-33rmkfrv1s.pdf}\n",
    "formal_statement": "import Mathlib\n\n/--\n\\(a_n = 2n+1\\) if \\(n \\le k\\) else \\(a_n = n + k + 1\\), for some \\(k \\in \\mathbb{N} \\{+\\infty\\}\\).\n-/\ndef a (k : ℕ∞) (n : ℕ) :=\n  if h : n ≤ k then 2 * n + 1\n  else n + WithTop.untop k (by rintro rfl; exact h le_top) + 1\n\n/--\nLet $A$ be a commutative ring with identity, $\\dim A = 1$.\nThen all possible sequences for \\(a_n = dim A[x_1, \\ldots, x_n] ( n \\in \\mathbb{N})\\) are exactly the sequences of the form:\n\\(a_n = 2n+1\\) if \\(n \\le k\\) else \\(a_n = n + k + 1\\), for some \\(k \\in \\mathbb{N} \\cup \\{+\\infty\\}\\).\n-/\ntheorem dimension_sequences_of_one_dimensional_rings :\n    (∀ (A : Type) [CommRing A] (h : ringKrullDim A = 1),\n      ∃ (k : ℕ∞), (∀ (n : ℕ), ringKrullDim (MvPolynomial (Fin n) A) = a k n)) ∧\n    (∀ (k : ℕ), ∃ (A : Type) (_ : CommRing A) (h : ringKrullDim A = 1),\n      (∀ (n : ℕ), ringKrullDim (MvPolynomial (Fin n) A) = a k n)):= by\n  sorry\n"
  },
  {
    "id": 93,
    "informal_statement": "\n    There exists a field $k$ and a (not necessarily commutative) ring $A$ such that $A$ is integral and finitely generated over $k$ but $\\dim_k A$ is not finite.\n",
    "informal_proof": "\nThis is \\href{https://en.wikipedia.org/wiki/Kurosh_problem}{Kurosh problem}. It is found in \\href{https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/IntegralClosure/IsIntegralClosure/Basic.html#Algebra.IsIntegral.finite}{docs of mathlib}.\n\n",
    "formal_statement": "import Mathlib\n\n/--\nThere exists a field $k$ and a (not necessarily commutative) ring $A$\nsuch that $A$ is integral and finitely generated over $k$ but $\\dim_k A$ is not finite.\n-/\ntheorem exists_integral_finiteType_not_finiteDimensional : ∃ (k A : Type) (_ : Field k)\n    (_ : Ring A) (_ : Algebra k A),\n    Algebra.IsIntegral k A ∧ Algebra.FiniteType k A ∧ ¬ FiniteDimensional k A := by\n  sorry\n"
  },
  {
    "id": 94,
    "informal_statement": "\n    Let $k$ be field, $\\mathrm{char}\\ k=0$, $ A $ be a finite-type $k$-algebra, $f: A \\to A$ be an \\'etale endomorphsim, $\\varphi: A \\to k$, $I \\subset A$ be a ideal. If $A$ is a domain, then $$\\left\\lbrace  n \\in \\mathbb{N} \\mid \\left. \\varphi \\circ f^n \\right|_I = 0 \\right\\rbrace $$ is either finite or contains an arithmetic progression with a positive common difference.\n",
    "informal_proof": "\nThis is a special case of the DML conjecture. See theorem 1.3 of Jason P Bell, Dragos Ghioca, and Thomas J Tucker. “The dynamical Mordell–Lang problem for \\'etale maps.” In: American journal of mathematics 132.6 (2010), pp. 1655–1675.\n",
    "formal_statement": "import Mathlib\n\nvariable {k A : Type} [Field k] [CharZero k] [CommRing A] [IsDomain A] [Algebra k A]\n  [Algebra.FiniteType k A] (f : A →ₐ[k] A) (ϕ : A →ₐ[k] k) (I : Ideal A)\n\n/-- The set $\\{ n \\in \\mathbb{N} \\mid \\left. \\varphi \\circ f^n \\right|_I = 0 \\right\\rbrace \\}$. -/\ndef zeroSet : Set ℕ := {n | ∀ x : I, (ϕ.comp (f ^ n)) (x : A) = 0}\n\n/--\nLet $k$ be field, $\\mathrm{char}\\ k=0$, $ A $ be a finite-type $k$-algebra, $f: A \\to A$ be an \\'etale endomorphsim, $\\varphi: A \\to k$, $I \\subset A$ be a ideal.\nIf $A$ is a domain, then $$\\left\\lbrace  n \\in \\mathbb{N} \\mid \\left. \\varphi \\circ f^n \\right|_I = 0 \\right\\rbrace $$ is either finite or contains an arithmetic progression with a positive common difference. -/\ntheorem zeroSet_finite_or_contain_arithmetic_progression (hf : f.FormallyEtale) :\n    (zeroSet f ϕ I).Finite ∨ ∃ (d : ℕ+) (a : ℕ), ∀ n : ℕ, a + d * n ∈ zeroSet f ϕ I := by\n  sorry\n"
  },
  {
    "id": 95,
    "informal_statement": "\n   Let $f : \\mathbb{C}[x, y] \\to \\mathbb{C}[x, y]$, $x \\mapsto p(x) + ay, y \\mapsto x$, where $a \\in \\mathbb{C}$, $a \\ne 0$, $p(x) \\in \\mathbb{C}[x]$ have degree $>1$, $\\mathfrak{p} \\subset \\mathbb{C}[x, y]$ be a prime ideal. If $\\mathrm{height}\\ \\mathfrak{p} = 1 $, then $f(\\mathfrak{p}) \\ne \\mathfrak{p}$.\n",
    "informal_proof": "\nA Hénon map does not preserve any algebraic curve. In fact, the entropy of $f$ is $\\log \\deg p > 0$. If $f$ has an invariant curve, then the normalized currents of integration on the push-forwards of this curve converge to the (1, 1) current $\\mu-$, whose support does not lie on an algebraic curve by the propsition 4.2 of Bedford, E., Smillie, J.: Polynomial diffeomorphisms of $\\mathbb{C}^2$ : currents, equilibrium measure and hyper-\nbolicity. Invent. Math. 103(1), 69–99 (1991). There is also an algebraic proof using Berkovich space.\n",
    "formal_statement": "import Mathlib\n\nopen Polynomial Bivariate\n\n/--\nLet $f : \\mathbb{C}[x, y] \\to \\mathbb{C}[x, y]$, $x \\mapsto p(x) + ay, y \\mapsto x$,\nwhere $a \\in \\mathbb{C}$, $p(x) \\in \\mathbb{C}[x]$.\n-/\nnoncomputable\ndef f (a : ℂ) (p : ℂ[X]): ℂ[X][Y] →+* ℂ[X][Y] :=\n  eval₂RingHom (aeval (a • Y + C p)).toRingHom (C X)\n\n/--\nLet $f : \\mathbb{C}[x, y] \\to \\mathbb{C}[x, y]$, $x \\mapsto p(x) + ay, y \\mapsto x$,\nwhere $a \\in \\mathbb{C}$, $a \\ne 0$, $p(x) \\in \\mathbb{C}[x]$ have degree $>1$, $\\mathfrak{p} \\subset \\mathbb{C}[x, y]$ be a prime ideal.\nIf $\\mathrm{height}\\ \\mathfrak{p} = 1 $, then $f(\\mathfrak{p}) \\ne \\mathfrak{p}$.\n-/\ntheorem p_map_ne_p (p : ℂ[X]) (h : p.natDegree > 1) {a : ℂ} (ha : a ≠ 0)\n    (𝔭 : Ideal ℂ[X][Y]) (h𝔭 : 𝔭.IsPrime) (h : 𝔭.height = 1) :\n    𝔭.map (f a p) ≠ 𝔭 := by\n  sorry\n"
  },
  {
    "id": 96,
    "informal_statement": "\n    Let $f(x) \\in \\mathbb{Q}(x)$ be a rational function of degree at least 2, $\\alpha \\in \\mathbb{Q}$. If the orbit $\\mathcal{O}_f(\\alpha)$ contains infinitely many integers, then $f^2(x)$ is a polynomial.\n",
    "informal_proof": "\nTHEOREM A of Joseph H. Silverman, Integer points, Diophantine approximation, and iteration of rational maps, Duke Math. J. 71 (1993), no. 3, 793–829, DOI 10.1215/S0012-7094-93-07129-3.\n",
    "formal_statement": "import Mathlib\n\nopen RatFunc\n\n/--\nLet $f(x) \\in \\mathbb{Q}(x)$ be a rational function of degree at least 2, $\\alpha \\in \\mathbb{Q}$.\nIf the orbit $\\mathcal{O}_f(\\alpha)$ contains infinitely many integers, then $f^2(x)$ is a polynomial.\n-/\ntheorem ratFunc_square_is_poly_of_orbit_contain_infinite_integer\n    {f : RatFunc ℚ} (hf : f.num.natDegree ≥ 2 ∨ f.denom.natDegree ≥ 2) {a : ℚ}\n    (h : ∀ n : ℕ, (f.eval (RingHom.id ℚ))^[n] a ≠ 0) -- exclude the case that the `denom` is zero\n    (ha : {m : ℤ | ∃ n : ℕ, m = (f.eval (RingHom.id ℚ))^[n] a}.Infinite) :\n    ∃ g : Polynomial ℚ, g = f.eval C f := by\n  sorry\n"
  },
  {
    "id": 97,
    "informal_statement": "\n    If $k$ is a field of characteristic zero, $n \\in \\mathbb{N}$, $n \\ne 0$, and $\\phi \\colon k[x_1, \\dots, x_n] \\to k[x_1, \\dots, x_n]$ is given by $(x_1, \\dots, x_n) \\mapsto (f_1(x_1), \\dots, f_n(x_n))$, where $f_i(x_i) \\in k[x_i]$ having degree at least two, then there is a point $a \\in k^n$ such that for any non-zero polyminal $p \\in k[x_1, \\dots, x_n]$, there exists $m \\in \\mathbb{N}$ such that $p(\\phi^m(a)) \\ne 0$.\n",
    "informal_proof": "\nThis is a special case of the Zariski dense orbit conjecture. See the main theorem of A. Medvedev and T. Scanlon, Invariant varieties for polynomial dynamical systems. Ann. Math. 179(2014), no. 1, 81–177.\n",
    "formal_statement": "import Mathlib\n\nopen scoped Polynomial\n\n/--\nIf $k$ is a field of characteristic zero, $n \\in \\mathbb{N}$, $n \\ne 0$,\nand $\\phi \\colon k[x_1, \\dots, x_n] \\to k[x_1, \\dots, x_n]$ is given by $(x_1, \\dots, x_n) \\mapsto (f_1(x_1), \\dots, f_n(x_n))$,\nwhere $f_i(x_i) \\in k[x_i]$ having degree at least two, then there is a point $a \\in k^n$\nsuch that for any non-zero polyminal $p \\in k[x_1, \\dots, x_n]$,\nthere exists $m \\in \\mathbb{N}$ such that $p(\\phi^m(a)) \\ne 0$. -/\ntheorem exists_point_not_in_zero_set {τ k : Type} [Finite τ] [Nonempty τ] [Field k] [CharZero k]\n    {f : τ → k[X]} (hfd : ∀ i : τ, (f i).natDegree ≥ 2): ∃ a : τ → k,\n    ∀ p : MvPolynomial τ k, p ≠ 0 →\n    ∃ m : ℕ, (((MvPolynomial.aeval (fun i ↦ (f i).toMvPolynomial i)) ^ m) p).aeval a ≠ 0 := by\n  sorry\n"
  },
  {
    "id": 98,
    "informal_statement": "\n    If $K$ be a number field, $A$ be a finite-type $K$-algebra, $f : A \\to A$ be an endomorphism. If $A$ is a domain and $f$ is not of finite order, then there exists a maximal ideal $m \\subset A$ such that for all $n \\in \\mathbb{N}_+$, $f^{-n}(m) \\ne m$.\n",
    "informal_proof": "\nSee the Corollary 9 of Ekaterina Amerik, Existence of non-preperiodic algebraic points for a rational self-map of infinite order, Math. Res. Lett. 18 (2011), no. 2, 251–256, DOI 10.4310/MRL.2011.v18.n2.a5.\n",
    "formal_statement": "import Mathlib\n\n/--\nIf $K$ be a number field, $A$ be a finite-type $K$-algebra, $f : A \\to A$ be an endomorphism.\nIf $A$ is a domain and $f$ is not of finite order, then there exists a maximal ideal $m \\subset A$\nsuch that for all $n \\in \\mathbb{N}_+$, $f^{-n}(m) \\ne m$.\n-/\ntheorem exists_maximal_ideal_not_in_finite_order {K A : Type} [Field K] [NumberField K] [CommRing A]\n    [IsDomain A] [Algebra K A] [Algebra.FiniteType K A] {f : A →ₐ[K] A} (hf : ∀ n > 0, f ^ n ≠ 1) :\n    ∃ m : Ideal A, m.IsMaximal ∧ ∀ n > 0, m.comap (f ^ n) ≠ m := by\n  sorry\n"
  },
  {
    "id": 99,
    "informal_statement": "\n    Let $A$ be a finite-type $\\mathbb{C}$-algebra, $n \\in \\mathbb{N}$, $n \\ge 1$. If $A$ is a domain, and $\\mathrm{Aut}_\\mathbb{C}\\ A$ is isomorphic to $\\mathrm{Aut}_\\mathbb{C}\\ \\mathbb{C}[x_1, \\dots, x_n]$, then $A$ is isomorphic to $\\mathbb{C}[x_1, \\dots, x_n]$ as $\\mathbb{C}$-algebras.\n",
    "informal_proof": "\nSee the Theorem A of Cantat S, Regeta A, Xie J. Families of commuting automorphisms, and a characterization of the affine space. American Journal of Mathematics. 2023;145(2): 413-434.\n",
    "formal_statement": "import Mathlib\n\n/--\nLet $A$ be a finite-type $\\mathbb{C}$-algebra, $n \\in \\mathbb{N}$, $n \\ge 1$. If $A$ is a domain,\nand $\\mathrm{Aut}_\\mathbb{C}\\ A$ is isomorphic to $\\mathrm{Aut}_\\mathbb{C}\\ \\mathbb{C}[x_1, \\dots, x_n]$,\nthen $A$ is isomorphic to $\\mathbb{C}[x_1, \\dots, x_n]$ as $\\mathbb{C}$-algebras.\n-/\ntheorem equiv_of_aut_equiv {A : Type} [CommRing A] [IsDomain A] [Algebra ℂ A]\n    [Algebra.FiniteType ℂ A] {n : ℕ} (hn : n ≥ 1)\n    (e : (A ≃ₐ[ℂ] A) ≃* (MvPolynomial (Fin n) ℂ ≃ₐ[ℂ] MvPolynomial (Fin n) ℂ)) :\n    Nonempty (A ≃ₐ[ℂ] MvPolynomial (Fin n) ℂ) := by\n  sorry\n"
  },
  {
    "id": 100,
    "informal_statement": "\n    Let $R$ be a Noetherian ring, $P$ be a countably generated projective $R$-module such that $P_{\\mathfrak{m}}$ has infinite rank for all maximal ideals $\\mathfrak{m}$ of $R$. Then $P$ is free.\n",
    "informal_proof": "\n\\href{https://stacks.math.columbia.edu/tag/0GVK}{Stacks Project, Theorem 0GVK}\n",
    "formal_statement": "import Mathlib\n\nopen Module\n\n/--\nLet $R$ be a Noetherian ring, $P$ be a countably generated projective $R$-module\nsuch that $P_{\\mathfrak{m}}$ has infinite rank for all maximal ideals $\\mathfrak{m}$ of $R$.\nThen $P$ is free.\n-/\ntheorem free_of_countably_generated_projective_of_local_infinite_rank {R : Type} [CommRing R]\n    [IsNoetherianRing R] (P : Type) [AddCommGroup P] [Module R P] [Projective R P]\n    (hcg : ∃ s : Set P, s.Countable ∧ Submodule.span R s = ⊤)\n    (hm : ∀ m : Ideal R, (_ : m.IsMaximal) →\n      ¬ Module.Finite (Localization.AtPrime m) (LocalizedModule.AtPrime m P)) : Free R P := by\n  sorry\n"
  }
]